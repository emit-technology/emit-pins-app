(()=>{var t={87821:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.checkSumAddress=e.fromAddressBytes=e.getPublicKey=e.getPublicKeyBs58=void 0;const o=n(61366),i=n(14179),u=n(45287);function a(t){const e=u.decode(t);if(e.length!=o.ADDRESS_BYTES_LEN)throw new Error("the address bytes len != 36");if(30!=e[0])throw new Error("the address prefix is invalid");const n=(0,i.blake2bHash)(o.EMIT_ADDR_BS_H0,e.slice(0,33)).slice(0,32),a=(0,i.blake2bHash)(o.EMIT_ADDR_BS_H1,r.concat([new r(n),new r(e.slice(1,33))])).slice(0,32),s=r.from(e.slice(33)),c=a.slice(0,3);if(s.toString("hex")!=c.toString("hex"))throw new Error("the address bytes sum-check failed");return new r(e.slice(1,33))}e.getPublicKeyBs58=function(t){try{const e=t.slice(0,32),n=o.ED_BASE.multiply((0,i.toScalar)(e)),a=r.from(n.toRawBytes()),s=r.from(o.ADDRESS_BYTES_PREFIX,"hex"),c=(0,i.blake2bHash)(o.EMIT_ADDR_BS_H0,r.concat([s,a])),f=r.alloc(32,0);f.fill(c,0,c.length>32?32:c.length);const l=(0,i.blake2bHash)(o.EMIT_ADDR_BS_H1,r.concat([f,a])),h=r.alloc(32,0);h.fill(l,0,l.length>32?32:l.length);const d=r.alloc(o.ADDRESS_BYTES_LEN,0),p=r.concat([s,a,h.slice(0,3)]);return d.fill(p,0,p.length>o.ADDRESS_BYTES_LEN?o.ADDRESS_BYTES_LEN:p.length),u.encode(d)}catch(e){console.error(e)}return""},e.getPublicKey=function(t){const e=(0,i.toScalar)(t.slice(0,32)),n=r.from(o.ED_BASE.multiply(e).toRawBytes()),u=r.alloc(32,0);return u.fill(n,0,n.length),u},e.fromAddressBytes=a,e.checkSumAddress=function(t){try{return a(t),!0}catch(e){console.log(e)}return!1}},70087:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.recoverPersonalSignature=e.hashPersonalMessage=e.personalSign=e.verify=e.ecrecover=e.ecsign=void 0;const o=n(68521),i=n(14179),u=n(87821),a=n(61366),s=o.__importStar(n(65210)),c=o.__importStar(n(2750)),f=n(2750),l=n(2530);e.ecsign=(t,e)=>{const n=(0,i.signPrepareBlock)(t,e);return{r:n.r,s:n.s,v:(0,u.getPublicKeyBs58)(e)}};e.ecrecover=(t,n)=>{const o={s:(0,i.toScalar)(r.from(t.s,"hex")),R:s.RistrettoPoint.fromHex(t.r)},a=(0,u.fromAddressBytes)(t.v),c=(0,f.toBuffer)(n);return(0,e.verify)(c,o,a)?t.v:"Invalid sig"};e.verify=(t,e,n)=>{const o=a.ED_BASE.multiply(e.s),u=new l(n).toString("hex"),c=r.concat([t,r.from(e.R.toRawBytes())]);let f=(0,i.blake2bHash)("EMIT-SIGN",c);const h=(0,i.toScalar)(f.slice(0,32)),d=s.RistrettoPoint.fromHex(u).multiply(h).add(e.R);return o.equals(d)};e.personalSign=(t,n)=>{const r=c.toBuffer(n),o=(0,e.hashPersonalMessage)(r).toString("hex");return(0,e.ecsign)(o,t)};e.hashPersonalMessage=function(t){const e=r.from(`\x19EMIT Signed Message:\n${t.length}`,"utf-8");return c.keccak(r.concat([e,t]))};e.recoverPersonalSignature=(t,n)=>(0,e.ecrecover)(t,n)},77004:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(68521);r.__exportStar(n(70087),e),r.__exportStar(n(88016),e),r.__exportStar(n(90299),e),r.__exportStar(n(80856),e),r.__exportStar(n(92051),e),r.__exportStar(n(81565),e),r.__exportStar(n(28030),e),r.__exportStar(n(99005),e),r.__exportStar(n(87891),e),r.__exportStar(n(33537),e),r.__exportStar(n(53385),e),r.__exportStar(n(76826),e),r.__exportStar(n(42179),e),r.__exportStar(n(81256),e),r.__exportStar(n(87821),e),r.__exportStar(n(14179),e)},88016:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const o=n(68521),i=o.__importDefault(n(80856)),u=n(90299),a=o.__importDefault(n(81565)),s=n(2530);e.default=class{constructor(t){this.serial=()=>{const t=this.data,e=[new s(t.num).toArrayLike(r,"be",8),new s(t.timestamp).toArrayLike(r,"be",8),r.from(t.parent_hash,"hex"),new i.default(t.data_sets).serial(),new a.default(t.factor_set).serial()];if(t.data){if(t.data.length>u.BYTES_MAX_LEN)throw new Error("Bytes content is too big");e.push(new s(r.from(t.data,"hex").length).toArrayLike(r,"be",4)),e.push(r.from(t.data,"hex"))}else e.push(r.alloc(4,0).fill(""));return r.concat(e)},this.data=t}}},90299:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ED_BASE=e.EMIT_ADDR_BS_H1=e.EMIT_ADDR_BS_H0=e.ADDRESS_BYTES_PREFIX=e.ADDRESS_BYTES_LEN=e.VEC_T_MAX_LEN=e.BYTES_MAX_LEN=void 0;const r=n(68521).__importStar(n(65210));e.BYTES_MAX_LEN=4194304,e.VEC_T_MAX_LEN=1048576,e.ADDRESS_BYTES_LEN=36,e.ADDRESS_BYTES_PREFIX="1e",e.EMIT_ADDR_BS_H0="EM_ADDR_BS_H0",e.EMIT_ADDR_BS_H1="EM_ADDR_BS_H1",e.ED_BASE=r.RistrettoPoint.fromHex("e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76")},80856:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const o=n(90299),i=n(2530);e.default=class{constructor(t){this.serial=()=>{if(this.data&&this.data.length>o.VEC_T_MAX_LEN)throw new Error("INVALID_FORMAT");const t=this.data.length,e=[new i(t).toArrayLike(r,"be",4)];for(let n of this.data){const t=r.from(n.name,"hex"),o=new i(r.from(n.data,"hex").length).toArrayLike(r,"be",4),u=r.from(n.data,"hex"),a=[];if(a.push(t),a.push(o),a.push(u),n.old){const t=new i(1).toArrayLike(r,"be",1),e=new i(r.from(n.old,"hex").length).toArrayLike(r,"be",4),o=r.from(n.old,"hex");a.push(t),a.push(e),a.push(o)}else{const t=new i(0).toArrayLike(r,"be",1);a.push(t)}e.push(r.concat(a))}return r.concat(e)},this.data=t}}},92051:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const o=n(87821),i=n(2530);class u{constructor(t){this.data=t}serial(){const t=this.data,e=(0,o.fromAddressBytes)(t.supplier),n=r.from(t.symbol,"hex"),u=new i(n.length).toArrayLike(r,"be",4),a=r.from(t.id,"hex"),s=new i(a.length).toArrayLike(r,"be",4);return r.concat([e,u,n,s,a])}}e.default=class{constructor(t){this.data=t}serial(){const t=this.data,e=new u(t.category).serial(),n=r.from(t.value,"hex");return r.concat([e,n])}}},81565:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const o=n(68521),i=o.__importDefault(n(87891)),u=o.__importDefault(n(28030));e.default=class{constructor(t){this.serial=()=>{const t=this.data.settles,e=this.data.outs,n=new i.default(t).serial(),o=new u.default(e).serial();return r.concat([n,o])},this.data=t}}},61366:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(68521);r.__exportStar(n(88016),e),r.__exportStar(n(90299),e),r.__exportStar(n(80856),e),r.__exportStar(n(92051),e),r.__exportStar(n(81565),e),r.__exportStar(n(28030),e),r.__exportStar(n(99005),e),r.__exportStar(n(87891),e)},28030:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const o=n(68521).__importDefault(n(92051)),i=n(87821),u=n(2530);e.default=class{constructor(t){this.data=t}serial(){const t=this.data;if(t.length>0){const e=[new u(t.length).toArrayLike(r,"be",4)];for(let n of t){const t=(0,i.fromAddressBytes)(n.target),a=new o.default(n.factor).serial();e.push(t,a);const s=new u(r.from(n.data,"hex").length).toArrayLike(r,"be",4),c=r.from(n.data,"hex");e.push(s,c)}return r.concat(e)}return r.alloc(4,0)}}},99005:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},87891:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const o=n(68521).__importDefault(n(92051)),i=n(87821),u=n(2530);e.default=class{constructor(t){this.data=t}serial(){const t=this.data;if(t.length>0){const e=[new u(t.length).toArrayLike(r,"be",4)];for(let n of t){const t=(0,i.fromAddressBytes)(n.from),a=new u(n.num).toArrayLike(r,"be",8),s=new u(n.index).toArrayLike(r,"be",4),c=new o.default(n.factor).serial();e.push(t,a,s,c)}return r.concat(e)}return r.alloc(4,0)}}},14179:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.signPrepareBlock=e.mod=e.bytesToNumberLE=e.toScalar=e.blockToHash=e.prepareBlockToHash=e.blake2bHash=void 0;const o=n(68521),i=o.__importStar(n(65210)),u=n(73664),a=n(61366),s=n(87821),c=o.__importDefault(n(88016)),f=n(2530),l=n(3345);function h(t,e){const n=r.alloc(16,0);n.fill(t,0,t.length);const o=l(64,null,null,n).update(e).digest("binary");return r.from(o)}function d(t){return h("EMIT-BLOCK-HASH",new c.default(t).serial()).slice(0,32).toString("hex")}function p(t){return v(y(t),i.CURVE.n)}function y(t){let e=BigInt(0);for(let n=0;n<t.length;n++)e+=BigInt(t[n])<<BigInt(8)*BigInt(n);return e}function v(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.CURVE.n;const n=t%e;return n>=BigInt(0)?n:e+n}e.blake2bHash=h,e.prepareBlockToHash=function(t){const e=(0,s.fromAddressBytes)(t.address),n=r.from(d(t.blk),"hex");return h("EMIT-PREPARE-BLK",r.concat([e,n])).slice(0,32).toString("hex")},e.blockToHash=d,e.toScalar=p,e.bytesToNumberLE=y,e.mod=v,e.signPrepareBlock=function(t,e){const n=r.from(t,"hex"),o=p((0,u.randomBytes)(32)),i=a.ED_BASE.multiply(o),s=p(e.slice(0,32)),c=p(h("EMIT-SIGN",r.concat([n,r.from(i.toRawBytes())])).slice(0,32)),l=new f(v(v(s*c)+o)).toArrayLike(r,"le"),d=r.alloc(32,0);return d.fill(l,0,l.length),{r:i.toHex(),s:d.toString("hex")}}},33537:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChainType=e.CreateType=void 0,function(t){t[t.Mnemonic=0]="Mnemonic",t[t.PrivateKey=1]="PrivateKey"}(e.CreateType||(e.CreateType={})),function(t){t[t._=0]="_",t[t.SERO=1]="SERO",t[t.ETH=2]="ETH",t[t.TRON=3]="TRON",t[t.BSC=4]="BSC",t[t.EMIT=5]="EMIT"}(e.ChainType||(e.ChainType={}))},53385:(t,e,n)=>{"use strict";var r=n(33394).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultHash=void 0;e.getDefaultHash=()=>r.alloc(32,0).toString("hex")},76826:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},42179:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},81256:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},26540:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(72856),a=function(t){function e(e){var n=t.call(this)||this;return n._name=u.baseConfig.account.name,n._db=e,n}return r(e,t),e.prototype.delete=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.delete(this._name,t)];case 1:return e.sent(),[2]}}))}))},e.prototype.find=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.select(this._name,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.findAll=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._db.selectAll(this._name)];case 1:return[2,t.sent()]}}))}))},e.prototype.insert=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.insert(this._name,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.update=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.update(this._name,t)];case 1:return[2,e.sent()]}}))}))},e}(u.default);e.default=a},72856:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baseConfig=void 0;e.default=function(){},e.baseConfig={keystore:{name:"keystore",keyPath:"id",autoIncrement:!0,indexes:[{index:"accountId",relativeIndex:"accountId",unique:!1},{index:"chainType",relativeIndex:"chainType",unique:!1},{index:"address",relativeIndex:"address",unique:!0}]},account:{name:"account",keyPath:"id",autoIncrement:!0,indexes:[{index:"accountId",relativeIndex:"accountId",unique:!0}]},mint:{name:"mint_ne",keyPath:"id",autoIncrement:!0,indexes:[{index:"accountScenes",relativeIndex:"accountScenes",unique:!0},{index:"accountId",relativeIndex:"accountId",unique:!1},{index:"scenes",relativeIndex:"scenes",unique:!1}]}}},8074:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mintCollections=e.accountCollection=e.keyStoreCollection=void 0;var r=n(65159),o=n(93539),i=n(72856),u=n(26540),a=n(41370),s=(new(function(){function t(){}return t.prototype.initDatabase=function(){for(var t=[],e=0,n=Object.keys(i.baseConfig);e<n.length;e++){var o=n[e];t.push(i.baseConfig[o])}var u={databaseName:"emit_wallet_service",tables:t,version:5};return new r.IndexedDB(u)},t}())).initDatabase();e.keyStoreCollection=new o.default(s),e.accountCollection=new u.default(s),e.mintCollections=new a.default(s)},93539:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(72856),a=function(t){function e(e){var n=t.call(this)||this;return n._name=u.baseConfig.keystore.name,n._db=e,n}return r(e,t),e.prototype.delete=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.delete(this._name,{address:t})];case 1:return e.sent(),[2]}}))}))},e.prototype.find=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.select(this._name,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.findAll=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._db.selectAll(this._name)];case 1:return[2,t.sent()]}}))}))},e.prototype.insert=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.insert(this._name,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.update=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.update(this._name,t)];case 1:return[2,e.sent()]}}))}))},e}(u.default);e.default=a},41370:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(72856),a=function(t){function e(e){var n=t.call(this)||this;return n._name=u.baseConfig.mint.name,n._db=e,n}return r(e,t),e.prototype.delete=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.delete(this._name,t)];case 1:return e.sent(),[2]}}))}))},e.prototype.find=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.select(this._name,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.findAll=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._db.selectAll(this._name)];case 1:return[2,t.sent()]}}))}))},e.prototype.insert=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.insert(this._name,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.update=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._db.update(this._name,t)];case 1:return[2,e.sent()]}}))}))},e}(u.default);e.default=a},9116:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={version:1,source:"emit-wallet",rpcHost:{},BIP44_PATH:{SERO:"m/44'/60'/0'/0/0",ETH:"m/44'/60'/0'/0/0",BSC:"m/44'/60'/0'/0/0",TRON:"m/44'/195'/0'/0/0",EMIT:"m/44'/636'/0'/0/0"},NE_HOST:"https://node-ne.emit.technology",POOL_HOST:"https://node-pool.emit.technology",SALT:"b15e6b43-3e83-4a9a-87d9-025ef45fa000",PWD:""}},65159:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.IndexedDB=void 0;var i=n(73200),u=function(){function t(t){var e=t.databaseName,n=t.tables;t=t.version;this.name=e,this.tables=n,this.createTable(this.tables,t)}return t.prototype.createDateBase=function(t,e){void 0===e&&(e=1),this.openedDB=indexedDB.open(t,e)},t.prototype.createTable=function(t,e){var n=this;void 0===e&&(e=1),indexedDB.open(this.name,e).onupgradeneeded=function(e){var r=e.target.result;t.forEach((function(t){var e;Array.from(r.objectStoreNames).includes(t.name)||(e=r.createObjectStore(t.name,{keyPath:t.keyPath,autoIncrement:t.autoIncrement}),t.indexes.forEach((function(t){n.createIndex(e,t)})))}))}},t.prototype.deleteTable=function(t,e){indexedDB.open(this.name,e).onupgradeneeded=function(n){var r=n.target.result;n.oldVersion<e&&r.deleteObjectStore(t)}},t.prototype.createIndex=function(t,e){var n={};e.unique&&(n.unique=e.unique),e.multiEntry&&(n.multiEntry=e.multiEntry),t.createIndex(e.index,e.relativeIndex,n)},t.prototype.connect=function(){var t=this;return new Promise((function(e,n){var r=indexedDB.open(t.name,t.version);r.onsuccess=function(t){e(t.target.result)},r.onerror=function(t){n(t)}}))},t.prototype.close=function(){this.connect().then((function(t){t.close()}))},t.prototype.insert=function(t,e){var n=this;return new Promise((function(r,o){n.connect().then((function(n){new i.Table(t,n).insert(e).then(r).catch(o)}))}))},t.prototype.select=function(t,e){var n=this;return new Promise((function(r,o){n.connect().then((function(n){new i.Table(t,n).select(e).then((function(t){r(t)})).catch((function(t){o(t)}))}))}))},t.prototype.selectId=function(t,e){var n=this;return new Promise((function(r,o){n.connect().then((function(n){new i.Table(t,n).selectId(e).then((function(t){r(t)})).catch((function(t){o(t)}))}))}))},t.prototype.some=function(t,e,n){var r=this;return new Promise((function(o,u){r.connect().then((function(r){new i.Table(t,r).some(e,n).then((function(t){o(t)})).catch((function(t){u(t)}))}))}))},t.prototype.update=function(t,e){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){return[2,new Promise((function(r,o){n.connect().then((function(n){new i.Table(t,n).update(e).then((function(t){r(t)})).catch((function(n){console.log(t,e),console.log(n),r(!0)}))}))}))]}))}))},t.prototype.delete=function(t,e){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){return[2,new Promise((function(r,o){n.connect().then((function(n){new i.Table(t,n).delete(e).then((function(t){r(t)})).catch((function(n){console.log(t,e),console.log(n),r(!0)}))}))}))]}))}))},t.prototype.selectAll=function(t){var e=this;return new Promise((function(n,r){e.connect().then((function(e){new i.Table(t,e).selectAll().then((function(t){n(t)})).catch((function(t){r(t)}))}))}))},t.prototype.clearTable=function(t){var e=this;return new Promise((function(n,r){e.connect().then((function(e){new i.Table(t,e).clear().then((function(t){n(t)})).catch((function(t){r(t)}))}))}))},t}();e.IndexedDB=u},73200:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Table=void 0;var o=function(){function t(t,e){this.name=t,this.db=e}return t.prototype.transaction=function(t){return void 0===t&&(t=!0),this.db.transaction([this.name],!0===t?"readwrite":"readonly")},t.prototype.request=function(){return this.transaction().objectStore(this.name)},t.prototype.select=function(t){return n(this,void 0,void 0,(function(){var e,n,o,i,u,a,s,c,f,l,h,d,p,y,v,g,_,w=this;return r(this,(function(r){switch(r.label){case 0:if(1!=Object.keys(t).length)return[3,1];for(o in t)n=t[e=o];return[2,new Promise((function(t,r){var o=w.request().index(e).getAll(n);o.onsuccess=function(e){t(e.target.result)},o.onerror=function(t){r(t.target.result)}}))];case 1:for(a in i=[],u=[],t)u.push(a);s=0,r.label=2;case 2:return s<u.length?(c=u[s],[4,this._iSelect(c,t[c])]):[3,5];case 3:c=r.sent(),i.push(c),r.label=4;case 4:return s++,[3,2];case 5:for(f=[],l=0,h=i;l<h.length;l++)for(d=h[l],p=0,y=d;p<y.length;p++){for(_ in v=y[p],g=!0,t)if(v[_]!=t[_]){g=!1;break}g&&f.push(v)}return[2,f]}}))}))},t.prototype._iSelect=function(t,e){return n(this,void 0,void 0,(function(){var n=this;return r(this,(function(r){return[2,new Promise((function(r,o){var i=n.request().index(t).getAll(e);i.onsuccess=function(t){r(t.target.result)},i.onerror=function(t){o(t.target.result)}}))]}))}))},t.prototype.selectId=function(t){var e=this;return new Promise((function(n,r){var o=e.request().get(t);o.onsuccess=function(t){n(t.target.result)},o.onerror=function(t){r(t.target.result)}}))},t.prototype.selectAll=function(){var t=this;return new Promise((function(e,n){var r=t.request().getAll();r.onsuccess=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.result)}}))},t.prototype.some=function(t,e){var n,r,o,i=this;for(o in t)r=t[n=o];return new Promise((function(t,o){var u=[];i.request().index(n).openCursor(r,"prev").onsuccess=function(n){(n=n.target.result)?(u.push(n.value),u.length<e?n.continue():t(u)):t(u)}}))},t.prototype.update=function(t){var e=this;return new Promise((function(n,r){var o=e.request().put(t);o.onsuccess=function(t){n(t)},o.onerror=function(t){r(t)}}))},t.prototype.insert=function(t){var e=this;return new Promise((function(n,r){var o=e.request().add(t);o.onsuccess=function(t){n(t)},o.onerror=function(t){r(t)}}))},t.prototype.delete=function(t){var e=this;return new Promise((function(n,r){e.select(t).then((function(t){t.length?t.forEach((function(t,o,i){var u=e.request(),a=u.keyPath;(a=u.delete(t[a])).onsuccess=function(t){o===i.length-1&&n(t)},a.onerror=function(t){r(t)}})):n(!0)})).catch((function(t){r(t)}))}))},t.prototype.clear=function(){var t=this;return new Promise((function(e,n){var r=t.request().clear();r.onsuccess=function(t){e(t)},r.onerror=function(t){n(t)}}))},t}();e.Table=o},25126:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(51333),u=n(49481),a=n(8074),s=n(9116),c=n(76062),f=n(6438),l=n(53020),h=n(43786),d=new(function(){function t(){var t=this;this.personSignMessage=function(e,n,i){return r(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,l.accountAdaptor.getWallet(i,e)];case 1:return[2,t.sent().personSignMessage(n.data)]}}))}))},this.signTypedMessage=function(e,n,i,u){return r(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,l.accountAdaptor.getWallet(u,e)];case 1:return[2,t.sent().signTypedMessage({data:JSON.parse(n.data)},i)]}}))}))},this.setBackedUp=function(e){return r(t,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,a.accountCollection.find({accountId:e})];case 1:return(t=n.sent())&&0<t.length?((t=t[0]).backedUp=!0,[4,a.accountCollection.update(t)]):[3,3];case 2:return n.sent(),[2,Promise.resolve(!0)];case 3:return[2,Promise.reject("Account not exist! ")]}}))}))},this.removeAccount=function(e,n){return r(t,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return[4,a.accountCollection.find({accountId:e})];case 1:return(t=r.sent())&&0<t.length?[4,i.walletEx.checkPassword(n)]:[3,7];case 2:return r.sent(),[4,a.accountCollection.findAll()];case 3:return(t=r.sent())&&1==t.length?[4,i.accountKeyManager.removeAccountKey()]:[3,5];case 4:r.sent(),r.label=5;case 5:return[4,a.accountCollection.delete({accountId:e})];case 6:return r.sent(),[2,Promise.resolve(!0)];case 7:return[2,Promise.reject("Account not exist! ")]}}))}))}}return t.prototype.generateMnemonic=function(){return h.generateMnemonic()},t.prototype.exportMnemonic=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,a.accountCollection.find({accountId:t})];case 1:return(n=r.sent())&&0<n.length?(n=n[0],[4,i.walletEx.decodeAccountKey(n.key,e)]):[3,3];case 2:return[2,r.sent()];case 3:return[2,Promise.reject("Export mnemonic failed!")]}}))}))},t.prototype.exportPrivateKey=function(t,e,n){return r(this,void 0,void 0,(function(){var r,u;return o(this,(function(o){switch(o.label){case 0:return[4,a.accountCollection.find({accountId:t})];case 1:return(r=o.sent())&&0<r.length?(r=r[0],[4,i.walletEx.decodeAccountKey(r.key,e)]):[3,6];case 2:return(u=o.sent())&&12==u.split(" ").length?[4,l.accountAdaptor.getWallet(t,n)]:[3,5];case 3:return[4,o.sent().exportPrivateKey()];case 4:return[2,o.sent()];case 5:return[2,u];case 6:return[2,Promise.reject("Export private key failed!")]}}))}))},t.prototype.importMnemonic=function(t,e,n,u,c){return r(this,void 0,void 0,(function(){var r,l;return o(this,(function(o){switch(o.label){case 0:return h.validateMnemonic(t)?(r=h.mnemonicToSeedSync(t),r=(r=(r=f.hdkey.fromMasterSeed(r)).derivePath(s.default.BIP44_PATH.ETH)).getWallet().getAddressString(),[4,a.accountCollection.find({accountId:r})]):[2,Promise.reject("Invalid mnemonic!")];case 1:return(l=o.sent())&&0<l.length?[2,Promise.reject("Account [name: "+l[0].name+"] already exist!")]:[4,i.walletEx.encodeAccountKey(t,r,e)];case 2:return l=o.sent(),[4,this.store(l,n,u,c,e,r.toLowerCase())];case 3:return o.sent(),[4,this.unlockWallet(r,e)];case 4:return o.sent(),[2,r]}}))}))},t.prototype.resetAccount=function(t,e){return r(this,void 0,void 0,(function(){var n,r,u;return o(this,(function(o){switch(o.label){case 0:return n=t&&12==t.split(" ").length?(n=h.mnemonicToSeedSync(t),(u=f.hdkey.fromMasterSeed(n)).derivePath(s.default.BIP44_PATH.ETH).getWallet().getAddressString()):f.default.fromPrivateKey(c.toBuffer(t)).getAddressString(),[4,a.accountCollection.find({accountId:n})];case 1:return(r=o.sent())&&0<r.length?[4,a.accountCollection.delete({accountId:n})]:[3,5];case 2:return o.sent(),[4,i.accountKeyManager.removeAccountKey()];case 3:return o.sent(),[4,i.accountKeyManager.removePasswordKey()];case 4:return o.sent(),[3,6];case 5:return[2,Promise.reject("Account not found!")];case 6:return[4,i.walletEx.encodeAccountKey(t,n,e)];case 7:return u=o.sent(),[4,this.store(u,r[0].name,"","",e,n.toLowerCase())];case 8:return o.sent(),[4,this.unlockWallet(n,e)];case 9:return o.sent(),[2,n]}}))}))},t.prototype.importPrivateKey=function(t,e,n,u,s){return r(this,void 0,void 0,(function(){var r,l;return o(this,(function(o){switch(o.label){case 0:return r=(r=f.default.fromPrivateKey(c.toBuffer(t))).getAddressString(),[4,a.accountCollection.find({accountId:r})];case 1:return(l=o.sent())&&0<l.length?[2,Promise.reject("Account [name: "+l[0].name+"] already exist!")]:[4,i.walletEx.encodeAccountKey(t,r,e)];case 2:return l=o.sent(),[4,this.store(l,n,u,s,e,r.toLowerCase())];case 3:return o.sent(),[4,this.unlockWallet(r,e)];case 4:return o.sent(),[2,r]}}))}))},t.prototype.store=function(t,e,n,i,u,s){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,a.accountCollection.insert({accountId:s,name:e,passwordHint:n,avatar:i,addresses:{},key:t,timestamp:Math.floor(Date.now()/1e3),backedUp:!1})];case 1:return o.sent(),[2,Promise.resolve(s)];case 2:return r=o.sent(),console.error(r),[2,Promise.reject(r)];case 3:return[2]}}))}))},t.prototype.accounts=function(){return r(this,void 0,void 0,(function(){var t,e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,a.accountCollection.findAll()];case 1:for(t=o.sent(),e=[],n=0,r=t;n<r.length;n++)(i=r[n])&&i.addresses&&i.addresses[u.ChainType.ETH]&&(delete i.wallets,delete i.key,e.push(i));return[2,e]}}))}))},t.prototype.accountInfo=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,a.accountCollection.find({accountId:t})];case 1:return(e=r.sent())&&0<e.length?((n=e[0]).backedUp=!n.timestamp||n.backedUp,[4,i.accountKeyManager.setPasswordKeyTimestamp()]):[3,3];case 2:return r.sent(),delete n.wallets,delete n.key,[2,n];case 3:return[2]}}))}))},t.prototype.signTx=function(t,e,n,i,u){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,l.accountAdaptor.getWallet(t,n)];case 1:return[2,r.sent().buildSerializedTx(i,e,u)]}}))}))},t.prototype.unlockWallet=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,a.accountCollection.find({accountId:t})];case 1:return(n=r.sent())&&0<n.length?[4,i.walletEx.unLock(e,t)]:[3,4];case 2:return r.sent(),[4,l.accountAdaptor.initAccountAndWallet()];case 3:return r.sent(),[2,Promise.resolve(!0)];case 4:return[2,Promise.reject("Account is not exist !")]}}))}))},t.prototype.isLocked=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,i.walletEx.isLocked()];case 1:return[2,t.sent()]}}))}))},t.prototype.lockAccount=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,i.walletEx.lock()];case 1:return t.sent(),[2,!0]}}))}))},t.prototype.init=function(t){return s.default.version=t.version,s.default.rpcHost=t.rpcHost,s.default.source=t.source,console.log(s.default,"init config..."),!0},t}());function p(t){self.postMessage(t)}self.addEventListener("message",(function(t){if(t&&t.data&&t.data.method){var e=t.data;switch(e.method){case u.Method.exportMnemonic:d.exportMnemonic(e.data.accountId,e.data.password).then((function(t){e.result=t,p(e)})).catch((function(t){e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.importMnemonic:d.importMnemonic(e.data.mnemonic,e.data.password,e.data.name,e.data.passwordHint,e.data.avatar).then((function(t){e.result=t,p(e)})).catch((function(t){console.error(t),e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.signTx:d.signTx(e.data.accountId,e.data.password,e.data.chainType,e.data.params,e.data.chainParams).then((function(t){e.result=t,p(e)})).catch((function(t){console.error(t),e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.generateMnemonic:e.result=d.generateMnemonic(),p(e);break;case u.Method.getAccountInfo:d.accountInfo(e.data.accountId).then((function(t){e.result=t,p(e)})).catch((function(t){e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.getAccountList:d.accounts().then((function(t){e.result=t,p(e)})).catch((function(t){e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.exportPrivateKey:d.exportPrivateKey(e.data.accountId,e.data.password,e.data.chain).then((function(t){e.result=t,p(e)})).catch((function(t){e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.importPrivateKey:d.importPrivateKey(e.data.mnemonic,e.data.password,e.data.name,e.data.passwordHint,e.data.avatar).then((function(t){e.result=t,p(e)})).catch((function(t){e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.unlockWallet:d.unlockWallet(e.data.accountId,e.data.password).then((function(t){e.result=t,p(e)})).catch((function(t){console.error(t),e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.isLocked:d.isLocked().then((function(t){e.result=t,p(e)})).catch((function(t){console.error(t),e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.lockWallet:d.lockAccount().then((function(t){e.result=t,p(e)})).catch((function(t){console.error(t),e.error="string"==typeof t?t:t.message,p(e)}));break;case u.Method.init:e.result=d.init(e.data),p(e);break;case u.Method.personSignMessage:d.personSignMessage(e.data.chainType,e.data.msg,e.data.accountId).then((function(t){e.result=t,p(e)})).catch((function(t){t="string"==typeof t?t:t.message,e.error=t,p(e)}));break;case u.Method.signTypedMessage:d.signTypedMessage(e.data.chainType,e.data.msg,e.data.version,e.data.accountId).then((function(t){e.result=t,p(e)})).catch((function(t){t="string"==typeof t?t:t.message,e.error=t,p(e)}));break;case u.Method.setBackedUp:d.setBackedUp(e.data.accountId).then((function(t){e.result=t,p(e)})).catch((function(t){t="string"==typeof t?t:t.message,e.error=t,p(e)}));break;case u.Method.removeAccount:d.removeAccount(e.data.accountId,e.data.password).then((function(t){e.result=t,p(e)})).catch((function(t){t="string"==typeof t?t:t.message,e.error=t,p(e)}));break;case u.Method.resetAccount:d.resetAccount(e.data.mnemonic,e.data.password).then((function(t){e.result=t,p(e)})).catch((function(t){t="string"==typeof t?t:t.message,e.error=t,p(e)}));break;default:console.log("default message",e)}}}))},49481:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.MinerScenes=e.MintState=e.CreateType=e.ChainType=e.Method=void 0,(n=e.Method||(e.Method={}))[n._=0]="_",n[n.importMnemonic=1]="importMnemonic",n[n.exportMnemonic=2]="exportMnemonic",n[n.signTx=3]="signTx",n[n.generateMnemonic=4]="generateMnemonic",n[n.getAccountInfo=5]="getAccountInfo",n[n.getAccountList=6]="getAccountList",n[n.exportKeystore=7]="exportKeystore",n[n.execute=8]="execute",n[n.exportPrivateKey=9]="exportPrivateKey",n[n.importPrivateKey=10]="importPrivateKey",n[n.genNewWallet=11]="genNewWallet",n[n.unlockWallet=12]="unlockWallet",n[n.isLocked=13]="isLocked",n[n.powStart=14]="powStart",n[n.powStop=15]="powStop",n[n.powState=16]="powState",n[n.powClear=17]="powClear",n[n.powInit=18]="powInit",n[n.lockWallet=19]="lockWallet",n[n.getEpochPollKeys=20]="getEpochPollKeys",n[n.init=21]="init",n[n.personSignMessage=22]="personSignMessage",n[n.signTypedMessage=23]="signTypedMessage",n[n.setBackedUp=24]="setBackedUp",n[n.removeAccount=25]="removeAccount",n[n.resetAccount=26]="resetAccount",function(t){t[t._=0]="_",t[t.SERO=1]="SERO",t[t.ETH=2]="ETH",t[t.TRON=3]="TRON",t[t.BSC=4]="BSC",t[t.EMIT=5]="EMIT"}(e.ChainType||(e.ChainType={})),function(t){t[t.Mnemonic=0]="Mnemonic",t[t.PrivateKey=1]="PrivateKey",t[t.Generate=2]="Generate"}(e.CreateType||(e.CreateType={})),function(t){t[t._=0]="_",t[t.running=1]="running",t[t.stop=2]="stop"}(e.MintState||(e.MintState={})),function(t){t[t._=0]="_",t[t.altar=1]="altar",t[t.chaos=2]="chaos"}(e.MinerScenes||(e.MinerScenes={}))},24778:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decrypt=e.Encrypt=void 0;var r=n(82197);e.Encrypt=function(t,e){return r.AES.encrypt(JSON.stringify(t),e).toString()},e.Decrypt=function(t,e){try{var n=r.AES.decrypt(t,e);return JSON.parse(n.toString(r.enc.Utf8))}catch(t){}return{key:""}}},76062:(t,e,n)=>{"use strict";var r=n(34869).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.toBuffer=void 0;e.toBuffer=function(t){return 0==t.indexOf("0x")?r.from(t.slice(2),"hex"):r.from(t,"hex")}},53020:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.accountAdaptor=void 0;var i=n(49481),u=n(67108),a=n(28256),s=n(80913),c=n(49595),f=n(8074),l=function(){function t(){var t=this;this._initWallet=function(e){return r(t,void 0,void 0,(function(){var t;return o(this,(function(n){return(t={})[i.ChainType.ETH]=new u.EthWallet(e),t[i.ChainType.BSC]=new u.EthWallet(e),t[i.ChainType.EMIT]=new a.EmitWallet(e),t[i.ChainType.SERO]=new s.SeroWallet(e),t[i.ChainType.TRON]=new c.TronWallet(e),[2,t]}))}))},this.getWallet=function(e,n){return r(t,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return[4,this.getAccount(e)];case 1:return t=r.sent(),n==i.ChainType.ETH||n==i.ChainType.BSC?[2,new u.EthWallet(t.key)]:n==i.ChainType.SERO?[2,new s.SeroWallet(t.key)]:n==i.ChainType.TRON?[2,new c.TronWallet(t.key)]:n==i.ChainType.EMIT?[2,new a.EmitWallet(t.key)]:[2]}}))}))},this.getAccount=function(e){return r(t,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,f.accountCollection.find({accountId:e})];case 1:return(t=n.sent())&&0<t.length?[2,t[0]]:[2,Promise.reject("Account not found!")]}}))}))},this.initAccountAndWallet=function(){return r(t,void 0,void 0,(function(){var t,e,n,r,u,a;return o(this,(function(o){switch(o.label){case 0:return[4,f.accountCollection.findAll()];case 1:e=o.sent(),t=0,o.label=2;case 2:if(!(t<e.length))return[3,11];n=e[t],o.label=3;case 3:return o.trys.push([3,9,,10]),n.key?(r=n,[4,this._initWallet(n.key)]):[3,5];case 4:r.wallets=o.sent(),o.label=5;case 5:return n.addresses[i.ChainType.EMIT]?[3,8]:(a=JSON.parse(JSON.stringify(n)),u=a,[4,this._genAddresses(n.accountId)]);case 6:return u.addresses=o.sent(),[4,f.accountCollection.update(a)];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:return a=o.sent(),console.error(a),[3,10];case 10:return t++,[3,2];case 11:return[2]}}))}))}}return t.prototype._genAddresses=function(t){return r(this,void 0,void 0,(function(){var e,n,r,u,a,s,c,l,h,d,p,y;return o(this,(function(o){switch(o.label){case 0:return e={},[4,f.accountCollection.find({accountId:t})];case 1:return(n=o.sent())&&0<n.length?(r=e,u=i.ChainType.EMIT,[4,this.getWallet(t,i.ChainType.EMIT)]):[3,12];case 2:return[4,o.sent().getAddressAsync()];case 3:return r[u]=o.sent(),a=e,s=i.ChainType.BSC,[4,this.getWallet(t,i.ChainType.BSC)];case 4:return[4,o.sent().getAddressAsync()];case 5:return a[s]=o.sent(),c=e,l=i.ChainType.ETH,[4,this.getWallet(t,i.ChainType.ETH)];case 6:return[4,o.sent().getAddressAsync()];case 7:return c[l]=o.sent(),h=e,d=i.ChainType.TRON,[4,this.getWallet(t,i.ChainType.TRON)];case 8:return[4,o.sent().getAddressAsync()];case 9:return h[d]=o.sent(),p=e,y=i.ChainType.SERO,[4,this.getWallet(t,i.ChainType.SERO)];case 10:return[4,o.sent().getAddressAsync()];case 11:p[y]=o.sent(),o.label=12;case 12:return[2,e]}}))}))},t}();e.accountAdaptor=new l},28256:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EmitWallet=void 0;var u=n(20116),a=n(77004),s=n(9116),c=n(39082),f=function(t){function e(e,n,r){var u=t.call(this,e,n,r)||this;return u._path=s.default.BIP44_PATH.EMIT,u.signTypedMessage=function(t,e){return o(u,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,this.getWallet(this._path)];case 1:return n=r.sent(),[2,c.signTypedMessage(n.getPrivateKey(),t,e)]}}))}))},u.getAddressAsync=function(){return o(u,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.getWallet(this._path)];case 1:return t=e.sent(),[2,a.getPublicKeyBs58(t.getPrivateKey())]}}))}))},u.personSignMessage=function(t){return o(u,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,this.getWallet(this._path)];case 1:return e=n.sent(),[2,a.personalSign(e.getPrivateKey(),t)]}}))}))},u.exportPrivateKey=function(){return o(u,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.getWallet(this._path)];case 1:return[2,t.sent().getPrivateKeyString()]}}))}))},u}return r(e,t),e.prototype.buildSerializedTx=function(t,e,n){return o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),0==t.blk.num&&(t.blk.parent_hash=a.fromAddressBytes(t.address).toString("hex")),[4,this.getWallet(this._path)];case 1:return n=r.sent(),e=a.prepareBlockToHash(t),n=a.signPrepareBlock(e,n.getPrivateKey()),[2,{data:t,sign:{addr:t.address,sign:n}}];case 2:return n=r.sent(),console.error(n),[3,3];case 3:return[2,""]}}))}))},e}(u.WrappedWallet);e.EmitWallet=f},67108:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EthWallet=void 0;var u=n(20116),a=n(87633),s=n(9116),c=n(39082),f=n(27689).YW,l=function(t){function e(e,n,r){var u=t.call(this,e,n,r)||this;return u._path=s.default.BIP44_PATH.ETH,u.buildSerializedTx=function(t,e,n){return o(u,void 0,void 0,(function(){var e,r,o;return i(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),console.log("chainParams",n),!t.nonce)throw new Error("Nonce can not be nil");return(e=a.default.forCustomChain(n.baseChain,n.customer,n.hardfork)).setHardfork(n.hardfork),[4,this.getWallet(this._path)];case 1:return r=i.sent(),console.log("customCommon",e),(o=new f(t,{common:e})).sign(r.getPrivateKey()),[2,o.serialize().toString("hex")];case 2:return o=i.sent(),console.error(o),[2,"string"==typeof o?o:o.message];case 3:return[2]}}))}))},u.getAddressAsync=function(){return o(u,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.getWallet(this._path)];case 1:return[2,t.sent().getAddressString()]}}))}))},u.personSignMessage=function(t){return o(u,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,this.getWallet(this._path)];case 1:return e=n.sent(),[2,c.personalSign(e.getPrivateKey(),{data:t})]}}))}))},u.signTypedMessage=function(t,e){return o(u,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,this.getWallet(this._path)];case 1:return n=r.sent(),[2,c.signTypedMessage(n.getPrivateKey(),t,e)]}}))}))},u.exportPrivateKey=function(){return o(u,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.getWallet(this._path)];case 1:return[2,t.sent().getPrivateKeyString()]}}))}))},u}return r(e,t),e}(u.WrappedWallet);e.EthWallet=l},51333:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(67108),e),o(n(28256),e),o(n(80913),e),o(n(49595),e),o(n(20116),e)},80913:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.SeroWallet=void 0;var u=n(59132),a=n(33002),s=n(20116),c=n(20035),f=n(9116),l=n(39082),h=function(t){function e(e,n,r){var s=t.call(this,e,n,r)||this;return s._path=f.default.BIP44_PATH.SERO,s.getAddressAsync=function(){return o(s,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.getWallet(this._path)];case 1:return t=e.sent(),t=a.seed2Sk(t.getPrivateKey(),1),t=a.sk2Tk(t),[2,u.createPkrHash(t,1,1)]}}))}))},s.personSignMessage=function(t){return o(s,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,this.getWallet(this._path)];case 1:return e=n.sent(),[2,l.personalSign(e.getPrivateKey(),{data:t})]}}))}))},s.signTypedMessage=function(t,e){return o(s,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,this.getWallet(this._path)];case 1:return n=r.sent(),[2,l.signTypedMessage(n.getPrivateKey(),t,e)]}}))}))},s.exportPrivateKey=function(){return o(s,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.getWallet(this._path)];case 1:return[2,t.sent().getPrivateKeyString()]}}))}))},s}return r(e,t),e.prototype.buildSerializedTx=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,this.getWallet(this._path)];case 1:return e=n.sent(),[2,c.signTx(a.seed2Sk(e.getPrivateKey(),1),t)]}}))}))},e.prototype.getSK=function(){return o(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.getWallet(this._path)];case 1:return t=e.sent(),[2,a.seed2Sk(t.getPrivateKey(),1)]}}))}))},e}(s.WrappedWallet);e.SeroWallet=h},49595:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TronWallet=void 0;var u=n(20116),a=n(92037),s=n(9116),c=n(39082),f="https://api.trongrid.io/",l=n(98841),h=l.providers.HttpProvider,d=new l(new h(f),new h(f),new h(f)),p=n(19076),y=function(t){function e(e,n,r){var u=t.call(this,e,n,r)||this;return u._path=s.default.BIP44_PATH.TRON,u.getAddressAsync=function(){return o(u,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,this.getWallet(this._path)];case 1:return t=e.sent(),[2,a.getBase58CheckAddress(a.getAddressFromPriKey(t.getPrivateKey()))]}}))}))},u.personSignMessage=function(t){return o(u,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,this.getWallet(this._path)];case 1:return e=n.sent(),e=a.signBytes(e.getPrivateKey(),t),[2,new p(e).toString("hex")]}}))}))},u.signTypedMessage=function(t,e){return o(u,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,this.getWallet(this._path)];case 1:return n=r.sent(),[2,c.signTypedMessage(n.getPrivateKey(),t,e)]}}))}))},u.exportPrivateKey=function(){return o(u,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.getWallet(this._path)];case 1:return[2,t.sent().getPrivateKeyString()]}}))}))},u}return r(e,t),e.prototype.buildSerializedTx=function(t,e,n){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.getWallet(this._path)];case 1:return e=n.sent(),[4,d.trx.sign(t,e.getPrivateKeyString().slice(2))];case 2:return[2,n.sent()];case 3:return e=n.sent(),console.error(e),[3,4];case 4:return[2,""]}}))}))},e}(u.WrappedWallet);e.TronWallet=y},20116:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(a){u=[6,a],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedWallet=e.walletEx=e.accountKeyManager=void 0;var u=n(49481),a=n(79195),s=n(6438),c=n(8074),f=n(24778),l=n(43786),h=n(82197);e.accountKeyManager=new function(){var t=this;this.getAccountKey=function(){return o(t,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,c.keyStoreCollection.find({address:this._account_key})];case 1:return(t=e.sent())&&0!=t.length&&t[0]?[2,{accountId:t[0].accountId,key:t[0].keystore}]:[2,null]}}))}))},this.setAccountKey=function(e,n){return o(t,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,c.keyStoreCollection.find({address:this._account_key})];case 1:return(t=r.sent())&&0<t.length?[2,Promise.reject("Account key has set")]:(t={address:this._account_key,accountId:e,chainType:u.ChainType.EMIT,keystore:n},[4,c.keyStoreCollection.insert(t)]);case 2:return r.sent(),[2,!0]}}))}))},this.removeAccountKey=function(){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,c.keyStoreCollection.delete(this._account_key)];case 1:return t.sent(),[4,c.keyStoreCollection.delete(this._password_key)];case 2:return t.sent(),[2]}}))}))},this.getPasswordKey=function(){return o(t,void 0,void 0,(function(){var t,e;return i(this,(function(n){switch(n.label){case 0:return[4,c.keyStoreCollection.find({address:this._password_key})];case 1:return(t=n.sent())&&0!=t.length&&t[0]?(e=t[0])&&(!e.timestamp||e.timestamp<Math.floor(Date.now()/1e3)-1800)?[4,this.removePasswordKey()]:[3,3]:[2,null];case 2:return n.sent(),[2,null];case 3:return[4,this.setPasswordKeyTimestamp()];case 4:return n.sent(),[2,t[0].accountId]}}))}))},this.setPasswordKey=function(e){return o(t,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,c.keyStoreCollection.find({address:this._password_key})];case 1:return(t=n.sent())&&0<t.length?[2,Promise.resolve(!0)]:(t={address:this._password_key,accountId:e,chainType:u.ChainType.EMIT,keystore:null,timestamp:Math.floor(Date.now()/1e3)},[4,c.keyStoreCollection.insert(t)]);case 2:return n.sent(),[2]}}))}))},this.setPasswordKeyTimestamp=function(){return o(t,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,c.keyStoreCollection.find({address:this._password_key})];case 1:return(t=e.sent())&&0<t.length?((t=t[0]).timestamp=Math.floor(Date.now()/1e3),[4,c.keyStoreCollection.update(t)]):[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},this.removePasswordKey=function(){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,c.keyStoreCollection.delete(this._password_key)];case 1:return t.sent(),[2]}}))}))},this._account_key="emit-account-key",this._password_key="emit-password-key"};var d=new(function(){function t(){var t=this;this._genRandomPwdKey=function(t,e){return h.SHA256([t,e].join("")).toString()},this._getPwdKey=function(){return o(t,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,e.accountKeyManager.getPasswordKey()];case 1:return(t=n.sent())?[2,t]:[2,Promise.reject("Account locked!")]}}))}))},this.lock=function(){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,e.accountKeyManager.removePasswordKey()];case 1:return t.sent(),[2]}}))}))},this.isLocked=function(){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,e.accountKeyManager.getPasswordKey()];case 1:return[2,!t.sent()]}}))}))},this._mainAccount=function(n){return o(t,void 0,void 0,(function(){var t,r,o,u,a,s;return i(this,(function(i){switch(i.label){case 0:return[4,e.accountKeyManager.getAccountKey()];case 1:return(t=i.sent())?[3,13]:n?[4,c.accountCollection.find({accountId:n})]:[3,11];case 2:return(r=i.sent())&&0<r.length?(o=r[0],[4,e.accountKeyManager.setAccountKey(o.accountId,o.key)]):[3,10];case 3:return i.sent(),[4,c.accountCollection.findAll()];case 4:a=i.sent(),u=0,i.label=5;case 5:return u<a.length?(s=a[u]).accountId==n?[3,8]:[4,c.accountCollection.delete({accountId:s.accountId})]:[3,9];case 6:return i.sent(),[4,c.keyStoreCollection.delete({accountId:s.accountId})];case 7:i.sent(),i.label=8;case 8:return u++,[3,5];case 9:return[2,{accountId:o.accountId,key:o.key}];case 10:return[3,12];case 11:return[2,Promise.reject("Main account not exist!")];case 12:return[3,14];case 13:return[2,t];case 14:return[2]}}))}))},this._getPkey=function(e,n){return o(t,void 0,void 0,(function(){var t,r;return i(this,(function(o){switch(o.label){case 0:return e?[3,2]:[4,this._getPwdKey()];case 1:return t=o.sent(),[3,5];case 2:return n?(t=this._genRandomPwdKey(e,n),[3,5]):[3,3];case 3:return[4,this._mainAccount()];case 4:r=o.sent(),t=this._genRandomPwdKey(e,r.accountId),o.label=5;case 5:return t?[2,t]:[2,Promise.reject("Account is unlock")]}}))}))}}return t.prototype._decodeAccountKey=function(t,e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){return(n=f.Decrypt(t,e))&&n.key?[2,Promise.resolve(n.key)]:[2,Promise.reject("Invalid Password!")]}))}))},t.prototype.encodeAccountKey=function(t,e,n){return o(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return r="",n?[3,2]:[4,this._getPwdKey()];case 1:case 3:return r=i.sent(),[3,5];case 2:return i.trys.push([2,4,,5]),[4,this._getPkey(n,e)];case 4:return-1<("string"==typeof(o=i.sent())?o:o.message).indexOf("Main account not exist")?(r=this._genRandomPwdKey(n,e),[3,5]):[2,Promise.reject(o)];case 5:return r?[2,f.Encrypt({key:t},r)]:[2,Promise.reject("Account is unlock")]}}))}))},t.prototype.unLock=function(t,n){return o(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,this._mainAccount(n)];case 1:return r=i.sent(),[4,this._getPkey(t)];case 2:return o=i.sent(),r&&r.key?[4,this._decodeAccountKey(r.key,o)]:[3,5];case 3:return i.sent(),[4,e.accountKeyManager.setPasswordKey(o)];case 4:return i.sent(),[2,Promise.resolve(!0)];case 5:return[2,Promise.reject("Account key is nil !")]}}))}))},t.prototype.checkPassword=function(t){return o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return[4,this._mainAccount()];case 1:return e=r.sent(),n=this._genRandomPwdKey(t,e.accountId),e&&e.key?[4,this._decodeAccountKey(e.key,n)]:[3,3];case 2:return r.sent(),[2,Promise.resolve(!0)];case 3:return[2,Promise.reject("Account key is nil !")]}}))}))},t.prototype.decodeAccountKey=function(t,e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,this._getPkey(e)];case 1:return n=r.sent(),[4,this._decodeAccountKey(t,n)];case 2:return[2,r.sent()]}}))}))},t}());e.walletEx=d;var p=function(t){function e(e,n,r){var u=t.call(this,n,r)||this;return u._accountKey="",u.getWallet=function(t){return o(u,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return[4,d.decodeAccountKey(this._accountKey)];case 1:return(e=r.sent())?e&&12==e.split(" ").length?(n=l.mnemonicToSeedSync(e),[2,(n=s.hdkey.fromMasterSeed(n)).derivePath(t).getWallet()]):[2,s.default.fromPrivateKey(a.toBuffer(e))]:[2,Promise.reject("Wallet is not unlock !")]}}))}))},u._accountKey=e,u}return r(e,t),e}(s.default);e.WrappedWallet=p},91784:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(34155),i=n(72509),u=new Map([[0,255],[1,1],[2,3],[3,7],[4,15],[5,31],[6,63],[7,127]]),a=function(){function t(t,e,n){var i=(e=e||0)+(n=n||8*t.length),a=Math.ceil(i/8);o(t.length>=a),this.bitsLen=n,this.rightBits=e%8,this.buf=r.from(t.slice(Math.floor(e/8),Math.floor((i-1)/8)+1)),this.buf[this.buf.length-1]&=u.get(i%8)}return t.prototype.toBigNumber=function(){return new i(this.buf,"le").shrn(this.rightBits)},t.prototype.bitsLength=function(){return this.bitsLen},t.from=function(e,n,r){return new t(e.buf,n+e.rightBits,r)},t}();e.BitBuffer=a},739:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(70944),i=n(22622),u=n(34155),a=n(31603),s=n(37644);function c(t){return a.blake2b("SZK$DSA$HASH2",t)}function f(t){return new s(t)}e.sign=function(t,e,n){var i=r.concat([f(32),e.toBuffer(),t]),u=new o.FR(function(t){return a.blake2b("SZK$DSA$HASH1",t)}(i)),s=n.mult(u);if(s&&!s.isZero()){var l=n.mult(e);if(l){var h=r.concat([s.toBuffer(),l.toBuffer(),t]),d=new o.FR(c(h)),p=u.add(e.mul(d));return r.concat([s.toBuffer(),p.toBuffer()])}}},e.verify=function(t,e,n,a){if(u(64==e.length,"sign.length != 64"),n.isZero())return!1;var s=i.Point.bufferTo(e.slice(0,32));if(!s||s.isZero()||!s.isValid())return!1;var f=new o.FR(e.slice(32,64));if(f.isZero())return!1;var l=a.mult(f);if(l.isZero()||!l.isValid())return!1;var h=r.concat([s.toBuffer(),n.toBuffer(),t]),d=new o.FR(c(h)),p=n.mult(d),y=s.add(p);return!!l.isEqualTo(y)}},31912:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(22622),i=n(70944),u=n(34155),a=n(31603),s=n(37644);function c(t){return a.blake2b("SZK$DSAN$HASH2",t)}function f(t){return new s(t)}e.sign=function(t,e,n,o){var u=r.concat([f(32),e.toBuffer(),t]),s=new i.FR(function(t){return a.blake2b("SZK$DSAN$HASH1",t)}(u)),l=n.mult(s);if(l&&!l.isZero()&&l.isValid()){var h=o.mult(s);if(h&&!h.isZero()&&h.isValid()){var d=n.mult(e);if(d&&!d.isZero()&&d.isValid()){var p=o.mult(e);if(p&&!p.isZero()&&p.isValid()){var y=r.concat([l.toBuffer(),h.toBuffer(),d.toBuffer(),p.toBuffer(),t]),v=new i.FR(c(y)),g=s.add(e.mul(v));return r.concat([g.toBuffer(),l.toBuffer(),h.toBuffer()])}}}}},e.verify=function(t,e,n,a,s,f){if(u(96==e.length,"sign.length != 96"),!n||n.isZero()||!n.isValid())return!1;if(!a||a.isZero()||!a.isValid())return!1;var l=new i.FR(e.slice(0,32)),h=o.Point.bufferTo(e.slice(32,64)),d=o.Point.bufferTo(e.slice(64,96));if(!l||l.isZero())return!1;if(!h||h.isZero()||!h.isValid())return!1;if(!d||d.isZero()||!d.isValid())return!1;var p=s.mult(l);if(!p||p.isZero()||!p.isValid())return!1;var y=f.mult(l);if(!y||y.isZero()||!y.isValid())return!1;var v=r.concat([h.toBuffer(),d.toBuffer(),n.toBuffer(),a.toBuffer(),t]),g=new i.FR(c(v)),_=n.mult(g),w=h.add(_);if(!p.isEqualTo(w))return!1;var m=a.mult(g),b=d.add(m);return!!y.isEqualTo(b)}},70944:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(72509),i=n(15578),u=n(79195),a=n(73664),s=function(){function t(e){if(e instanceof t)this.n=e.n;else if(e instanceof o){var n=e;n.red?this.n=n:this.n=n.toRed(t.red)}else this.n=new o(e,"le").toRed(t.red)}return t.toFQ=function(e){return e instanceof t?e:new t(e)},t.prototype.add=function(e){return new t(this.n.redAdd(t.toFQ(e).n))},t.prototype.mul=function(e){return new t(this.n.redMul(t.toFQ(e).n))},t.prototype.sub=function(e){return new t(this.n.redSub(t.toFQ(e).n))},t.prototype.div=function(e){return new t(this.n.redMul(t.toFQ(e).n.redInvm()))},t.prototype.squared=function(){return new t(this.n.redSqr())},t.prototype.sqrt=function(){try{var e=this.n.redSqrt();return e?new t(e):void 0}catch(e){return}},t.prototype.pow=function(e){return new t(this.n.redPow(new o(e)))},t.prototype.nega=function(){return new t(this.n.redNeg())},t.prototype.inverse=function(){return new t(this.n.redInvm())},t.prototype.isOdd=function(){return this.n.fromRed().isOdd()},t.prototype.isZero=function(){return this.n.fromRed().isZero()},t.prototype.toBuffer=function(){return this.n.fromRed().toArrayLike(r,"le",32)},t.prototype.toBN=function(){return this.n.fromRed()},t.prototype.equal=function(t){return this.n.eq(t.n)},t.prototype.toString=function(t){return this.n.fromRed().toString(t)},t.red=o.mont(i.default.FQ_MODULUS),t.ONE=new t(1),t.ZERO=new t(0),t}();e.FQ=s;var c=function(){function t(e){if(e instanceof t)this.n=e.n;else if(e instanceof o){var n=e;n.red?this.n=n:this.n=n.toRed(t.red)}else this.n="number"==typeof e?new o(e).toRed(t.red):new o(e,"le").toRed(t.red)}return t.toFR=function(e){return e instanceof t?e:new t(e)},t.prototype.add=function(e){return new t(this.n.redAdd(t.toFR(e).n))},t.prototype.mul=function(e){return new t(this.n.redMul(t.toFR(e).n))},t.prototype.sub=function(e){return new t(this.n.redSub(t.toFR(e).n))},t.prototype.div=function(e){return new t(this.n.redMul(t.toFR(e).n.redInvm()))},t.prototype.squared=function(){return new t(this.n.redSqr())},t.prototype.sqrt=function(){try{var e=this.n.redSqrt();return e?new t(e):void 0}catch(e){return}},t.prototype.pow=function(e){return new t(this.n.redPow(new o(e)))},t.prototype.nega=function(){return new t(this.n.redNeg())},t.prototype.inverse=function(){return new t(this.n.redInvm())},t.prototype.isOdd=function(){return this.n.fromRed().isOdd()},t.prototype.isZero=function(){return this.n.fromRed().isZero()},t.prototype.toBuffer=function(){return this.n.fromRed().toArrayLike(r,"le",32)},t.prototype.toBN=function(){return this.n.fromRed()},t.prototype.equal=function(t){return this.n.eq(t.n)},t.prototype.toString=function(t){return this.n.fromRed().toString(t)},t.red=o.mont(i.default.FR_MODULUS),t.ONE=new t(1),t.ZERO=new t(0),t}();function f(t){if(t instanceof c)return t;var e=u.toBuffer(t);return new c(e)}e.FR=c,e.newFR=f,e.randomFR=function(){return f(a.randomBytes(32))}},23563:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(15578),i=n(22622),u=n(70944),a=n(31603),s=n(73664),c=n(34155),f=new u.FR(8);function l(t,e){var n=r.concat([o.default.CRS,e]),u=a.blake2b(t,n),s=i.Point.bufferTo(u);if(s){var c=s.mult(f);if(!c.isEqualTo(i.Point.ZERO))return c}}function h(t,e){c(t.length<=16&&32==e.length);for(var n=r.from(e),o=0;;o++){n[31]+=o;var i=l(t,n);if(i)return i;if(256<o)return}}e.findPoint=h,e.randomPt=function(){for(;;){var t=h("randomPT",s.randomBytes(32));if(t)return t}}},80651:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(22622),i=n(53006),u=n(70944),a=n(34155),s=new u.FR(8);function c(t,e){var n=i.blake2s(t,e);n[31]&=159;var r=o.Point.bufferTo(n);return r&&!r.isZero()&&r.isValid()?r.mult(s):void 0}e.findPoint=function(t,e){a(t.length<=8&&64==e.length);for(var n=r.from(e),o=0;o<256;o++){n[63]=o;var i=c(t,n);if(i)return i}}},66627:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(23563),i=n(70944),u=n(91784),a=n(72509),s=n(34155),c=n(22622),f=function(){function t(t,e,n,r){this.personal=t,this.SegNum=e,this.SegBitsNum=n,this.Bits=r,this.indexPoints=new Map,this.points=new Map,this.init()}return t.prototype.init=function(){for(var t=new a(2).pow(new a(this.Bits)),e=Math.ceil(this.SegBitsNum/this.Bits),n=new i.FR(t),u=0;u<this.SegNum;u++){var c=o.findPoint(this.personal,new a(u).toArrayLike(r,"le",32));c||s(!1,"findPoint error"),this.points.set(u,c);for(var f=new Map,l=0;l<e;l++)for(var h=0;h<t.toNumber();h++){var d=new a(h).shln(this.Bits*l),p=d.toString(),y=void 0;if(0<l){var v=d.shrn(this.Bits).toString();y=f.get(v).mult(n)}else y=c.mult(new i.FR(d));f.set(p,y)}this.indexPoints.set(u,f)}},t.prototype.mult=function(t){if(t instanceof i.FR){var e=t.toBuffer();return this.mult(new u.BitBuffer(e,0,256))}var n=t;n.bitsLength()>this.SegNum*this.SegBitsNum&&s(!1,"bigBuffer.length > SegNum * SegBitsNum");for(var r=Math.ceil(this.SegBitsNum/this.Bits),o=Math.ceil(n.bitsLength()/this.SegBitsNum),a=c.Point.ZERO,f=0;f<o;f++){var l=u.BitBuffer.from(n,f*this.SegBitsNum,this.SegBitsNum),h=this.indexPoints.get(f);h||s(!1);for(var d=0;d<r;d++){var p=u.BitBuffer.from(l,this.Bits*d,this.Bits).toBigNumber().shln(this.Bits*d);a=a.add(h.get(p.toString()))}}return a},t}();e.Group=f},15578:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(72509),i=new o("21888242871839275222246405745257275088548364400416034343698204186575808495617"),u=new o("2736030358979909402780800718157159386076813972158567259200215660948447373041"),a={ECC_A:new o("168700"),ECC_D:new o("168696"),FQ_MODULUS:i,FR_MODULUS:u,CRS:r.from("096b36a5804bfacef1691e173c366a47ff5ba84a44f26ddd7e8d9f79d5b42df0","hex").reverse()};e.default=a},22622:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(70944),i=n(15578),u=n(34155),a=n(79195),s=function(){function t(t,e){this.x=new o.FQ(t),this.y=new o.FQ(e)}return t.prototype.isValid=function(){var e=this.x.mul(this.x),n=this.y.mul(this.y),r=t.ECC_A.mul(e).add(n),i=o.FQ.ONE.add(t.ECC_D.mul(e).mul(n));return r.equal(i)},t.prototype.isZero=function(){return this.x.equal(o.FQ.ZERO)&&this.y.equal(o.FQ.ONE)},t.prototype.isEqualTo=function(t){return!(!this.x.equal(t.x)||!this.y.equal(t.y))},t.prototype.toBuffer=function(){var t=this.y.toBuffer();return this.x.isOdd()&&(t[31]|=128),t},t.prototype.toPoint=function(){return new c(this.x,this.y,o.FQ.ONE)},t.prototype.toString=function(t){return"OriPoint[ x: "+this.x.toString(t)+", y : "+this.y.toString(t)+"]"},t.bufferTo=function(e){var n=a.toBuffer(e);u(32==n.length);var i=n[31]>>7&1,s=r.from(n);s[31]&=-129;var c=new o.FQ(s),f=c.mul(c),l=t.ECC_D.mul(f),h=f.sub(o.FQ.ONE).mul(l.sub(t.ECC_A).inverse()).sqrt();if(h){var d=h;return h.isOdd()!==(0!=i)&&(d=o.FQ.ZERO.sub(h)),new t(d,c)}},t.ECC_A=new o.FQ(i.default.ECC_A),t.ECC_D=new o.FQ(i.default.ECC_D),t.ZERO=new t(o.FQ.ZERO,o.FQ.ONE),t}(),c=function(){function t(t,e,n){this.x=new o.FQ(t),this.y=new o.FQ(e),this.z=new o.FQ(n)}return t.prototype.toOriPoint=function(){var t=this.z.inverse();return new s(this.x.mul(t),this.y.mul(t))},t.prototype.add=function(e){var n=this.x,r=this.y,i=this.z,u=e.x,a=e.y,c=e.z,f=n.mul(u),l=r.mul(a),h=s.ECC_D.mul(f).mul(l);if(i.equal(o.FQ.ONE)&&c.equal(o.FQ.ONE))return new t(o.FQ.ONE.sub(h).mul(n.add(r).mul(u.add(a)).sub(f).sub(l)),o.FQ.ONE.add(h).mul(l.sub(s.ECC_A.mul(f))),o.FQ.ONE.sub(h.squared()));if(c.equal(o.FQ.ONE)){var d=(y=i.squared()).sub(h),p=y.add(h);return new t(i.mul(d).mul(n.add(r).mul(u.add(a)).sub(f).sub(l)),i.mul(p).mul(l.sub(s.ECC_A.mul(f))),d.mul(p))}var y,v=i.mul(c);return d=(y=v.squared()).sub(h),p=y.add(h),new t(v.mul(d).mul(n.add(r).mul(u.add(a)).sub(f).sub(l)),v.mul(p).mul(l.sub(s.ECC_A.mul(f))),d.mul(p))},t.prototype.double=function(){var e=this.x.add(this.y).squared(),n=this.x.squared(),r=this.y.squared(),i=s.ECC_A.mul(n),u=i.add(r);if(this.z.equal(o.FQ.ONE))return new t(e.sub(n).sub(r).mul(u.sub(2)),u.mul(i.sub(r)),u.squared().sub(u.mul(2)));var a=this.z.squared(),c=u.sub(a.mul(2));return new t(e.sub(n).sub(r).mul(c),u.mul(i.sub(r)),u.mul(c))},t.prototype.mult=function(e){for(var n=e.toBN(),r=this,o=t.ZERO;!n.isZero()&&(n.testn(0)&&(o=o.add(r)),!(n=n.shrn(1)).isZero());)r=r.double();return o},t.prototype.isValid=function(){var t=this.x.mul(this.x),e=this.y.mul(this.y),n=this.z.mul(this.z),r=s.ECC_A.mul(t),o=n.mul(n),i=s.ECC_D.mul(t).mul(e),u=n.mul(r.add(e)),a=o.add(i);return!!u.equal(a)},t.prototype.isEqualTo=function(t){return!(!this.x.mul(t.z).equal(this.z.mul(t.x))||!this.y.mul(t.z).equal(this.z.mul(t.y)))},t.prototype.isZero=function(){return this.isEqualTo(s.ZERO.toPoint())},t.prototype.toBuffer=function(){return this.toOriPoint().toBuffer()},t.prototype.toHex=function(){return this.toBuffer().reverse().toString("hex")},t.prototype.toString=function(){return"0x"+this.toBuffer().toString("hex")},t.bufferTo=function(t){var e=s.bufferTo(t);return e?e.toPoint():void 0},t.ZERO=new t(new o.FQ(0),new o.FQ(1),new o.FQ(1)),t}();e.Point=c,e.newPoint=function(t){return t instanceof c?t:c.bufferTo(t)}},37383:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n,r){this.input=new Uint32Array(16),this.input[0]=1634760805,this.input[1]=857760878,this.input[2]=2036477234,this.input[3]=1797285236,this.input[4]=t.U8TO32_LE(e,0),this.input[5]=t.U8TO32_LE(e,4),this.input[6]=t.U8TO32_LE(e,8),this.input[7]=t.U8TO32_LE(e,12),this.input[8]=t.U8TO32_LE(e,16),this.input[9]=t.U8TO32_LE(e,20),this.input[10]=t.U8TO32_LE(e,24),this.input[11]=t.U8TO32_LE(e,28),12==n.length?(this.input[12]=r,this.input[13]=t.U8TO32_LE(n,0),this.input[14]=t.U8TO32_LE(n,4),this.input[15]=t.U8TO32_LE(n,8)):(this.input[12]=r,this.input[13]=0,this.input[14]=t.U8TO32_LE(n,0),this.input[15]=t.U8TO32_LE(n,4))}return t.prototype.encrypt=function(e,n){console.assert(e.length==n.length);for(var r,o=new Uint32Array(16),i=new Uint8Array(64),u=0,a=0,s=e.length;0<s;){for(r=16;r--;)o[r]=this.input[r];for(r=20;0<r;r-=2)this.quarterRound(o,0,4,8,12),this.quarterRound(o,1,5,9,13),this.quarterRound(o,2,6,10,14),this.quarterRound(o,3,7,11,15),this.quarterRound(o,0,5,10,15),this.quarterRound(o,1,6,11,12),this.quarterRound(o,2,7,8,13),this.quarterRound(o,3,4,9,14);for(r=16;r--;)o[r]+=this.input[r];for(r=16;r--;)t.U32TO8_LE(i,4*r,o[r]);if(this.input[12]+=1,this.input[12]||(this.input[13]+=1),s<=64){for(r=s;r--;)e[r+u]=n[r+a]^i[r];return}for(r=64;r--;)e[r+u]=n[r+a]^i[r];s-=64,a+=64,u+=64}},t.prototype.quarterRound=function(e,n,r,o,i){e[n]+=e[r],e[i]=t.ROTATE(e[i]^e[n],16),e[o]+=e[i],e[r]=t.ROTATE(e[r]^e[o],12),e[n]+=e[r],e[i]=t.ROTATE(e[i]^e[n],8),e[o]+=e[i],e[r]=t.ROTATE(e[r]^e[o],7)},t.U8TO32_LE=function(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},t.U32TO8_LE=function(t,e,n){t[e]=n,n>>>=8,t[e+1]=n,n>>>=8,t[e+2]=n,n>>>=8,t[e+3]=n},t.ROTATE=function(t,e){return t<<e|t>>>32-e},t}(),i=r.alloc(16,0);i.fill(0),e.default=function(t,e){var n=new o(e,i,0),u=r.alloc(t.length);return n.encrypt(u,t),u}},31603:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(91327);e.blake2b=function(t,e){var n=r.alloc(16,0);n.fill(t,0,t.length);var i=o(32,null,null,n).update(e).digest("binary");return r.from(i)}},53006:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(59442);e.blake2s=function(t,e){var n=r.alloc(8,0);n.fill(t,0,t.length);var i=new o(32,{salt:r.alloc(8,0),personalization:n}).update(e).digest();return r.from(i)}},33002:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(48695),o=n(22879),i=n(5843),u=n(94527),a=n(23289),s=n(39831),c=n(94527),f=n(70944),l=n(14367),h=n(79195);e.seed2Sk=function(t,e){return t=h.toBuffer(t),1===e?r.seed2SK(t).toString():2===e?o.seed2SK(t).toString():""},e.sk2Tk=function(t){return t=h.toBuffer(t).slice(0,64),c.IsFlagSet(t)?o.sk2TK(t).toString():r.sk2TK(t).toString()},e.tk2PK=function(t){return t=h.toBuffer(t),c.IsFlagSet(t)?u.tk2PK(t).toString():i.tk2PK(t).toString()},e.PK2PKr=function(t,e){return t=h.toBuffer(t),e=f.newFR(e),c.IsFlagSet(t)?s.pk2PKr(t,e).toString():a.pk2PKr(t,e).toString()},e.isMyPKr=function(t,e){try{return t=h.toBuffer(t),e=h.toBuffer(e),c.IsFlagSet(t)&&c.IsFlagSet(e)?s.isMyPKr(t,e):!c.IsFlagSet(t)&&!c.IsFlagSet(e)&&l.isMyPKr(t,e)}catch(t){return!1}},e.isPKrValid=function(t){try{return t=h.toBuffer(t),c.IsFlagSet(t)?s.isPKrValid(t):a.isPKrValid(t)}catch(t){return!1}}},48695:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(31603),i=n(70944),u=n(22622),a=n(4656),s=n(79195),c=n(34155),f=function(){function t(t,e){this.zsk=i.newFR(t),this.vsk=i.newFR(e)}return t.prototype.isValid=function(){return!this.zsk.isZero()&&!this.vsk.isZero()},t.prototype.toBuffer=function(){var t=r.alloc(64);return t.fill(this.zsk.toBuffer(),0),t.fill(this.vsk.toBuffer(),32),t},t.prototype.toString=function(){return"0x"+this.toBuffer().toString("hex")},t}();function l(t){if(t instanceof f)return t;var e=s.toBuffer(t);return 64<e.length&&(e=e.slice(0,64)),c(64==e.length),new f(new i.FR(e.slice(0,32)),new i.FR(e.slice(32)))}e.SK=f,e.seed2SK=function(t){var e=s.toBuffer(t);c(32==e.length);var n=o.blake2b("LIBZEROZSK",e),r=o.blake2b("LIBZEROVSK",e);return new f(new i.FR(n),new i.FR(r))},e.newSK=l;var h=function(){function t(t,e){this.ZPK=u.newPoint(t),this.vsk=i.newFR(e)}return t.prototype.toBuffer=function(){var t=r.alloc(64);return t.fill(this.ZPK.toBuffer(),0),t.fill(this.vsk.toBuffer(),32),t},t.prototype.isValid=function(){return this.ZPK.isValid()&&!this.vsk.isZero()},t.prototype.toString=function(){return s.default.bufferToBs58(this.toBuffer())},t.prototype.toHex=function(){return"0x"+this.toBuffer().toString("hex")},t}();e.TK=h,e.newTK=function(t){if(t instanceof h)return t;var e=s.toBuffer(t);64<e.length&&(e=e.slice(0,64)),c(64==e.length);var n=u.Point.bufferTo(e.slice(0,32)),r=new i.FR(e.slice(32));return new h(n,r)},e.sk2TK=function(t){t=l(t);var e=a.accountBase.mult(t.zsk);return new h(e,t.vsk)}},14367:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(22622),i=n(70944),u=n(4656),a=n(31603),s=n(31912),c=n(739),f=n(23289),l=n(79195),h=n(34155),d=n(48695);e.fetchKey=function(t,e){t=d.newTK(t),e=r.from(l.toBuffer(e)),h(32==e.length),64&e[31]&&(e[31]&=-65);var n=o.newPoint(e);if(n){var i=n.mult(t.vsk);return a.blake2b("CZERO.KEYS.KDF",i.toBuffer())}},e.genPKrKey=function(t,e){t=f.newPKr(t),e=i.newFR(e);var n=t.ZPK.mult(e),r=t.VPK.mult(e),o=n.toBuffer(),u=a.blake2b("CZERO.KEYS.KDF",r.toBuffer());return o[31]|=64,{key:u,rpk:o}},e.signByPKr=function(t,e,n){if(e=l.toBuffer(e),t=d.newSK(t),n=f.newPKr(n),h(32==e.length),e&&0!=e.length&&t.isValid()&&n.isValid()){var r=n.BASE.add(u.accountBase.points.get(0));return c.sign(e,t.vsk.mul(t.zsk),r)}},e.verifyByPKr=function(t,e,n){if(t=l.toBuffer(t),e=l.toBuffer(e),n=f.newPKr(n),h(32==t.length),!t||0==t.length||!e||0==e.length||!n.isValid())return!1;var r=n.BASE.add(u.accountBase.points.get(0));return c.verify(t,e,n.VPK,r)},e.genNil=function(t,e){if(t=d.newSK(t),e=o.newPoint(e),t.isValid()&&e.isValid())return e.mult(t.vsk.mul(t.zsk))},e.signNil=function(t,e,n,r){if(t=l.toBuffer(t),e=d.newSK(e),n=f.newPKr(n),r=o.newPoint(r),h(32==t.length),t&&0!=t.length&&e.isValid()&&n.isValid()&&r.isValid()){var i=n.BASE.add(u.accountBase.points.get(0));return s.sign(t,e.vsk.mul(e.zsk),i,r)}},e.verifyNil=function(t,e,n,r,i){if(t=l.toBuffer(t),e=l.toBuffer(e),n=o.newPoint(n),r=f.newPKr(r),i=o.newPoint(i),h(32==t.length),h(96==e.length),!(t&&0!=t.length&&e&&0!=e.length&&r.isValid()&&i.isValid()))return!1;var a=r.BASE.add(u.accountBase.points.get(0));return s.verify(t,e,r.VPK,n,a,i)},e.genTrace=function(t,e){if(t=d.newTK(t),e=o.newPoint(e),t.isValid()&&e.isValid())return e.mult(t.vsk)},e.isMyPKr=function(t,e){if(t=d.newTK(t),e=f.newPKr(e),!t.isValid()||!e.isValid())return!1;var n=e.ZPK.add(t.ZPK.mult(i.FR.ONE.nega())).mult(t.vsk),r=e.VPK.add(t.ZPK.mult(t.vsk.mul(i.FR.ONE.nega())));return n.isEqualTo(r)}},77069:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(31186),i=n(91784),u=n(79195),a=n(23289),s=n(34155),c=n(83498),f=n(70944);e.genOutCm=function(t,e,n,l){if(t=c.newAsset(t),e=u.toBuffer(e),n=f.newFR(n),l=a.newPKr(l),s(64==e.length),t.isValid()&&l.isValid()){var h=o.genAssetCurrency(t.tkn_currency).mult(t.tkn_value);u.default.isEmptyBuffer(t.tkt_value,32)||(h=h.add(o.genAssetTkt(t.tkt_category,t.tkt_value)));var d=r.concat([h.toBuffer(),e,l.VPK.toBuffer(),l.BASE.toBuffer(),n.toBuffer()]);return s(192==d.length,"blob.length != 192,"),o.outCmBase.mult(new i.BitBuffer(d))}}},3467:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(83498),i=n(70944),u=n(37383),a=n(79195),s=n(34155),c=function(){function t(t,e,n){this.asset=o.newAsset(t),this.rsk=i.newFR(e),this.memo=a.toBuffer(n)}return t.prototype.isValid=function(){return!!this.asset.isValid()&&!this.rsk.isZero()},t.prototype.toBuffer=function(){return r.concat([this.asset.toBuffer(),this.rsk.toBuffer(),this.memo])},t.prototype.toString=function(){return"0x"+this.toBuffer().toString("hex")},t}();function f(t){if(t instanceof c)return t;var e=a.toBuffer(t);return s(224==e.length),new c(o.newAsset(e.slice(0,128)),new i.FR(e.slice(128,160)),r.from(e.slice(160,224)))}e.Info=c,e.newInfo=f,e.encInfo=function(t,e){t=a.toBuffer(t),e=f(e),s(32==t.length);var n=e.toBuffer();return u.default(n,t)},e.decEInfo=function(t,e,n){return s(n,"flag must true"),t=a.toBuffer(t),e=a.toBuffer(e),s(224==t.length),s(32==e.length),f(u.default(t,e))}},31186:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(66627),i=n(23563),u=n(31603),a=n(79195),s=n(34155);e.outCmBase=new o.Group("$SROOUTCMGEN",8,192,4),e.genAssetTkt=function(t,e){t=a.toBuffer(t),e=a.toBuffer(e),s(32==t.length),s(32==e.length);var n=r.concat([t,e]),o=i.findPoint("$SROASSETTK",u.blake2b("$SROASSETTK.H",n));if(!o)throw new Error("find point error");return o},e.genAssetCurrency=function(t){t=a.toBuffer(t),s(32==t.length);var e=i.findPoint("$SROASSETCY",t);if(!e)throw new Error("find point error");return e}},5843:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(22622),i=n(79195),u=n(34155),a=n(48695),s=function(){function t(t,e){this.ZPK=o.newPoint(t),this.VPK=o.newPoint(e)}return t.prototype.toBuffer=function(){return r.concat([this.ZPK.toBuffer(),this.VPK.toBuffer()])},t.prototype.toString=function(){return i.default.bufferToBs58(this.toBuffer())},t}();e.PK=s,e.newPK=function(t){if(t instanceof s)return t;var e=i.toBuffer(t);u(64==e.length);var n=o.Point.bufferTo(e.slice(0,32)),r=o.Point.bufferTo(e.slice(32,64));return new s(n,r)},e.tk2PK=function(t){var e=(t=a.newTK(t)).ZPK,n=t.ZPK.mult(t.vsk);return new s(e,n)}},23289:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(22622),i=n(79195),u=n(5843),a=n(70944),s=n(4656),c=n(34155),f=n(79195),l=n(94527),h=function(){function t(t,e,n){this.ZPK=o.newPoint(t),this.VPK=o.newPoint(e),this.BASE=o.newPoint(n),c(this.isValid())}return t.prototype.isValid=function(){return this.ZPK.isValid()&&this.VPK.isValid()&&this.BASE.isValid()},t.prototype.toBuffer=function(){return r.concat([this.ZPK.toBuffer(),this.VPK.toBuffer(),this.BASE.toBuffer()])},t.prototype.toString=function(){return f.default.bufferToBs58(this.toBuffer())},t}();function d(t){if(t instanceof h)return t;var e=i.toBuffer(t);return c(96==e.length),new h(o.newPoint(e.slice(0,32)),o.newPoint(e.slice(32,64)),o.newPoint(e.slice(64,96)))}e.PKr=h,e.newPKr=d,e.isPKrValid=function(t){var e=i.toBuffer(t);return!l.IsFlagSet(e)&&!!d(e).isValid()},e.pk2PKr=function(t,e){t=u.newPK(t),e=a.newFR(e);var n=t.ZPK.mult(e).add(t.ZPK),r=t.VPK.mult(e).add(t.VPK),o=s.accountBase.mult(e);return new h(n,r,o)}},22879:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(31603),i=n(70944),u=n(22622),a=n(4656),s=n(79195),c=n(34155),f=n(94527),l=function(){function t(t,e){this.zsk=i.newFR(t),this.vsk=i.newFR(e)}return t.prototype.isValid=function(){return!this.zsk.isZero()&&!this.vsk.isZero()},t.prototype.toBuffer=function(){var t=r.alloc(64);return t.fill(this.zsk.toBuffer(),0),t.fill(this.vsk.toBuffer(),32),f.SetFlag(t),t},t.prototype.toString=function(){return"0x"+this.toBuffer().toString("hex")},t}();function h(t){if(t instanceof l)return t;var e=s.toBuffer(t);return 64<e.length&&(e=e.slice(0,64)),e=f.ClearFlag(e),c(64==e.length),new l(new i.FR(e.slice(0,32)),new i.FR(e.slice(32)))}e.SK=l,e.seed2SK=function(t){var e=s.toBuffer(t);c(32==e.length);var n=o.blake2b("LIBZEROZSK",e),r=o.blake2b("LIBZEROVSK",e);return new l(new i.FR(n),new i.FR(r))},e.newSK=h;var d=function(){function t(t,e){this.ZPK=u.newPoint(t),this.vsk=i.newFR(e)}return t.prototype.toBuffer=function(){var t=r.alloc(64);return t.fill(this.ZPK.toBuffer(),0),t.fill(this.vsk.toBuffer(),32),f.SetFlag(t),t},t.prototype.isValid=function(){return this.ZPK.isValid()&&!this.vsk.isZero()},t.prototype.toString=function(){return s.default.bufferToBs58(this.toBuffer())},t.prototype.toHex=function(){return"0x"+this.toBuffer().toString("hex")},t}();e.TK=d,e.newTK=function(t){if(t instanceof d)return t;var e=s.toBuffer(t);64<e.length&&(e=e.slice(0,64)),e=f.ClearFlag(e),c(64==e.length);var n=u.Point.bufferTo(e.slice(0,32)),r=new i.FR(e.slice(32));return new d(n,r)},e.sk2TK=function(t){t=h(t);var e=a.accountBase.mult(t.zsk);return new d(e,t.vsk)}},83498:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(70944),i=n(79195),u=n(4656),a=n(34155),s=function(){function t(t,e,n,u){"string"==typeof e&&(e=i.toBN(e).toArrayLike(r,"le",32)),t=i.toBuffer(t),e=o.newFR(e),n=i.toBuffer(n),u=i.toBuffer(u),this.tkn_currency=t,this.tkn_value=e,this.tkt_category=n,this.tkt_value=u}return t.prototype.isValid=function(){return 0==this.tkn_value.toBuffer()[31]&&0==this.tkn_value.toBuffer()[30]},t.prototype.hasTkt=function(){return 0!=r.compare(this.tkt_value,t.tkt_empty)},t.prototype.toBuffer=function(){return r.concat([this.tkn_currency,this.tkn_value.toBuffer(),this.tkt_category,this.tkt_value])},t.prototype.toString=function(){return"0x"+this.toBuffer().toString("hex")},t.tkt_empty=r.alloc(32,0),t}();function c(t){if(t instanceof s)return t;var e=i.toBuffer(t);a(128==e.length);var n=0,r=e.slice(n,32);n+=32;var u=o.newFR(e.slice(n,n+32));n+=32;var c=e.slice(n,n+32);n+=32;var f=e.slice(n,n+32);return new s(r,u,c,f)}function f(t){t=c(t);var e=u.genTknBase(t.tkn_currency).mult(t.tkn_value);if(t.hasTkt()){var n=u.genTktBase(t.tkt_category,t.tkt_value);return e.add(n)}return e}e.Asset=s,e.newAsset=c,e.genAssetCC=f,e.genAssetCM=function(t,e){var n=f(t=c(t));e=o.newFR(e);var r=u.crBase.mult(e);return n.add(r)}},43529:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(83498),i=n(70944),u=n(79195),a=n(37383),s=n(34155),c=function(){function t(t,e,n){this.asset=o.newAsset(t),this.memo=u.toBuffer(e),this.ar=i.newFR(n)}return t.prototype.isValid=function(){return!!this.asset.isValid()&&!this.ar.isZero()},t.prototype.toBuffer=function(){return r.concat([this.asset.toBuffer(),this.memo,this.ar.toBuffer()])},t.prototype.toString=function(){return"0x"+this.toBuffer().toString("hex")},t}();function f(t){if(t instanceof c)return t;var e=u.toBuffer(t);s(224==e.length);var n=0,r=128,a=o.newAsset(e.slice(n,n+r));n+=r,r=64;var f=e.slice(n,n+r);n+=r,r=32;var l=i.newFR(e.slice(n,n+r));return new c(a,f,l)}e.Info=c,e.newInfo=f,e.encInfo=function(t,e){t=u.toBuffer(t);var n=(e=f(e)).toBuffer();return a.default(n,t)},e.decEInfo=function(t,e){return t=u.toBuffer(t),e=u.toBuffer(e),f(a.default(e,t))}},4656:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(66627),i=n(80651),u=n(79195),a=n(34155);e.accountBase=new o.Group("$SROKEYSGEN",1,256,4),e.crBase=new o.Group("SZK$ASSET$CR",1,256,4),e.rootBase=new o.Group("SZK$ROOTCM",10,128,4),e.genTknBase=function(t){t=u.toBuffer(t),a(32==t.length);var e=r.alloc(64,0);e.set(t,0);var n=i.findPoint("SZK$TKN",e);if(!n)throw new Error("find point error");return n},e.genTktBase=function(t,e){t=u.toBuffer(t),e=u.toBuffer(e),a(32==t.length),a(32==e.length);var n=r.concat([t,e]),o=i.findPoint("SZK$TKT",n);if(!o)throw new Error("find point error");return o}},94527:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(22622),i=n(22879),u=n(4656),a=n(34155),s=n(79195),c=n(79195);function f(t){t[t.length-1]|=64}function l(t){var e=r.from(t);return e[t.length-1]&=-65,e}function h(t){return 0!=(64&t[t.length-1])}e.SetFlag=f,e.ClearFlag=l,e.IsFlagSet=h;var d=function(){function t(t,e){this.ZPK=o.newPoint(t),this.VPK=o.newPoint(e)}return t.prototype.toBuffer=function(){var t=r.alloc(64);return t.fill(this.ZPK.toBuffer(),0),t.fill(this.VPK.toBuffer(),32),f(t),t},t.prototype.toHex=function(){return"0x"+this.toBuffer().toString("hex")},t.prototype.toString=function(){return c.default.bufferToBs58(this.toBuffer())},t}();function p(t){if(t instanceof d)return t;var e=l(s.toBuffer(t));a(64==e.length);var n=o.Point.bufferTo(e.slice(0,32));if(n){var r=o.Point.bufferTo(e.slice(32));if(r)return new d(n,r)}}e.PK=d,e.newPK=p,e.tk2PK=function(t){t=i.newTK(t);var e=u.accountBase.mult(t.vsk);return new d(t.ZPK,e)},e.isPKValid=function(t){var e=s.toBuffer(t);return!!h(e)&&!!p(e)}},39831:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(22622),i=n(94527),u=n(70944),a=n(31603),s=n(4656),c=n(22879),f=n(79195),l=n(739),h=n(31912),d=n(79195),p=n(34155),y=n(37383);function v(t){var e=t.toBuffer(),n=a.blake2b("SZK$PKR$HR$Z",e);return new u.FR(n)}function g(t){var e=t.toBuffer(),n=a.blake2b("SZK$PKR$HR$V",e);return new u.FR(n)}function _(t,e,n){var r=s.accountBase.mult(t),o=s.accountBase.mult(e);return{ZPKr:r.add(n.ZPK),VPKr:o.add(n.VPK)}}function w(t){return a.blake2b("SZK$PKR$KDF",t.toBuffer())}e.toHr_Z=v,e.toHr_V=g;var m=function(){function t(t,e,n){this.i=0,this.ZPKr=o.newPoint(t),this.VPKr=o.newPoint(e),this.BASEr=o.newPoint(n)}return t.prototype.toBuffer=function(){var t=r.alloc(96);return t.fill(this.ZPKr.toBuffer(),0),t.fill(this.VPKr.toBuffer(),32),t.fill(this.BASEr.toBuffer(),64),i.SetFlag(t),t},t.prototype.toString=function(){return d.default.bufferToBs58(this.toBuffer())},t.prototype.toHex=function(){return"0x"+this.toBuffer().toString("hex")},t}();function b(t){var e;if(t instanceof m)e=t;else{var n=void 0;n=t instanceof r?i.ClearFlag(t):i.ClearFlag(f.toBuffer(t)),p(96==n.length);var u=o.Point.bufferTo(n.slice(0,32));if(!u)return;var a=o.Point.bufferTo(n.slice(32,64));if(!a)return;var s=o.Point.bufferTo(n.slice(64));if(!s)return;e=new m(u,a,s)}return e}function S(t,e){return t=b(t),e=c.newTK(e),g(t.BASEr.mult(e.vsk)).add(e.vsk)}e.PKr=m,e.newPKr=b,e.pk2PKr=function(t,e){var n=_(v((t=i.newPK(t)).VPK.mult(e)),g(t.VPK.mult(e)),t),r=s.accountBase.mult(e);return new m(n.ZPKr,n.VPKr,r)},e.isMyPKr=function(t,e){t=c.newTK(t),e=b(e);var n=i.tk2PK(t),r=e.BASEr.mult(t.vsk),o=_(v(r),g(r),n);return!!o.VPKr.isEqualTo(e.VPKr)&&!!o.ZPKr.isEqualTo(e.ZPKr)},e.isPKrValid=function(t){var e=f.toBuffer(t);return!!i.IsFlagSet(e)&&!!b(e)},e.signPKr=function(t,e,n){t=c.newSK(t),n=b(n),e=f.toBuffer(e);var r=v(n.BASEr.mult(t.vsk)).add(t.zsk);return l.sign(e,r,s.accountBase)},e.verifyPKr=function(t,e,n){return t=f.toBuffer(t),e=f.toBuffer(e),n=b(n),l.verify(t,e,n.ZPKr,s.accountBase)},e.genZPKa=function(t,e){return t=b(t),e=u.newFR(e),t.ZPKr.mult(e)},e.signZPKa=function(t,e,n,r){t=f.toBuffer(t),e=c.newSK(e),n=u.newFR(n);var o=v((r=b(r)).BASEr.mult(e.vsk)).add(e.zsk),i=n.mul(o);return l.sign(t,i,s.accountBase)},e.verifyZPKa=function(t,e,n){return t=f.toBuffer(t),e=f.toBuffer(e),n=o.newPoint(n),l.verify(t,e,n,s.accountBase)},e.genNil=function(t,e,n){t=c.newTK(t),e=o.newPoint(e);var r=g((n=b(n)).BASEr.mult(t.vsk)).add(t.vsk),u=e.mult(r).toBuffer();return i.SetFlag(u),u},e.signNil=function(t,e,n,r){t=f.toBuffer(t),e=c.newTK(e),n=o.newPoint(n);var i=g((r=b(r)).BASEr.mult(e.vsk)).add(e.vsk);return h.sign(t,i,s.accountBase,n)},e.verifyNil=function(t,e,n,r,u){t=f.toBuffer(t),e=f.toBuffer(e),n=f.toBuffer(n),n=i.ClearFlag(n),r=o.newPoint(r),u=b(u);var a=o.newPoint(n);return h.verify(t,e,u.VPKr,a,s.accountBase,r)},e.genPKrKey=function(t,e){return t=b(t),e=u.newFR(e),{key:w(t.VPKr.mult(e)),rpk:s.accountBase.mult(e)}},e.fetchRPKKey=function(t,e,n){t=b(t),e=c.newTK(e),n=o.newPoint(n);var r=g(t.BASEr.mult(e.vsk)).add(e.vsk);return w(n.mult(r))},e.fetchVskr=S,e.pkrCrypte=function(t,e,n,r){t=f.toBuffer(t),e=b(e),n=c.newTK(n),r=b(r);var o=S(e,n),i=w(r.VPKr.mult(o));return y.default(t,i)},e.pkrEncrypt=function(t,e){t=f.toBuffer(t),e=b(e);var n=u.randomFR(),o=w(e.VPKr.mult(n)),i=y.default(t,o),a=s.accountBase.mult(n);return r.concat([a.toBuffer(),i])},e.pkrDecrypt=function(t,e,n){var r=(t=f.toBuffer(t)).slice(32,64),i=o.newPoint(t.slice(0,32)),u=S(e=b(e),n=c.newTK(n)),a=w(i.mult(u));return y.default(r,a)}},60056:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22622),o=n(70944),i=n(34155),u=n(4656),a=n(739),s=n(79195);e.Params=function(){this.zin_acms=new Array,this.zin_ars=new Array,this.zout_acms=new Array,this.zout_ars=new Array,this.oin_accs=new Array,this.oout_accs=new Array},e.signBalance=function(t,e){i(32==t.length),i(e.zin_acms.length===e.zin_ars.length),i(e.zout_acms.length===e.zout_ars.length),t=s.toBuffer(t);for(var n=r.Point.ZERO,c=o.FR.ZERO,f=0;f<e.zin_ars.length;f++)n=n.add(r.newPoint(e.zin_acms[f])),c=c.add(o.newFR(e.zin_ars[f]));var l=r.Point.ZERO,h=o.FR.ZERO;for(f=0;f<e.zout_ars.length;f++)l=l.add(r.newPoint(e.zout_acms[f])),h=h.add(o.newFR(e.zout_ars[f]));var d=r.Point.ZERO;for(f=0;f<e.oin_accs.length;f++)d=d.add(r.newPoint(e.oin_accs[f]));var p=r.Point.ZERO;for(f=0;f<e.oout_accs.length;f++)p=p.add(r.newPoint(e.oout_accs[f]));var y=n.add(l.mult(o.FR.ONE.nega())),v=c.add(h.nega());if(!v.isZero()){var g=p.add(d.mult(o.FR.ONE.nega())),_=u.crBase.mult(v);if(g.add(_).isEqualTo(y)){var w=a.sign(t,v,u.crBase);if(w)return{bcr:_,bsign:w}}}},e.verifyBalance=function(t,e,n,c){i(32==t.length),i(64==e.length),t=s.toBuffer(t),e=s.toBuffer(e),c=r.newPoint(c);for(var f=r.Point.ZERO,l=0;l<n.zin_acms.length;l++)f=f.add(r.newPoint(n.zin_acms[l]));var h=r.Point.ZERO;for(l=0;l<n.zout_acms.length;l++)h=h.add(r.newPoint(n.zout_acms[l]));var d=r.Point.ZERO;for(l=0;l<n.oin_accs.length;l++)d=d.add(r.newPoint(n.oin_accs[l]));var p=r.Point.ZERO;for(l=0;l<n.oout_accs.length;l++)p=p.add(r.newPoint(n.oout_accs[l]));var y=f.add(h.mult(o.FR.ONE.nega()));return!!p.add(d.mult(o.FR.ONE.nega())).add(c).isEqualTo(y)&&a.verify(t,e,c,u.crBase)}},77034:function(t,e,n){"use strict";var r=n(3125).Buffer,o=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(72509),a=n(79195),s=function(){function t(t){this.Contract=void 0,this.BuyShare=void 0,this.Contract=t.Contract,this.BuyShare=t.BuyShare}return t.prototype.OutAsset=function(){if(this.Contract)return this.Contract.Asset;if(this.BuyShare){var t={};return t.Tkn={Currency:a.default.cyToHex("SERO"),Value:this.BuyShare.Value},t}return null},t}(),c=function(){function t(){this.state=new Map}return t.prototype.add=function(t,e){var n=this.state.get(t);void 0!==n?this.state.set(t,n.add(e)):this.state.set(t,e)},t.prototype.sub=function(t,e){var n=this.state.get(t);void 0!==n?this.state.set(t,n.sub(e)):this.state.set(t,new u(0).sub(e))},t}(),f=function(){function t(t,e){this.outPlus=t,this.cy=new c,t?this.cy.add(e.Currency,a.default.toBN(e.Value)):this.cy.sub(e.Currency,a.default.toBN(e.Value)),this.tk=new Map}return t.prototype.AddOut=function(t){if(t.Tkn&&(this.outPlus?this.cy.add(t.Tkn.Currency,a.default.toBN(t.Tkn.Value)):this.cy.sub(t.Tkn.Currency,a.default.toBN(t.Tkn.Value))),t.Tkt&&a.default.isNotNull(t.Tkt.Value)&&0<a.default.toBN(t.Tkt.Value).cmp(new u(9)))if(this.tk.has(t.Tkt.Value)){if(this.outPlus)throw new Error('"out tkt duplicate: '+t.Tkt.Value);this.tk.delete(t.Tkt.Value)}else{if(!this.outPlus)throw new Error("out tkt not in ins:"+t.Tkt.Value);this.tk.set(t.Tkt.Value,t.Tkt.Category)}},t.prototype.AddIn=function(t){if(t.Tkn&&(this.outPlus?this.cy.sub(t.Tkn.Currency,a.default.toBN(t.Tkn.Value)):this.cy.add(t.Tkn.Currency,a.default.toBN(t.Tkn.Value))),t.Tkt&&a.default.isNotNull(t.Tkt.Value)&&0<a.default.toBN(t.Tkt.Value).cmp(new u(9)))if(this.tk.has(t.Tkt.Value)){if(!this.outPlus)throw new Error('"in tkt duplicate: '+t.Tkt.Value);this.tk.delete(t.Tkt.Value)}else{if(this.outPlus)throw new Error("out tkt duplicate:"+t.Tkt.Value);this.tk.set(t.Tkt.Value,t.Tkt.Category)}},t.prototype.GetTknList=function(){var t=new Array;return this.cy.state.forEach((function(e,n){e.isZero()||t.push({Currency:n,Value:e.toString(10)})})),t},t.prototype.GetTktList=function(){var t=new Array;return this.tk.forEach((function(e,n){t.push({Category:n,Value:e})})),t},t.prototype.CheckToken=function(){this.cy.state.forEach((function(t,e){if(!t.isZero())throw new Error("currency "+e+" banlance != 0")}))},t.prototype.CheckTicket=function(){if(0<this.tk.size)return new Error("ticket not used")},t}();e.selectUtxos=function(t,e){return o(this,void 0,void 0,(function(){var n,r,o,u,c,l,h,d,p;return i(this,(function(i){switch(i.label){case 0:return n=new f(!0,t.Fee),null!==t.Cmds&&null!==(r=new s(t.Cmds).OutAsset())&&n.AddOut(r),t.Receptions.forEach((function(t){n.AddOut(t.Asset)})),o=new Array,0<n.tk.size?[4,e.findRootsByTicket(t.From,n.tk)]:[3,2];case 1:if(!(u=i.sent())||0!=u.remain.size)return[2,new Promise((function(t,e){e("no enough unlocked utxos")}))];o.push.apply(o,u.utxos),u.utxos.forEach((function(t){n.AddIn(t.Asset)})),i.label=2;case 2:c=n.cy.state.entries(),i.label=3;case 3:return(l=c.next()).done?[3,5]:(h=l.value[0],d=l.value[1],console.log("ck.cy.value>>>> ",h,d),[4,e.findRoots(t.From,a.default.hexToCy(h),d)]);case 4:return p=i.sent(),console.log("result >>>> ",p),p&&(p.remain.isNeg()||p.remain.isZero())?(o.push.apply(o,p.utxos),[3,3]):[2,new Promise((function(t,e){e("no enough unlocked utxos")}))];case 5:return[2,new Promise((function(t){t(o)}))]}}))}))},e.buildTxParam=function(t,e){return o(this,void 0,void 0,(function(){var n,o,u,c,l,h,d,p,y,v,g,_,w;return i(this,(function(i){switch(i.label){case 0:return n=new Array,e.Utxos.forEach((function(t){n.push(t.Root)})),[4,t.getAnchor(n)];case 1:if(null===(o=i.sent()))throw new Error("can not find Anchor by root");if(u=new Array,c=0,l=new f(!1,e.Fee),e.Utxos.forEach((function(t,e){if(null===t.State)throw new Error("can not find out by root");l.AddIn(t.Asset),u.push({SKr:a.toString(r.alloc(96)),Out:{Root:t.Root,State:t.State},Witness:o[e]}),a.default.isNotNull(t.State.OS.Out_O)&&c++})),2500<c)throw new Error("o_ins count > 2500");for(h=new Array,e.Receptions.forEach((function(t){l.AddOut(t.Asset),h.push({PKr:a.toHex(t.Addr),Asset:t.Asset,Memo:a.toString(r.alloc(64))})})),null!==e.Cmds&&null!==(d=new s(e.Cmds).OutAsset())&&l.AddOut(d),p=l.GetTknList(),y=l.GetTktList(),v=Math.max(p.length,y.length),g=0;g<v;g++)_={},g<p.length&&(_.Tkn=p[g]),g<y.length&&(_.Tkt=y[g]),l.AddOut(_),h.push({PKr:a.toHex(e.RefundTo),Asset:_,Memo:a.toString(r.alloc(64))});return l.CheckTicket(),l.CheckToken(),(w={Fee:e.Fee,GasPrice:a.default.toBN(e.GasPrice).toNumber(),From:{PKr:a.toHex(e.RefundTo)}}).Ins=u,w.Outs=h,null!==e.Cmds&&(w.Cmds={},w.Cmds.Contract=e.Cmds.Contract,w.Cmds.BuyShare=e.Cmds.BuyShare),w.Gas=t.getSeroGasLimit("",w.Fee,a.default.toBN(e.GasPrice)),w.Z=!1,[2,new Promise((function(t){t(w)}))]}}))}))}},47141:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(39831),i=n(94527),u=n(14367),a=n(79195),s=n(79195),c=n(60056),f=n(83498),l=n(42243),h=n(43529),d=n(70944),p=n(72509),y=n(33002),v=n(5172),g=n(92824),_=function(){this.hash=r.alloc(32),this.param=new c.Params},w=function(t){this.p0_ins=new Array,this.p_ins=new Array,this.c_ins=new Array,this.c_outs=new Array,this.p_outs=new Array,this.keys=new Array,this.balance_desc=new _,this.s={Desc_O:{},Desc_Z:{},Desc_Pkg:{},Desc_Cmd:{},Tx1:{Ins_P:new Array,Ins_P0:new Array,Ins_C:new Array,Outs_C:new Array,Outs_P:new Array},Bcr:a.toHex(r.alloc(32,0)),Bsign:a.toHex(r.alloc(64,0))},this.param=t};function m(t){var e=r.alloc(32,0),n=r.alloc(32,0),o=r.alloc(32,0),i=r.alloc(32,0);return t.Tkn&&(t.Tkn.Currency&&(e=t.Tkn.Currency),t.Tkn.Value&&(n=a.default.toBN(t.Tkn.Value).toArrayLike(r,"le",32))),t.Tkt&&(t.Tkt.Category&&(o=t.Tkt.Category),t.Tkt.Value&&(i=t.Tkt.Value)),new f.Asset(e,n,o,i)}function b(t){var e=[s.toBuffer(t.Ehash),s.toBuffer(t.From),P(t.Fee)];return e.push(function(t){var e=new Array;return t.Ins&&t.Ins.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.Anchor),s.toBuffer(t.Nil),s.toBuffer(t.Trace),s.toBuffer(t.AssetCM),s.toBuffer(v(t.Proof))]))}(t))})),t.Outs&&t.Outs.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.AssetCM),s.toBuffer(t.OutCM),s.toBuffer(t.EInfo),s.toBuffer(t.PKr),s.toBuffer(v(t.Proof))]))}(t))})),v(r.concat(e))}(t.Desc_Z)),e.push(function(t){var e=new Array;return t.Ins&&t.Ins.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.Root),s.toBuffer(t.Nil),s.toBuffer(t.Sign)]))}(t))})),t.Outs&&t.Outs.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.Addr),k(t.Asset),s.toBuffer(t.Memo)]))}(t))})),v(r.concat(e))}(t.Desc_O)),0<t.Tx1.Ins_P.length+t.Tx1.Ins_P0.length+t.Tx1.Ins_C.length+t.Tx1.Outs_C.length+t.Tx1.Outs_P.length&&e.push(S(t.Tx1)),e.push(A(t.Desc_Pkg)),e.push(s.toBuffer(t.Sign)),e.push(s.toBuffer(t.Bcr)),e.push(s.toBuffer(t.Bsign)),(t.Desc_Cmd.Contract||t.Desc_Cmd.BuyShare)&&e.push(B(t.Desc_Cmd)),v(r.concat(e))}function S(t){var e=new Array;return t.Ins_P0&&t.Ins_P0.forEach((function(t){e.push(function(t){var e=[s.toBuffer(t.Root),s.toBuffer(t.Nil),s.toBuffer(t.Trace)];return t.Key&&e.push(s.toBuffer(t.Key)),e.push(s.toBuffer(t.Sign)),v(r.concat(e))}(t))})),t.Ins_P&&t.Ins_P.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.Root),s.toBuffer(t.Nil),t.Key?s.toBuffer(t.Key):r.alloc(0),s.toBuffer(t.NSign),s.toBuffer(t.ASign)]))}(t))})),t.Ins_C&&t.Ins_C.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.Anchor),s.toBuffer(t.Nil),s.toBuffer(t.AssetCM),s.toBuffer(t.ZPKa),s.toBuffer(t.Sign),s.toBuffer(t.Proof)]))}(t))})),t.Outs_C&&t.Outs_C.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.PKr),s.toBuffer(t.AssetCM),s.toBuffer(t.RPK),s.toBuffer(t.EInfo),s.toBuffer(t.Proof)]))}(t))})),t.Outs_P&&t.Outs_P.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.PKr),k(t.Asset),s.toBuffer(t.Memo)]))}(t))})),v(r.concat(e))}function P(t){return v(r.concat([s.toBuffer(t.Currency),new p(t.Value).toArrayLike(r,"le",32)]))}function k(t){var e=[];return t.Tkn&&e.push(P(t.Tkn)),t.Tkt&&e.push(function(t){return v(r.concat([s.toBuffer(t.Category),s.toBuffer(t.Value)]))}(t.Tkt)),v(r.concat(e))}function B(t){var e=[];return t&&(t.Contract&&e.push(function(t){var e=[k(t.Asset)];return t.To&&e.push(s.toBuffer(t.To)),e.push(s.toBuffer(t.Data)),v(r.concat(e))}(t.Contract)),t.BuyShare&&e.push(function(t){var e=[new p(t.Value).toArrayLike(r),s.toBuffer(t.Vote)];return t.Pool&&e.push(s.toBuffer(t.Pool)),v(r.concat(e))}(t.BuyShare))),v(r.concat(e))}function A(t){return v()}function T(t){return v(r.concat([s.toBuffer(t.Ehash),s.toBuffer(t.From),P(t.Fee)]))}function E(t){var e=new Array;return t.Ins_P0&&t.Ins_P0.forEach((function(t){e.push(function(t){var e=[s.toBuffer(t.Root),s.toBuffer(t.Nil),s.toBuffer(t.Trace)];return t.Key&&e.push(s.toBuffer(t.Key)),v(r.concat(e))}(t))})),t.Ins_P&&t.Ins_P.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.Root),s.toBuffer(t.Nil),t.Key?s.toBuffer(t.Key):r.alloc(0)]))}(t))})),t.Ins_C&&t.Ins_C.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.Anchor),s.toBuffer(t.Nil),s.toBuffer(t.AssetCM),s.toBuffer(t.ZPKa)]))}(t))})),t.Outs_C&&t.Outs_C.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.PKr),s.toBuffer(t.AssetCM),s.toBuffer(t.RPK),s.toBuffer(t.EInfo)]))}(t))})),t.Outs_P&&t.Outs_P.forEach((function(t){e.push(function(t){return v(r.concat([s.toBuffer(t.PKr),k(t.Asset),s.toBuffer(t.Memo)]))}(t))})),v(r.concat(e))}function O(t){return v(r.concat([T(t),B(t.Desc_Cmd),A(t.Desc_Pkg),E(t.Tx1)]))}e.SignTx=function(t){!function(t){var e=t.From.SKr;if(!e)throw new Error("sk is undifined!");if(!function(t,e){return y.isMyPKr(t,e)}(y.sk2Tk(e),t.From.PKr))throw new Error("sk unmatch pkr for the From field");t.Ins.forEach((function(t){var e=y.sk2Tk(t.SKr);if(t.Out.State.OS.Out_O){if(!y.isMyPKr(e,t.Out.State.OS.Out_O.Addr))throw new Error("sk unmatch pkr for the From field")}else if(t.Out.State.OS.Out_Z){if(!y.isMyPKr(e,t.Out.State.OS.Out_Z.PKr))throw new Error("sk unmatch pkr for the From field")}else if(t.Out.State.OS.Out_P){if(!y.isMyPKr(e,t.Out.State.OS.Out_P.PKr))throw new Error("sk unmatch pkr for the From field")}else if(t.Out.State.OS.Out_C&&!y.isMyPKr(e,t.Out.State.OS.Out_C.PKr))throw new Error("sk unmatch pkr for the From field")}))}(t);var e,n,p,_,S=new w(t);return function(t){t.param.Ins.forEach((function(e){e.Out.State.OS.Out_O||e.Out.State.OS.Out_Z?t.p0_ins.push(e):e.Out.State.OS.Out_P?t.p_ins.push(e):e.Out.State.OS.Out_C&&(t.param.Z?t.c_ins.push(e):t.p_ins.push(e))})),t.param.Outs.forEach((function(e){i.IsFlagSet(s.toBuffer(e.PKr))&&t.param.Z?t.c_outs.push(e):t.p_outs.push(e)})),t.s.Ehash=a.toHex(v(g.encode([t.param.GasPrice,t.param.Gas,new Uint8Array(0)])))}(S),function(t){t.s.From=t.param.From.PKr}(S),function(t){t.s.Fee=t.param.Fee;var e=f.genAssetCC(function(t){return new f.Asset(t.Currency,a.default.toBN(t.Value).toArrayLike(r,"le",32),r.alloc(32,0),r.alloc(32,0))}(t.s.Fee));t.balance_desc.param.oout_accs.push(e)}(S),function(t){var e;if(void 0!==t.param.Cmds)if(t.param.Cmds.Contract)t.s.Desc_Cmd.Contract=t.param.Cmds.Contract,e=t.param.Cmds.Contract.Asset;else if(t.param.Cmds.BuyShare){t.s.Desc_Cmd.BuyShare=t.param.Cmds.BuyShare;var n={};n.Tkn={Currency:a.default.cyToHex("SERO"),Value:t.s.Desc_Cmd.BuyShare.Value},e=n}if(e){var r=f.genAssetCC(m(e));t.balance_desc.param.oout_accs.push(r)}}(S),(_=S).p0_ins&&(_.s.Tx1.Ins_P0||(_.s.Tx1.Ins_P0=new Array),_.p0_ins.forEach((function(t){var e=t.SKr,n=y.sk2Tk(e),r={Root:t.Out.Root};if(r.Trace=s.toString(u.genTrace(n,t.Out.State.OS.RootCM)),r.Nil=s.toString(u.genNil(e,t.Out.State.OS.RootCM)),t.Out.State.OS.Out_O)_.balance_desc.param.oin_accs.push(f.genAssetCC(m(t.Out.State.OS.Out_O.Asset)));else{var o=t.Out.State.OS.Out_Z;r.Key=s.toString(u.fetchKey(n,o.RPK));var i=l.confirmOutZ(r.Key,o.EInfo,o.PKr,o.OutCM);if(!i)throw new Error("gen tx1 confirm outz error");_.balance_desc.param.oin_accs.push(f.genAssetCC(m(i.Asset)))}_.s.Tx1.Ins_P0.push(r)}))),(p=S).p_ins.forEach((function(t){var e=t.SKr,n=y.sk2Tk(e),r={Root:t.Out.Root};if(t.Out.State.OS.Out_P){var i=t.Out.State.OS.Out_P;r.Nil=s.toString(o.genNil(n,t.Out.State.OS.RootCM,i.PKr)),p.balance_desc.param.oin_accs.push(f.genAssetCC(m(i.Asset)))}else{var u=t.Out.State.OS.Out_C;r.Nil=s.toString(o.genNil(n,t.Out.State.OS.RootCM,u.PKr));var a=t.Out.State.OS.Out_C;r.Key=s.toString(o.fetchRPKKey(a.PKr,n,a.RPK));var c=l.confirmOutC(r.Key,a.EInfo,a.AssetCM);if(!c)throw new Error("gen tx1 confirm outz error");p.balance_desc.param.oin_accs.push(f.genAssetCC(m(c.Asset)))}p.s.Tx1.Ins_P.push(r)})),(n=S).c_ins.forEach((function(t){var e=t.SKr,i=y.sk2Tk(e),u={Proof:a.toHex(r.alloc(131,0))},c=t.Out.State.OS.Out_C;u.Nil=s.toString(o.genNil(i,t.Out.State.OS.RootCM,c.PKr));var l=o.fetchRPKKey(c.PKr,i,c.RPK);n.keys.push(s.toString(l));var p=h.decEInfo(l,c.EInfo);t.Ar=s.toString(d.randomFR()),u.AssetCM=s.toString(f.genAssetCM(p.asset,t.Ar)),t.A=s.toString(d.randomFR()),u.ZPKa=s.toString(o.genZPKa(c.PKr,t.A)),u.Anchor=t.Witness.Anchor,n.balance_desc.param.zin_acms.push(u.AssetCM),n.balance_desc.param.zin_ars.push(t.Ar),n.s.Tx1.Ins_C.push(u)})),function(t){t.c_outs.forEach((function(e){var n={Proof:a.toHex(r.alloc(131,0))},i=d.randomFR();e.Ar=s.toString(i);var u=m(e.Asset);n.AssetCM=s.toString(f.genAssetCM(u,e.Ar)),n.PKr=e.PKr;var c=o.genPKrKey(e.PKr,d.randomFR()),l=c.key,p=c.rpk;n.RPK=s.toString(p);var y=new h.Info(u,s.toBuffer(e.Memo),i);n.EInfo=s.toString(h.encInfo(l,y)),t.balance_desc.param.zout_acms.push(n.AssetCM),t.balance_desc.param.zout_ars.push(i),t.s.Tx1.Outs_C.push(n)}))}(S),(e=S).p_outs.forEach((function(t){var n={PKr:t.PKr,Asset:t.Asset,Memo:t.Memo},r=s.toString(f.genAssetCC(m(t.Asset)));e.balance_desc.param.oout_accs.push(r),e.s.Tx1.Outs_P.push(n)})),function(t){if(t.balance_desc.hash=O(t.s),!t.param.From.SKr)throw new Error("skr is undefined");if(a.isNewVersion(s.toBuffer(t.s.From))?t.s.Sign=s.toString(o.signPKr(t.param.From.SKr,t.balance_desc.hash,t.s.From)):t.s.Sign=s.toString(u.signByPKr(t.param.From.SKr,t.balance_desc.hash,t.s.From)),t.s.Tx1.Ins_P0&&t.s.Tx1.Ins_P0.forEach((function(e,n){var r,o=t.p0_ins[n];r=o.Out.State.OS.Out_O?o.Out.State.OS.Out_O.Addr:o.Out.State.OS.Out_Z.PKr,t.s.Tx1.Ins_P0[n].Sign=s.toString(u.signNil(t.balance_desc.hash,o.SKr,r,o.Out.State.OS.RootCM))})),t.s.Tx1.Ins_P&&t.s.Tx1.Ins_P.forEach((function(e,n){var r,i=t.p_ins[n];r=i.Out.State.OS.Out_C?i.Out.State.OS.Out_C.PKr:i.Out.State.OS.Out_P.PKr,t.s.Tx1.Ins_P[n].ASign=s.toString(o.signPKr(i.SKr,t.balance_desc.hash,r)),t.s.Tx1.Ins_P[n].NSign=s.toString(o.signNil(t.balance_desc.hash,y.sk2Tk(i.SKr),i.Out.State.OS.RootCM,r))})),t.s.Tx1.Ins_C&&t.s.Tx1.Ins_C.forEach((function(e,n){var r=t.c_ins[n],i=r.Out.State.OS.Out_C;t.s.Tx1.Ins_C[n].Sign=s.toString(o.signZPKa(t.balance_desc.hash,r.SKr,r.A,i.PKr))})),0<t.balance_desc.param.zin_acms.length||0<t.balance_desc.param.zout_acms.length){var e=c.signBalance(t.balance_desc.hash,t.balance_desc.param);e&&(t.s.Bcr=s.toString(e.bcr),t.s.Bsign=s.toString(e.bsign))}}(S),{Gas:a.toHex(t.Gas),GasPrice:"0x"+a.default.toBN(t.GasPrice).toString("hex"),Tx:S.s,Hash:a.toHex(b(S.s))}},e.ToHash=b,e.ToHash_Tx1=S,e.Tx1_Hash=O},20035:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n=n||Promise)((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(77034),u=n(79195),a=n(47141);e.genTxParam=function(t,e,n){return r(this,void 0,void 0,(function(){var r,a;return o(this,(function(o){switch(o.label){case 0:return u.default.isNotNull(t.Receptions)&&500<t.Receptions.length?[2,new Promise((function(t,e){e("receptions count must <= 500")}))]:[4,i.selectUtxos(t,e)];case 1:return r=o.sent(),u.default.isNotNull(t.RefundTo)||(t.RefundTo=e.defaultRefundTo(t.From),u.default.isNotNull(t.RefundTo))?(a={Fee:t.Fee,GasPrice:t.GasPrice,Utxos:r,RefundTo:t.RefundTo,Receptions:t.Receptions,Cmds:t.Cmds},[2,i.buildTxParam(n,a)]):[2,new Promise((function(t,e){e("can not find default refund to")}))]}}))}))},e.signTx=function(t,e){return t="0x"+u.default.padRight(t,192,"0"),e.From.SKr=t,e.Ins.forEach((function(e){e.SKr=t})),a.SignTx(e)}},79195:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(72509),i=n(24697)("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),u=n(46099),a=n(46852),s=n(47717),c=n(59371),f=n(43708),l=n(1509),h=n(34155);function d(t){var e;if(t instanceof r)e=t;else if(g(t))e=r.from(u(t),"hex");else{if(!v(t))return t;e=i.decode(t)}return i.encode(e)}function p(t,e,n){return u(t)+new Array(e-u(t).length+1).join(n||"0")}function y(t,e,n){return new Array(e-u(t).length+1).join(n||"0")+u(t)}function v(t){return/^[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{80,}$/i.test(t)}function g(t){return 0==t.indexOf("0x")&&(t=t.slice(2)),t.length%2==0&&/^(-)?[0-9a-f]*$/i.test(t)}function _(t){var e="";t=(t=(t=(t=(t=a.encode(t)).replace(/^(?:\u0000)*/,"")).split("").reverse().join("")).replace(/^(?:\u0000)*/,"")).split("").reverse().join("");for(var n=0;n<t.length;n++){var r=t.charCodeAt(n).toString(16);e+=r.length<2?"0"+r:r}return"0x"+u(e)}function w(t){if(!function(t){return(f(t)||l(t))&&/^(-)?0x[0-9a-f]*$/i.test(t)}(t))throw new Error("The parameter '"+t+"' must be a valid HEX string.");for(var e="",n=0,r=(t=(t=(t=(t=(t=t.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length,o=0;o<r;o+=2)n=parseInt(t.substr(o,2),16),e+=String.fromCharCode(n);return a.decode(e)}function m(t){return w(t).toUpperCase()}function b(t){try{return s(t)}catch(e){throw new Error(e+' Given value: "'+t+'"')}}function S(t){return h(t),t instanceof r?t:P.isBase58(t)?i.decode(t):g(t)?r.from(u(t),"hex"):r.from(t,"binary")}e.addrToString=d,e.padRight=p,e.padLeft=y,e.hexToCy=m,e.toBN=b,e.isNewVersion=function(t){return 0!=(64&t[t.length-1])},e.toString=function(t){return t?t instanceof r?"0x"+t.toString("hex"):"string"==typeof t?t:"0x"+t.toBuffer().toString("hex"):(h(!1),"")},e.toBuffer=S,e.toHex=function(t){return t instanceof r?"0x"+t.toString("hex"):t instanceof o||"number"==typeof t?"0x"+b(t).toString("hex"):v(t)?"0x"+i.decode(t).toString("hex"):g(t)?"0x"+u(t):_(t)};var P={isBase58:v,bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return"0x"+e.join("")},hexToBytes:function(t){var e=r.from(u(t),"hex");return new Uint8Array(e)},utf8ToHex:_,bs58ToHex:function(t){return"0x"+i.decode(t).toString("hex")},bytesToBase58:function(t){return i.encode(t.buffer)},padLeft:y,padRight:p,bufferToHex:function(t){return"0x"+t.toString("hex")},cyToHex:function(t){return"0x"+y(_(t.toUpperCase()),64,"0")},hexToBN:function(t){return b(u(t))},hexToCy:m,toBN:b,isNotNull:function(t){return!c(t)&&void 0!==t},toBuffer:S,bufferToBN:function(t){return new o(t,"le")},isEmptyBuffer:function(t,e){return void 0===e&&(e=32),0==t.length||0==r.alloc(e).compare(t)},bufferToBs58:function(t){return i.encode(t)},addrToString:d};e.default=P},42243:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(79195),i=n(39831),u=n(83498),a=n(14367),s=n(77069),c=n(3467),f=n(43529),l=n(23289);e.decOut=function(t,e){var n=new Array;return e.forEach((function(e){var r,u={},s=!1;u.Nils=new Array;var c=e.State.OS;if(c.Out_O)u.Asset=d(c.Out_O.Asset),u.Memo=c.Out_O.Memo,u.Nils.push(e.Root),u.Nils.push(o.toString(a.genTrace(t,c.RootCM))),r=c.Out_O.Addr;else if(c.Out_Z)null!==(l=p(o.toString(a.fetchKey(t,c.Out_Z.RPK)),c.Out_Z.EInfo,c.Out_Z.PKr,c.Out_Z.OutCM))&&(u.Asset=l.Asset,u.Memo=l.Memo,u.Nils.push(o.toString(a.genTrace(t,c.RootCM))),r=c.Out_Z.PKr,s=!0);else if(c.Out_P){var f=o.toString(i.genNil(t,c.RootCM,c.Out_P.PKr));u.Asset=d(c.Out_P.Asset),u.Memo=c.Out_P.Memo,u.Nils.push(f),r=c.Out_P.PKr}else{if(!c.Out_C)throw new Error("invalid out type");var l;null!==(l=y(o.toString(i.fetchRPKKey(c.Out_C.PKr,t,c.Out_C.RPK)),c.Out_C.EInfo,c.Out_C.AssetCM))&&(u.Asset=l.Asset,u.Memo=l.Memo,u.Nils.push(o.toString(i.genNil(t,c.RootCM,c.Out_C.PKr))),r=c.Out_C.PKr,s=!0)}if(r){var h={};h.Root=e.Root,h.State=e.State,h.Pkr=o.default.addrToString(r),h.Asset=u.Asset,h.Num=e.State.Num,h.Memo=u.Memo,h.Nils=u.Nils,h.IsZ=s,h.TxHash=e.State.TxHash,n.push(h)}})),n};var h=r.alloc(32,0);function d(t){var e={};return t instanceof u.Asset?(0!=r.compare(t.tkn_currency,h)&&(e.Tkn={Currency:o.toString(t.tkn_currency),Value:o.default.bufferToBN(t.tkn_value.toBuffer()).toString()}),0!=r.compare(t.tkt_value,h)&&(e.Tkt={Category:o.toString(t.tkt_category),Value:o.toString(t.tkt_value)})):(t.Tkn&&0!==r.compare(o.toBuffer(t.Tkn.Currency),h)&&(e.Tkn={Currency:t.Tkn.Currency,Value:o.default.toBN(t.Tkn.Value).toString(10)}),t.Tkt&&0!=r.compare(o.toBuffer(t.Tkt.Value),h)&&(e.Tkt={Category:t.Tkt.Category,Value:t.Tkt.Value})),e}function p(t,e,n,r){t=o.toBuffer(t),e=o.toBuffer(e),n=l.newPKr(n),r=o.toBuffer(r);var i=c.decEInfo(e,t,!0),u=s.genOutCm(i.asset,i.memo,i.rsk,n);return u?0!=u.toBuffer().compare(r)?null:{Asset:d(i.asset),Memo:o.toString(i.memo),Nils:new Array}:null}function y(t,e,n){t=o.toBuffer(t),e=o.toBuffer(e),n=o.toBuffer(n);var r=f.decEInfo(t,e),i=o.toString(r.ar);return 0!=u.genAssetCM(r.asset,i).toBuffer().compare(n)?null:{Asset:d(r.asset),Memo:o.toString(r.memo),Nils:new Array}}e.confirmOutZ=p,e.confirmOutC=y},59132:(t,e,n)=>{"use strict";var r=n(3125).Buffer;Object.defineProperty(e,"__esModule",{value:!0});var o=n(73664),i=n(37644),u=n(95434),a=n(68113),s=n(19582),c=n(5172),f=n(79195),l=n(70944),h=n(33002),d=function(){function t(t,e){if(this.version=2,void 0!==t){void 0===e&&(e=g());var n=f.toBuffer(e);this.keystore=y(n,t,2);var r=h.seed2Sk(n,2),o=h.sk2Tk(r);return this.tk=o,this.pk=h.tk2PK(o),this.version=2,this}}return t.prototype.fromKeystore=function(t){var e="object"==typeof t?t:JSON.parse(t);this.keystore=e,this.tk=e.tk,this.version=this.keystore.version;var n=f.toBuffer(this.tk);if(f.isNewVersion(n)){if(2!==this.version)throw new Error("keystore version not match tk")}else if(1!==this.version)throw new Error("keystore version not match tk");var r=h.tk2PK(this.tk);return this.pk=r,this},t.prototype.fromMnemonic=function(t,e){var n=t.split(" "),r=1;if(25===n.length){if("v2"!==n[0])throw new Error("invalid mnemoic!");r=2,t=n.slice(1).join(" ")}if(s.validateMnemonic(t)){var o=s.mnemonicToEntropy(t),i=f.toBuffer(o);this.keystore=y(i,e,r);var u=h.seed2Sk(i,r),a=h.sk2Tk(u);return this.tk=a,this.pk=this.keystore.address,this.version=r,this}throw new Error("invald mnemonic!")},t.prototype.fromTk=function(t){var e=f.toBuffer(t),n=1;return f.isNewVersion(e)&&(n=2),this.tk=t,this.pk=h.tk2PK(e),this.keystore=function(t,e){var n=h.tk2PK(t);return{version:e,id:a({random:i(16)}),address:n,tk:t.toString(),at:0}}(this.tk,n),this.version=n,this},t.prototype.getSk=function(t){if(this.keystore.crypto){var e=p(this.keystore,t);return h.seed2Sk(e,this.keystore.version)}return""},t.prototype.getTk=function(){return this.tk.toString()},t.prototype.getPk=function(){return this.pk},t.prototype.getVersion=function(){return this.version},t.prototype.getKeystore=function(){return this.keystore},t.prototype.exportMnemonic=function(t){var e=p(this.keystore,t),n=this.keystore.version,r=s.entropyToMnemonic(e);return 2===n&&(r="v2 "+r),r},t}();function p(t,e){var n,i,a="object"==typeof t?t:JSON.parse(t);if("scrypt"!==a.crypto.kdf)throw new Error("Unsupported key derivation scheme");i=a.crypto.kdfparams,n=u(r.from(e),f.toBuffer(i.salt),i.n,i.r,i.p,i.dklen);var s=r.from(a.crypto.ciphertext,"hex");if(c(r.concat([n.slice(16,32),s])).toString("hex")!==a.crypto.mac)throw new Error("Key derivation failed - possibly wrong passphrase");return v(o.createDecipheriv(a.crypto.cipher,n.slice(0,16),r.from(a.crypto.cipherparams.iv,"hex")),s)}function y(t,e,n){if(!function(t){return null!=t}(t))throw new Error("This is a public key only wallet");var s={cipher:"aes-128-ctr",kdf:"scrypt",salt:i(32),iv:i(16),uuid:i(16),dklen:32,c:262144,n:262144,r:8,p:1},l=function(t){return{dklen:t.dklen,salt:t.salt.toString("hex"),n:t.n,r:t.r,p:t.p}}(s),d=u(r.from(e),f.toBuffer(l.salt),l.n,l.r,l.p,l.dklen),p=o.createCipheriv(s.cipher,d.slice(0,16),s.iv);if(!p)throw new Error("Unsupported cipher");var y=v(p,t),g=c(r.concat([d.slice(16,32),r.from(y)])),_=h.seed2Sk(t,n),w=h.sk2Tk(_),m=h.tk2PK(w);return l.salt=l.salt,{version:n,id:a({random:s.uuid}),address:m,tk:w.toString(),crypto:{ciphertext:y.toString("hex"),cipherparams:{iv:s.iv.toString("hex")},cipher:s.cipher,kdf:s.kdf,kdfparams:l,mac:g.toString("hex")},at:0}}function v(t,e){return r.concat([t.update(e),t.final()])}function g(){return l.randomFR().toBuffer().toString("hex")}e.default=d,e.createPkrHash=function(t,e,n){if(2!==n&&1!==n)throw new Error("ivalid version");t=f.toBuffer(t);var o=f.toBN(e).toArrayLike(r,"be");if(8<o.length)throw new Error("invalid index");var i=f.toBuffer(f.padLeft(o.toString("hex"),16,"0")),u=r.concat([t,i]),a=c(u),s=l.newFR(a),d=h.tk2PK(t);return h.PK2PKr(d,s)},e.createOldPkrHash=function(t,e,n){if(2!==n&&1!==n)throw new Error("ivalid version");t=f.toBuffer(t);var o=f.toBN(e).toArrayLike(r,"be");if(8<o.length)throw new Error("invalid index");var i=f.toBuffer(f.padLeft(o.toString("hex"),64,"0")),u=l.newFR(i),a=h.tk2PK(t);return h.PK2PKr(a,u)},e.genSeed=g,e.entropyToMnemonic=function(t){var e=s.entropyToMnemonic(t);return"v2 "+e},e.validPkr=function(t){var e=f.toBuffer(t);return 96===e.length&&h.isPKrValid(e)}},71696:t=>{for(var e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n={},r=0;r<e.length;r++)n[e.charAt(r)]=r;t.exports={encode58:function(t){if(0===t.length)return"";var n,r,o=[0];for(n=0;n<t.length;n++){for(r=0;r<o.length;r++)o[r]<<=8;o[0]+=t[n];var i=0;for(r=0;r<o.length;++r)o[r]+=i,i=o[r]/58|0,o[r]%=58;for(;i;)o.push(i%58),i=i/58|0}for(n=0;0===t[n]&&n<t.length-1;n++)o.push(0);return o.reverse().map((function(t){return e[t]})).join("")},decode58:function(t){if(0===t.length)return[];var e,r,o=[0];for(e=0;e<t.length;e++){var i=t[e];if(!(i in n))throw new Error("Non-base58 character");for(r=0;r<o.length;r++)o[r]*=58;o[0]+=n[i];var u=0;for(r=0;r<o.length;++r)o[r]+=u,u=o[r]>>8,o[r]&=255;for(;u;)o.push(255&u),u>>=8}for(e=0;"1"===t[e]&&e<t.length-1;e++)o.push(0);return o.reverse()}}},25710:t=>{function e(t){var e=0;return t>="A"&&t<="F"?e=t.charCodeAt(0)-"A".charCodeAt(0)+10:t>="a"&&t<="f"?e=t.charCodeAt(0)-"a".charCodeAt(0)+10:t>="0"&&t<="9"&&(e=t.charCodeAt(0)-"0".charCodeAt(0)),e}function n(t){return t>="A"&&t<="F"||t>="a"&&t<="f"||t>="0"&&t<="9"?1:0}function r(t){return(new o).decodeToByteArray(t)}function o(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(e){for(var n,r,o,i,u,a,s,c="",f=0;f<e.length;)i=(n=e.charCodeAt(f++))>>2,u=(3&n)<<4|(r=e.charCodeAt(f++))>>4,a=(15&r)<<2|(o=e.charCodeAt(f++))>>6,s=63&o,isNaN(r)?a=s=64:isNaN(o)&&(s=64),c=c+t.charAt(i)+t.charAt(u)+t.charAt(a)+t.charAt(s);return c},this.encodeIgnoreUtf8=function(e){for(var n,r,o,i,u,a,s,c="",f=0;f<e.length;)i=(n=e[f++])>>2,u=(3&n)<<4|(r=e[f++])>>4,a=(15&r)<<2|(o=e[f++])>>6,s=63&o,isNaN(r)?a=s=64:isNaN(o)&&(s=64),c=c+t.charAt(i)+t.charAt(u)+t.charAt(a)+t.charAt(s);return c},this.decode=function(e){var n,r,o,i,u,a,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)n=t.indexOf(e.charAt(c++))<<2|(i=t.indexOf(e.charAt(c++)))>>4,r=(15&i)<<4|(u=t.indexOf(e.charAt(c++)))>>2,o=(3&u)<<6|(a=t.indexOf(e.charAt(c++))),s+=String.fromCharCode(n),64!=u&&(s+=String.fromCharCode(r)),64!=a&&(s+=String.fromCharCode(o));return s=this._utf8_decode(s)},this.decodeToByteArray=function(e){var n,r,o,i,u,a,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)n=t.indexOf(e.charAt(c++))<<2|(i=t.indexOf(e.charAt(c++)))>>4,r=(15&i)<<4|(u=t.indexOf(e.charAt(c++)))>>2,o=(3&u)<<6|(a=t.indexOf(e.charAt(c++))),s+=String.fromCharCode(n),64!=u&&(s+=String.fromCharCode(r)),64!=a&&(s+=String.fromCharCode(o));return this._out2ByteArray(s)},this._out2ByteArray=function(t){let e=new Array(t.length),n=0,r=0;for(;n<t.length;)r=t.charCodeAt(n),e[n]=r,n++;return e},this._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},this._utf8_decode=function(t){for(var e="",n=0,r=c1=c2=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}}t.exports={base64EncodeToString:function(t){return(new o).encodeIgnoreUtf8(t)},base64DecodeFromString:r,hexStr2byteArray:function(t){var r=Array(),o=0,i=0,u=0;for(let s=0;s<t.length;s++){var a=t.charAt(s);n(a)&&(o<<=4,o+=e(a),0===++i%2&&(r[u++]=o,o=0))}return r},stringToBytes:function(t){var e,n,r=new Array;e=t.length;for(var o=0;o<e;o++)(n=t.charCodeAt(o))>=65536&&n<=1114111?(r.push(n>>18&7|240),r.push(n>>12&63|128),r.push(n>>6&63|128),r.push(63&n|128)):n>=2048&&n<=65535?(r.push(n>>12&15|224),r.push(n>>6&63|128),r.push(63&n|128)):n>=128&&n<=2047?(r.push(n>>6&31|192),r.push(63&n|128)):r.push(255&n);return r}}},50837:function(t,e,n){"use strict";var r;!function(o){function i(t,e,n){var r,o,i,u,d,p,y,v,g,_=0,w=[],m=0,b=!1,S=[],B=[],A=!1;if(r=(n=n||{}).encoding||"UTF8",(g=n.numRounds||1)!==parseInt(g,10)||1>g)throw Error("numRounds must a integer >= 1");if(0!==t.lastIndexOf("SHA-",0))throw Error("Chosen SHA variant is not supported");if(p=function(e,n){return k(e,n,t)},y=function(e,n,r,o){var i,u;if("SHA-224"!==t&&"SHA-256"!==t)throw Error("Unexpected error in SHA-2 implementation");for(i=15+(n+65>>>9<<4),u=16;e.length<=i;)e.push(0);for(e[n>>>5]|=128<<24-n%32,n+=r,e[i]=4294967295&n,e[i-1]=n/4294967296|0,r=e.length,n=0;n<r;n+=u)o=k(e.slice(n,n+u),o,t);if("SHA-224"===t)e=[o[0],o[1],o[2],o[3],o[4],o[5],o[6]];else{if("SHA-256"!==t)throw Error("Unexpected error in SHA-2 implementation");e=o}return e},v=function(t){return t.slice()},"SHA-224"===t)d=512,u=224;else{if("SHA-256"!==t)throw Error("Chosen SHA variant is not supported");d=512,u=256}i=h(e,r),o=P(t),this.setHMACKey=function(e,n,i){var u;if(!0===b)throw Error("HMAC key already set");if(!0===A)throw Error("Cannot set HMAC key after calling update");if(e=(n=h(n,r=(i||{}).encoding||"UTF8")(e)).binLen,n=n.value,i=(u=d>>>3)/4-1,u<e/8){for(n=y(n,e,0,P(t));n.length<=i;)n.push(0);n[i]&=4294967040}else if(u>e/8){for(;n.length<=i;)n.push(0);n[i]&=4294967040}for(e=0;e<=i;e+=1)S[e]=909522486^n[e],B[e]=1549556828^n[e];o=p(S,o),_=d,b=!0},this.update=function(t){var e,n,r,u=0,a=d>>>5;for(t=(e=i(t,w,m)).binLen,n=e.value,e=t>>>5,r=0;r<e;r+=a)u+d<=t&&(o=p(n.slice(r,r+a),o),u+=d);_+=u,w=n.slice(u>>>5),m=t%d,A=!0},this.getHash=function(e,n){var r,i,h,d;if(!0===b)throw Error("Cannot call getHash after setting HMAC key");switch(h=l(n),e){case"HEX":r=function(t){return a(t,u,h)};break;case"B64":r=function(t){return s(t,u,h)};break;case"BYTES":r=function(t){return c(t,u)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(p){throw Error("ARRAYBUFFER not supported by this environment")}r=function(t){return f(t,u)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(d=y(w.slice(),m,_,v(o)),i=1;i<g;i+=1)d=y(d,u,0,P(t));return r(d)},this.getHMAC=function(e,n){var r,i,h,g;if(!1===b)throw Error("Cannot call getHMAC without first setting HMAC key");switch(h=l(n),e){case"HEX":r=function(t){return a(t,u,h)};break;case"B64":r=function(t){return s(t,u,h)};break;case"BYTES":r=function(t){return c(t,u)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(S){throw Error("ARRAYBUFFER not supported by this environment")}r=function(t){return f(t,u)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return i=y(w.slice(),m,_,v(o)),g=p(B,P(t)),r(g=y(i,u,d,g))}}function u(){}function a(t,e,n){var r,o,i="";for(e/=8,r=0;r<e;r+=1)o=t[r>>>2]>>>8*(3+r%4*-1),i+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return n.outputUpper?i.toUpperCase():i}function s(t,e,n){var r,o,i,u="",a=e/8;for(r=0;r<a;r+=3)for(o=r+1<a?t[r+1>>>2]:0,i=r+2<a?t[r+2>>>2]:0,i=(t[r>>>2]>>>8*(3+r%4*-1)&255)<<16|(o>>>8*(3+(r+1)%4*-1)&255)<<8|i>>>8*(3+(r+2)%4*-1)&255,o=0;4>o;o+=1)u+=8*r+6*o<=e?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-o)&63):n.b64Pad;return u}function c(t,e){var n,r,o="",i=e/8;for(n=0;n<i;n+=1)r=t[n>>>2]>>>8*(3+n%4*-1)&255,o+=String.fromCharCode(r);return o}function f(t,e){var n,r,o=e/8,i=new ArrayBuffer(o);for(r=new Uint8Array(i),n=0;n<o;n+=1)r[n]=t[n>>>2]>>>8*(3+n%4*-1)&255;return i}function l(t){var e={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(t=t||{},e.outputUpper=t.outputUpper||!1,!0===t.hasOwnProperty("b64Pad")&&(e.b64Pad=t.b64Pad),"boolean"!==typeof e.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!==typeof e.b64Pad)throw Error("Invalid b64Pad formatting option");return e}function h(t,e){var n;switch(e){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":n=function(t,e,n){var r,o,i,u,a,s=t.length;if(0!==s%2)throw Error("String of HEX type must be in byte increments");for(e=e||[0],a=(n=n||0)>>>3,r=0;r<s;r+=2){if(o=parseInt(t.substr(r,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(i=(u=(r>>>1)+a)>>>2;e.length<=i;)e.push(0);e[i]|=o<<8*(3+u%4*-1)}return{value:e,binLen:4*s+n}};break;case"TEXT":n=function(t,n,r){var o,i,u,a,s,c,f,l,h=0;if(n=n||[0],s=(r=r||0)>>>3,"UTF8"===e)for(l=3,u=0;u<t.length;u+=1)for(i=[],128>(o=t.charCodeAt(u))?i.push(o):2048>o?(i.push(192|o>>>6),i.push(128|63&o)):55296>o||57344<=o?i.push(224|o>>>12,128|o>>>6&63,128|63&o):(u+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(u)),i.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),a=0;a<i.length;a+=1){for(c=(f=h+s)>>>2;n.length<=c;)n.push(0);n[c]|=i[a]<<8*(l+f%4*-1),h+=1}else if("UTF16BE"===e||"UTF16LE"===e)for(l=2,i="UTF16LE"===e||"UTF16LE"!==e&&!1,u=0;u<t.length;u+=1){for(o=t.charCodeAt(u),!0===i&&(o=(a=255&o)<<8|o>>>8),c=(f=h+s)>>>2;n.length<=c;)n.push(0);n[c]|=o<<8*(l+f%4*-1),h+=2}return{value:n,binLen:8*h+r}};break;case"B64":n=function(t,e,n){var r,o,i,u,a,s,c,f=0;if(-1===t.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=t.indexOf("="),t=t.replace(/\=/g,""),-1!==o&&o<t.length)throw Error("Invalid '=' found in base-64 string");for(e=e||[0],s=(n=n||0)>>>3,o=0;o<t.length;o+=4){for(a=t.substr(o,4),i=u=0;i<a.length;i+=1)u|=(r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[i]))<<18-6*i;for(i=0;i<a.length-1;i+=1){for(r=(c=f+s)>>>2;e.length<=r;)e.push(0);e[r]|=(u>>>16-8*i&255)<<8*(3+c%4*-1),f+=1}}return{value:e,binLen:8*f+n}};break;case"BYTES":n=function(t,e,n){var r,o,i,u,a;for(e=e||[0],i=(n=n||0)>>>3,o=0;o<t.length;o+=1)r=t.charCodeAt(o),u=(a=o+i)>>>2,e.length<=u&&e.push(0),e[u]|=r<<8*(3+a%4*-1);return{value:e,binLen:8*t.length+n}};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(r){throw Error("ARRAYBUFFER not supported by this environment")}n=function(t,e,n){var r,o,i,u,a;for(e=e||[0],o=(n=n||0)>>>3,a=new Uint8Array(t),r=0;r<t.byteLength;r+=1)i=(u=r+o)>>>2,e.length<=i&&e.push(0),e[i]|=a[r]<<8*(3+u%4*-1);return{value:e,binLen:8*t.byteLength+n}};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return n}function d(t,e){return t>>>e|t<<32-e}function p(t,e,n){return t&e^~t&n}function y(t,e,n){return t&e^t&n^e&n}function v(t){return d(t,2)^d(t,13)^d(t,22)}function g(t){return d(t,6)^d(t,11)^d(t,25)}function _(t){return d(t,7)^d(t,18)^t>>>3}function w(t){return d(t,17)^d(t,19)^t>>>10}function m(t,e){var n=(65535&t)+(65535&e);return((t>>>16)+(e>>>16)+(n>>>16)&65535)<<16|65535&n}function b(t,e,n,r){var o=(65535&t)+(65535&e)+(65535&n)+(65535&r);return((t>>>16)+(e>>>16)+(n>>>16)+(r>>>16)+(o>>>16)&65535)<<16|65535&o}function S(t,e,n,r,o){var i=(65535&t)+(65535&e)+(65535&n)+(65535&r)+(65535&o);return((t>>>16)+(e>>>16)+(n>>>16)+(r>>>16)+(o>>>16)+(i>>>16)&65535)<<16|65535&i}function P(t){var e,n=[];if(0!==t.lastIndexOf("SHA-",0))throw Error("No SHA variants supported");switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],e=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t){case"SHA-224":break;case"SHA-256":n=e;break;case"SHA-384":case"SHA-512":n=[new u,new u,new u,new u,new u,new u,new u,new u];break;default:throw Error("Unknown SHA variant")}return n}function k(t,e,n){var r,o,i,u,a,s,c,f,l,h,d,P,k,A,T,E,O,C,x,K,R,M,I,F=[];if("SHA-224"!==n&&"SHA-256"!==n)throw Error("Unexpected error in SHA-2 implementation");for(h=64,P=1,M=Number,k=m,A=b,T=S,E=_,O=w,C=v,x=g,R=y,K=p,I=B,n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],a=e[5],s=e[6],c=e[7],d=0;d<h;d+=1)16>d?(l=d*P,f=t.length<=l?0:t[l],l=t.length<=l+1?0:t[l+1],F[d]=new M(f,l)):F[d]=A(O(F[d-2]),F[d-7],E(F[d-15]),F[d-16]),f=T(c,x(u),K(u,a,s),I[d],F[d]),l=k(C(n),R(n,r,o)),c=s,s=a,a=u,u=k(i,f),i=o,o=r,r=n,n=k(f,l);return e[0]=k(n,e[0]),e[1]=k(r,e[1]),e[2]=k(o,e[2]),e[3]=k(i,e[3]),e[4]=k(u,e[4]),e[5]=k(a,e[5]),e[6]=k(s,e[6]),e[7]=k(c,e[7]),e}var B;B=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}()},56791:t=>{let e="testnet"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEV_API_URL:"http://localhost:3002"}.NET;const n=e?35:34,r=e?"a0":"41",o=e?160:65;t.exports={ADDRESS_SIZE:n,ADDRESS_PREFIX:r,ADDRESS_PREFIX_BYTE:o}},46208:(t,e)=>{e.Base64=function(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(t){for(var e,n,r,o,i,u,a,s="",c=0;c<t.length;)o=(e=t.charCodeAt(c++))>>2,i=(3&e)<<4|(n=t.charCodeAt(c++))>>4,u=(15&n)<<2|(r=t.charCodeAt(c++))>>6,a=63&r,isNaN(n)?u=a=64:isNaN(r)&&(a=64),s=s+_keyStr.charAt(o)+_keyStr.charAt(i)+_keyStr.charAt(u)+_keyStr.charAt(a);return s},this.encodeIgnoreUtf8=function(t){for(var e,n,r,o,i,u,a,s="",c=0;c<t.length;)o=(e=t[c++])>>2,i=(3&e)<<4|(n=t[c++])>>4,u=(15&n)<<2|(r=t[c++])>>6,a=63&r,isNaN(n)?u=a=64:isNaN(r)&&(a=64),s=s+_keyStr.charAt(o)+_keyStr.charAt(i)+_keyStr.charAt(u)+_keyStr.charAt(a);return s},this.decode=function(t){var e,n,r,o,i,u,a="",s=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<t.length;)e=_keyStr.indexOf(t.charAt(s++))<<2|(o=_keyStr.indexOf(t.charAt(s++)))>>4,n=(15&o)<<4|(i=_keyStr.indexOf(t.charAt(s++)))>>2,r=(3&i)<<6|(u=_keyStr.indexOf(t.charAt(s++))),a+=String.fromCharCode(e),64!=i&&(a+=String.fromCharCode(n)),64!=u&&(a+=String.fromCharCode(r));return a=_utf8_decode(a)},this.decodeToByteArray=function(t){var e,n,r,o,i,u,a="",s=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<t.length;)e=_keyStr.indexOf(t.charAt(s++))<<2|(o=_keyStr.indexOf(t.charAt(s++)))>>4,n=(15&o)<<4|(i=_keyStr.indexOf(t.charAt(s++)))>>2,r=(3&i)<<6|(u=_keyStr.indexOf(t.charAt(s++))),a+=String.fromCharCode(e),64!=i&&(a+=String.fromCharCode(n)),64!=u&&(a+=String.fromCharCode(r));return _out2ByteArray(a)},_out2ByteArray=function(t){for(var e=new Array(t.length),n=0,r=c1=c2=0;n<t.length;)r=t.charCodeAt(n),e[n]=r,n++;return e},_utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode=function(t){for(var e="",n=0,r=c1=c2=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}}},8364:(t,e,n)=>{const{Base64:r}=n(46208);function o(t){var e="0123456789ABCDEF",n="";return n+=e.charAt(t>>4),n+=e.charAt(15&t)}t.exports={byteArray2hexStr:function(t){let e="";for(let n=0;n<t.length;n++)e+=o(t[n]);return e},hextoString:function(t){let e=t.split(""),n="";for(let r=0;r<e.length/2;r++){let t="0x"+e[2*r]+e[2*r+1];n+=String.fromCharCode(t)}return n},base64DecodeFromString:function(t){return(new r).decodeToByteArray(t)},bytesToString:function(t){if("string"===typeof t)return t;let e="",n=t;for(let r=0;r<n.length;r++){let t=n[r].toString(2),o=t.match(/^1+?(?=0)/);if(o&&8===t.length){let t=o[0].length,i=n[r].toString(2).slice(7-t);for(let e=1;e<t;e++)i+=n[e+r].toString(2).slice(2);e+=String.fromCharCode(parseInt(i,2)),r+=t-1}else e+=String.fromCharCode(n[r])}return e},byte2hexStr:o}},92037:(t,e,n)=>{const{ADDRESS_PREFIX:r,ADDRESS_PREFIX_BYTE:o}=n(56791),{base64DecodeFromString:i,hexStr2byteArray:u}=(n(25710).base64EncodeToString,n(25710)),{encode58:a,decode58:s}=n(71696),c=n(49273).ec,{keccak256:f}=n(38979),l=n(50837),h=n(56791).ADDRESS_SIZE,{byte2hexStr:d,byteArray2hexStr:p}=n(8364);function y(t){65===t.length&&(t=t.slice(1));var e=f(t).toString().substring(24);return u(e=r+e)}function v(t){return y(_(t))}function g(t){var e=m(t),n=m(e).slice(0,4);return n=t.concat(n),a(n)}function _(t){for(var e=new c("secp256k1").keyFromPrivate(t,"bytes").getPublic(),n=e.x,r=e.y,o=n.toString("hex");o.length<64;)o="0"+o;for(var i=r.toString("hex");i.length<64;)i="0"+i;return u("04"+o+i)}function w(t,e){let n=new c("secp256k1").keyFromPrivate(e,"bytes").sign(t),r=n.r,o=n.s,i=n.recoveryParam,a=r.toString("hex");for(;a.length<64;)a="0"+a;let s=o.toString("hex");for(;s.length<64;)s="0"+s;let f=d(i);return u(a+s+f)}function m(t){let e=new l("SHA-256","HEX"),n=p(t);e.update(n);let r=e.getHash("HEX");return u(r)}t.exports={signTransaction:function(t,e){"string"===typeof t&&(t=u(t));let n=e.getRawData(),r=w(m(n.serializeBinary()),t),o=new Uint8Array(r),i=n.getContractList().length;for(let u=0;u<i;u++)e.addSignature(o);return{transaction:e,hex:p(e.serializeBinary())}},passwordToAddress:function(t){return g(v(i(t)))},genPriKey:function(){let t=new c("secp256k1").genKeyPair().getPrivate().toString("hex");for(;t.length<64;)t="0"+t;return u(t)},SHA256:m,getAddressFromPriKey:v,getPubKeyFromPriKey:_,getBase58CheckAddress:g,isAddressValid:function(t){try{if("string"!==typeof t)return!1;if(t.length!==h)return!1;var e=s(t);if(25!==e.length)return!1;if(e[0]!==o)return!1;var n=e.slice(21),r=m(e=e.slice(0,21)),i=m(r).slice(0,4);if(n[0]==i[0]&&n[1]==i[1]&&n[2]==i[2]&&n[3]==i[3])return!0}catch(u){}return!1},getBase58CheckAddressFromPriKeyBase64String:function(t){return g(y(_(i(t))))},pkToAddress:function(t){return g(v(u(t)))},decode58Check:function(t){var e=s(t);if(e.length<=4)return console.error("ERROR CHECK"),null;var n=e.slice(0,e.length-4),r=m(n);return r[0]===e[n.length]&&r[1]===e[n.length+1]&&r[2]===e[n.length+2]&&r[3]===e[n.length+3]?n:null},signBytes:function(t,e){return"string"===typeof t&&(t=u(t)),w(m(e),t)},getHashByRawData:function(t){let e=m(t.getRawData().serializeBinary());return p(e)},generateBlockId:function(t,e){let n=function(t){for(var e=[0,0,0,0,0,0,0,0],n=0;n<e.length;n++){var r=255&t;e[n]=r,t=(t-r)/256}return e}(t);n.reverse();let r=e,o=[...n.slice(0,8),...r.slice(8,r.length)];return p(o)},hexStr2byteArray:u}},80950:()=>{},46601:()=>{},89214:()=>{},8623:()=>{},7748:()=>{},85568:()=>{},56619:()=>{},77108:()=>{},52361:()=>{},94616:()=>{},28758:()=>{},375:()=>{},61950:()=>{},39773:()=>{},42062:()=>{},17992:()=>{},53008:()=>{},46634:()=>{},79716:()=>{},91722:()=>{},11598:()=>{},77114:()=>{},24088:()=>{},56319:()=>{},2484:()=>{},29945:()=>{},75670:()=>{},42402:()=>{},54942:()=>{},4062:()=>{},23434:()=>{},69467:()=>{},25345:()=>{}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,n.x=()=>{var t=n.O(void 0,[356],(()=>n(25126)));return t=n.O(t)},n.amdO={},(()=>{var t=[];n.O=(e,r,o,i)=>{if(!r){var u=1/0;for(f=0;f<t.length;f++){for(var[r,o,i]=t[f],a=!0,s=0;s<r.length;s++)(!1&i||u>=i)&&Object.keys(n.O).every((t=>n.O[t](r[s])))?r.splice(s--,1):(a=!1,i<u&&(u=i));if(a){t.splice(f--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var f=t.length;f>0&&t[f-1][2]>i;f--)t[f]=t[f-1];t[f]=[r,o,i]}})(),n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+".7ddd052d.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="/",(()=>{var t={801:1};n.f.i=(e,r)=>{t[e]||importScripts(n.p+n.u(e))};var e=self.webpackChunkemit_pins=self.webpackChunkemit_pins||[],r=e.push.bind(e);e.push=e=>{var[o,i,u]=e;for(var a in i)n.o(i,a)&&(n.m[a]=i[a]);for(u&&u(n);o.length;)t[o.pop()]=1;r(e)}})(),(()=>{var t=n.x;n.x=()=>n.e(356).then(t)})();n.x()})();