{"version":3,"file":"static/js/461.c00a477c.chunk.js","mappings":"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","sources":["../../emit-im-worker/src/collection/base.js","../../emit-im-worker/src/collection/groupMsgCollection.js","../../emit-im-worker/src/collection/index.js","../../emit-im-worker/src/collection/messageCollection.js","../../emit-im-worker/src/collection/tribeInfoCollection.js","../../emit-im-worker/src/config/index.js","../../emit-im-worker/src/repository/IndexedDB.js","../../emit-im-worker/src/repository/Table.js","../../emit-im-worker/src/rpc/baserpc.js","../../emit-im-worker/src/rpc/index.js","../../emit-im-worker/src/service.js","../../emit-im-worker/src/service/tribe/index.js","../../emit-im-worker/src/service/tribe/service.js","../../emit-im-worker/src/types/index.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.baseConfig = void 0;\nvar Base = /** @class */ (function () {\n    function Base() {\n    }\n    return Base;\n}());\nexports.default = Base;\nexports.baseConfig = {\n    message: {\n        name: \"message\",\n        keyPath: \"uid\",\n        autoIncrement: true,\n        indexes: [\n            {\n                index: \"id\",\n                relativeIndex: \"id\",\n                unique: true\n            },\n            {\n                index: \"groupId\",\n                relativeIndex: \"groupId\",\n                unique: false\n            },\n            {\n                index: \"timestamp\",\n                relativeIndex: \"timestamp\",\n                unique: false\n            },\n            {\n                index: \"tribeId\",\n                relativeIndex: \"tribeId\",\n                unique: false\n            },\n            {\n                index: \"tribeIdAndTimestamp\",\n                relativeIndex: [\"tribeId\", \"timestamp\"],\n                unique: false\n            },\n        ]\n    },\n    groupMsg: {\n        name: \"group_msg\",\n        keyPath: \"uid\",\n        autoIncrement: true,\n        indexes: [\n            {\n                index: \"groupId\",\n                relativeIndex: \"groupId\",\n                unique: true\n            },\n        ]\n    },\n    tribeInfo: {\n        name: \"tribe_info\",\n        keyPath: \"uid\",\n        autoIncrement: true,\n        indexes: [\n            {\n                index: \"tribeId\",\n                relativeIndex: \"tribeId\",\n                unique: true\n            },\n        ]\n    }\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_1 = require(\"./base\");\nvar GroupMsgCollection = /** @class */ (function (_super) {\n    __extends(GroupMsgCollection, _super);\n    function GroupMsgCollection(db) {\n        var _this = _super.call(this) || this;\n        _this.findPages = function (indexKey, indexValue, pageNo, pageSize) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.pageData(this._name, indexKey, indexValue, pageNo, pageSize)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        }); };\n        _this._name = base_1.baseConfig.groupMsg.name;\n        _this._db = db;\n        return _this;\n    }\n    GroupMsgCollection.prototype.delete = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.delete(this._name, data)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    GroupMsgCollection.prototype.find = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.select(this._name, options)];\n                    case 1:\n                        rest = _a.sent();\n                        return [2 /*return*/, rest && rest[0]];\n                }\n            });\n        });\n    };\n    GroupMsgCollection.prototype.findAll = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.selectAll(this._name)];\n                    case 1:\n                        rest = _a.sent();\n                        return [2 /*return*/, rest];\n                }\n            });\n        });\n    };\n    GroupMsgCollection.prototype.insert = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.insert(this._name, data)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    GroupMsgCollection.prototype.update = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.update(this._name, data)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return GroupMsgCollection;\n}(base_1.default));\nexports.default = GroupMsgCollection;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tribeInfoCollection = exports.groupMsgCollection = exports.messageCollection = void 0;\nvar IndexedDB_1 = require(\"../repository/IndexedDB\");\nvar base_1 = require(\"./base\");\nvar messageCollection_1 = require(\"./messageCollection\");\nvar groupMsgCollection_1 = require(\"./groupMsgCollection\");\nvar tribeInfoCollection_1 = require(\"./tribeInfoCollection\");\nvar DATABASE_NAME = \"emit_im_service\";\nvar DATABASE_VERSION = 1;\nvar Index = /** @class */ (function () {\n    function Index() {\n    }\n    Index.prototype.initDatabase = function () {\n        var keys = Object.keys(base_1.baseConfig);\n        var tables = [];\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            tables.push(base_1.baseConfig[key]);\n        }\n        var dbProps = {\n            databaseName: DATABASE_NAME,\n            tables: tables,\n            version: DATABASE_VERSION\n        };\n        return new IndexedDB_1.IndexedDB(dbProps);\n    };\n    return Index;\n}());\nvar _db = new Index().initDatabase();\nexports.messageCollection = new messageCollection_1.default(_db);\nexports.groupMsgCollection = new groupMsgCollection_1.default(_db);\nexports.tribeInfoCollection = new tribeInfoCollection_1.default(_db);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_1 = require(\"./base\");\nvar MessageCollection = /** @class */ (function (_super) {\n    __extends(MessageCollection, _super);\n    function MessageCollection(db) {\n        var _this = _super.call(this) || this;\n        _this.findPages = function (indexKey, indexValue, pageNo, pageSize) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.pageData(this._name, indexKey, indexValue, pageNo, pageSize)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        }); };\n        _this._name = base_1.baseConfig.message.name;\n        _this._db = db;\n        return _this;\n    }\n    MessageCollection.prototype.delete = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.delete(this._name, data)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MessageCollection.prototype.find = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.select(this._name, options)];\n                    case 1:\n                        rest = _a.sent();\n                        if (rest) {\n                            return [2 /*return*/, rest[0]];\n                        }\n                        return [2 /*return*/, null];\n                }\n            });\n        });\n    };\n    MessageCollection.prototype.some = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.select(this._name, options)];\n                    case 1:\n                        rest = _a.sent();\n                        if (rest) {\n                            return [2 /*return*/, rest];\n                        }\n                        return [2 /*return*/, []];\n                }\n            });\n        });\n    };\n    MessageCollection.prototype.findAll = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.selectAll(this._name)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    MessageCollection.prototype.insert = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.insert(this._name, data)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    MessageCollection.prototype.update = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.update(this._name, data)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return MessageCollection;\n}(base_1.default));\nexports.default = MessageCollection;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_1 = require(\"./base\");\nvar TribeInfoCollection = /** @class */ (function (_super) {\n    __extends(TribeInfoCollection, _super);\n    function TribeInfoCollection(db) {\n        var _this = _super.call(this) || this;\n        _this.findPages = function (indexKey, indexValue, pageNo, pageSize) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.pageData(this._name, indexKey, indexValue, pageNo, pageSize)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        }); };\n        _this._name = base_1.baseConfig.tribeInfo.name;\n        _this._db = db;\n        return _this;\n    }\n    TribeInfoCollection.prototype.delete = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.delete(this._name, data)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    TribeInfoCollection.prototype.find = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.select(this._name, options)];\n                    case 1:\n                        rest = _a.sent();\n                        return [2 /*return*/, rest && rest[0]];\n                }\n            });\n        });\n    };\n    TribeInfoCollection.prototype.findAll = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.selectAll(this._name)];\n                    case 1:\n                        rest = _a.sent();\n                        return [2 /*return*/, rest];\n                }\n            });\n        });\n    };\n    TribeInfoCollection.prototype.insert = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.insert(this._name, data)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    TribeInfoCollection.prototype.update = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._db.update(this._name, data)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return TribeInfoCollection;\n}(base_1.default));\nexports.default = TribeInfoCollection;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar development = {\n    version: 2,\n    source: \"emit-im\",\n    host: {\n        ws: \"ws://106.53.88.143:7001/ws\",\n        rpc: \"http://106.53.88.143:7070\"\n    },\n};\nvar production = {\n    version: 1,\n    source: \"emit-im\",\n    host: {\n        ws: \"ws://106.53.88.143:7001/ws\",\n        rpc: \"http://106.53.88.143:7070\"\n    },\n};\nvar NODE_ENV = process.env.NODE_ENV || 'development';\nvar config = {\n    development: development,\n    production: production\n};\nexports.default = config[NODE_ENV];\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IndexedDB = void 0;\nvar Table_1 = require(\"./Table\");\nvar IndexedDB = /** @class */ (function () {\n    function IndexedDB(config) {\n        var databaseName = config.databaseName, tables = config.tables, version = config.version;\n        this.name = databaseName;\n        this.tables = tables;\n        this.createTable(this.tables, version);\n    }\n    IndexedDB.prototype.createDateBase = function (name, version) {\n        if (version === void 0) { version = 1; }\n        this.openedDB = indexedDB.open(name, version);\n    };\n    IndexedDB.prototype.createTable = function (tables, version) {\n        var _this = this;\n        if (version === void 0) { version = 1; }\n        var conn_request = indexedDB.open(this.name, version);\n        conn_request.onupgradeneeded = function (ev) {\n            var db = ev.target.result;\n            tables.forEach(function (table) {\n                var hadTableNames = Array.from(db.objectStoreNames);\n                if (!hadTableNames.includes(table.name)) {\n                    var table_info_1 = db.createObjectStore(table.name, {\n                        keyPath: table.keyPath,\n                        autoIncrement: table.autoIncrement\n                    });\n                    table.indexes.forEach(function (item) {\n                        _this.createIndex(table_info_1, item);\n                    });\n                }\n            });\n        };\n    };\n    IndexedDB.prototype.deleteTable = function (tableName, version) {\n        var conn_request = indexedDB.open(this.name, version);\n        conn_request.onupgradeneeded = function (ev) {\n            var db = ev.target.result;\n            if (ev.oldVersion < version) {\n                db.deleteObjectStore(tableName);\n            }\n        };\n    };\n    // create index\n    IndexedDB.prototype.createIndex = function (table, option) {\n        var optionPramas = {};\n        if (option.unique) {\n            optionPramas[\"unique\"] = option.unique;\n        }\n        if (option.multiEntry) {\n            optionPramas[\"multiEntry\"] = option.multiEntry;\n        }\n        table.createIndex(option.index, option.relativeIndex, optionPramas);\n    };\n    IndexedDB.prototype.connect = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var conn_request = indexedDB.open(_this.name, _this.version);\n            conn_request.onsuccess = function (ev) {\n                resolve(ev.target.result);\n            };\n            conn_request.onerror = function (ev) {\n                reject(ev);\n            };\n        });\n    };\n    IndexedDB.prototype.close = function () {\n        this.connect().then(function (db) {\n            db.close();\n        });\n    };\n    IndexedDB.prototype.insert = function (name, data) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.connect().then(function (db) {\n                var table = new Table_1.Table(name, db);\n                table.insert(data).then(resolve).catch(reject);\n            });\n        });\n    };\n    IndexedDB.prototype.select = function (name, selecter) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.connect().then(function (db) {\n                var table = new Table_1.Table(name, db);\n                table.select(selecter).then(function (res) {\n                    resolve(res);\n                }).catch(function (err) {\n                    reject(err);\n                });\n            });\n        });\n    };\n    IndexedDB.prototype.selectId = function (name, id) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.connect().then(function (db) {\n                var table = new Table_1.Table(name, db);\n                table.selectId(id).then(function (res) {\n                    resolve(res);\n                }).catch(function (err) {\n                    reject(err);\n                });\n            });\n        });\n    };\n    IndexedDB.prototype.some = function (name, selecter, count) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.connect().then(function (db) {\n                var table = new Table_1.Table(name, db);\n                table.some(selecter, count).then(function (res) {\n                    resolve(res);\n                }).catch(function (error) {\n                    reject(error);\n                });\n            });\n        });\n    };\n    IndexedDB.prototype.pageData = function (name, indexKey, indexValue, pageNo, pageSize) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.connect().then(function (db) {\n                var table = new Table_1.Table(name, db);\n                table.pageData(indexKey, indexValue, pageNo, pageSize).then(function (res) {\n                    resolve(res);\n                }).catch(function (error) {\n                    reject(error);\n                });\n            });\n        });\n    };\n    IndexedDB.prototype.update = function (name, data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        _this.connect().then(function (db) {\n                            var table = new Table_1.Table(name, db);\n                            table.update(data).then(function (res) {\n                                resolve(res);\n                            }).catch(function (err) {\n                                // reject(err)\n                                console.log(name, data);\n                                console.log(err);\n                                resolve(true);\n                            });\n                        });\n                    })];\n            });\n        });\n    };\n    IndexedDB.prototype.delete = function (name, data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                // console.log(\"delete >>>> \",name,data);\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        _this.connect().then(function (db) {\n                            var table = new Table_1.Table(name, db);\n                            table.delete(data).then(function (res) {\n                                resolve(res);\n                            }).catch(function (err) {\n                                console.log(name, data);\n                                console.log(err);\n                                resolve(true);\n                            });\n                        });\n                    })];\n            });\n        });\n    };\n    IndexedDB.prototype.selectAll = function (name) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.connect().then(function (db) {\n                var table = new Table_1.Table(name, db);\n                table.selectAll().then(function (res) {\n                    resolve(res);\n                }).catch(function (err) {\n                    reject(err);\n                });\n            });\n        });\n    };\n    IndexedDB.prototype.clearTable = function (name) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.connect().then(function (db) {\n                var table = new Table_1.Table(name, db);\n                table.clear().then(function (res) {\n                    resolve(res);\n                }).catch(function (error) {\n                    reject(error);\n                });\n            });\n        });\n    };\n    return IndexedDB;\n}());\nexports.IndexedDB = IndexedDB;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Table = void 0;\nvar Table = /** @class */ (function () {\n    function Table(name, db) {\n        this.name = name;\n        this.db = db;\n    }\n    // create transaction\n    Table.prototype.transaction = function (mode) {\n        if (mode === void 0) { mode = true; }\n        return this.db.transaction([this.name], mode === true ? 'readwrite' : 'readonly');\n    };\n    // open or conntect this table\n    Table.prototype.request = function () {\n        return this.transaction().objectStore(this.name);\n    };\n    // get\n    Table.prototype.select = function (selector) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index_1, value_1, name_1, rets, _a, _b, _i, name_2, rest, retTmp, _c, rets_1, datas, _d, datas_1, data, f, name_3;\n            var _this = this;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!(Object.keys(selector).length == 1)) return [3 /*break*/, 1];\n                        for (name_1 in selector) {\n                            index_1 = name_1;\n                            value_1 = selector[name_1];\n                        }\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\n                                var selectRequest = _this.request().index(index_1).getAll(value_1);\n                                selectRequest.onsuccess = function (e) {\n                                    resolve(e.target.result);\n                                };\n                                selectRequest.onerror = function (e) {\n                                    reject(e.target.result);\n                                };\n                            })];\n                    case 1:\n                        rets = [];\n                        _a = [];\n                        for (_b in selector)\n                            _a.push(_b);\n                        _i = 0;\n                        _e.label = 2;\n                    case 2:\n                        if (!(_i < _a.length)) return [3 /*break*/, 5];\n                        name_2 = _a[_i];\n                        return [4 /*yield*/, this._iSelect(name_2, selector[name_2])];\n                    case 3:\n                        rest = _e.sent();\n                        rets.push(rest);\n                        _e.label = 4;\n                    case 4:\n                        _i++;\n                        return [3 /*break*/, 2];\n                    case 5:\n                        retTmp = [];\n                        for (_c = 0, rets_1 = rets; _c < rets_1.length; _c++) {\n                            datas = rets_1[_c];\n                            for (_d = 0, datas_1 = datas; _d < datas_1.length; _d++) {\n                                data = datas_1[_d];\n                                f = true;\n                                for (name_3 in selector) {\n                                    if (data[name_3] != selector[name_3]) {\n                                        f = false;\n                                        break;\n                                    }\n                                }\n                                if (f) {\n                                    retTmp.push(data);\n                                }\n                            }\n                        }\n                        return [2 /*return*/, retTmp];\n                }\n            });\n        });\n    };\n    Table.prototype._iSelect = function (index, value) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var selectRequest = _this.request().index(index).getAll(value);\n                        selectRequest.onsuccess = function (e) {\n                            resolve(e.target.result);\n                        };\n                        selectRequest.onerror = function (e) {\n                            reject(e.target.result);\n                        };\n                    })];\n            });\n        });\n    };\n    Table.prototype.selectId = function (id) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var selectRequest = _this.request().get(id);\n            selectRequest.onsuccess = function (e) {\n                resolve(e.target.result);\n            };\n            selectRequest.onerror = function (e) {\n                reject(e.target.result);\n            };\n        });\n    };\n    Table.prototype.selectAll = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var selectRequest = _this.request().getAll();\n            selectRequest.onsuccess = function (e) {\n                resolve(e.target.result);\n            };\n            selectRequest.onerror = function (e) {\n                reject(e.target.result);\n            };\n        });\n    };\n    // some\n    Table.prototype.some = function (selector, count) {\n        var _this = this;\n        var index;\n        var indexValue;\n        for (var name_4 in selector) {\n            index = name_4;\n            indexValue = selector[name_4];\n        }\n        return new Promise(function (resolve, reject) {\n            var temp = [];\n            var cursor = _this.request().index(index);\n            // const range = IDBKeyRange.lowerBound(\"_\")\n            cursor.openCursor(indexValue, \"prev\").onsuccess = function (ev) {\n                var res = ev.target.result;\n                if (res) {\n                    temp.push(res.value);\n                    if (temp.length < count) {\n                        res.continue();\n                    }\n                    else {\n                        resolve(temp);\n                    }\n                }\n                else {\n                    resolve(temp);\n                }\n            };\n        });\n    };\n    Table.prototype.pageData = function (indexKey, indexValue, page, pageSize) {\n        var _this = this;\n        if (pageSize === void 0) { pageSize = 10; }\n        return new Promise(function (resolve, reject) {\n            var data = [];\n            var store = _this.request().index(indexKey);\n            var request = store.openCursor(IDBKeyRange.lowerBound(indexValue), 'prev');\n            var count = store.count();\n            var index = null;\n            request.onsuccess = function (event) {\n                var res = event.target.result;\n                if (res) {\n                    if (index === pageSize - 1) {\n                        data.push(res.value);\n                        resolve({ data: data, total: count ? count.result : 0 });\n                        return;\n                    }\n                    if (index === null && page !== 1) {\n                        index = 0;\n                        res.advance((page - 1) * pageSize);\n                    }\n                    else {\n                        index++;\n                        data.push(res.value);\n                        res.continue();\n                    }\n                }\n                else {\n                    resolve({ data: data, total: 0 });\n                    return;\n                }\n            };\n            request.onerror = function (e) {\n                console.log('read data failed', e);\n                reject(e);\n            };\n        });\n    };\n    // put\n    Table.prototype.update = function (data) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var updateRequest = _this.request().put(data);\n            updateRequest.onsuccess = function (e) {\n                resolve(e);\n            };\n            updateRequest.onerror = function (e) {\n                reject(e);\n            };\n        });\n    };\n    // add\n    Table.prototype.insert = function (data) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var addRequest = _this.request().add(data);\n            addRequest.onsuccess = function (e) {\n                resolve(e);\n            };\n            addRequest.onerror = function (e) {\n                reject(e);\n            };\n        });\n    };\n    // get -> delete\n    Table.prototype.delete = function (selector) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var keys = Object.keys(selector);\n            var indexKey, indexValue;\n            if (keys.length > 0) {\n                indexKey = keys[0];\n                indexValue = selector[indexKey];\n            }\n            var store = _this.request().index(indexKey);\n            var pdestroy = store.openCursor(IDBKeyRange.only(indexValue));\n            pdestroy.onsuccess = function () {\n                var cursor = pdestroy.result;\n                if (cursor) {\n                    cursor.delete();\n                    cursor.continue();\n                }\n                else {\n                    resolve(true);\n                }\n            };\n            // this.select(selector).then((res: any) => {\n            //     if (res.length) {\n            //         res.forEach((item: any, index: any, arr: any) => {\n            //             const request = this.request()\n            //             const keyPath = request.keyPath as string\n            //             const deleteRequest = request.delete(item[keyPath])\n            //             deleteRequest.onsuccess = (e: any) => {\n            //                 if (index === arr.length - 1) {\n            //                     resolve(e)\n            //                 }\n            //             }\n            //             deleteRequest.onerror = (e: any) => {\n            //                 console.log(\"delete error: \", selector, item, index, e)\n            //                 if (index === arr.length - 1) {\n            //                     resolve(true)\n            //                 }\n            //             }\n            //         })\n            //     } else {\n            //         resolve(true)\n            //     }\n            // }).catch(e => {\n            //     reject(e)\n            // })\n        });\n    };\n    Table.prototype.clear = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var deleteRequest = _this.request().clear();\n            deleteRequest.onsuccess = function (e) {\n                resolve(e);\n            };\n            deleteRequest.onerror = function (e) {\n                reject(e);\n            };\n        });\n    };\n    return Table;\n}());\nexports.Table = Table;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseRpc = void 0;\nvar axios_1 = require(\"axios\");\nvar BaseRpc = /** @class */ (function () {\n    function BaseRpc(url) {\n        var _this = this;\n        this.post = function (path, data, authToken) { return __awaiter(_this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, axios_1.default.post(\"\" + this._url + path, data, {\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'AuthToken': authToken\n                            }\n                        })];\n                    case 1:\n                        rest = _a.sent();\n                        return [2 /*return*/, rest.data];\n                }\n            });\n        }); };\n        this._url = url;\n    }\n    return BaseRpc;\n}());\nexports.BaseRpc = BaseRpc;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./baserpc\"), exports);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"./types\");\nvar tribe_1 = require(\"./service/tribe\");\nvar Service = /** @class */ (function () {\n    function Service() {\n        var _this = this;\n        this.count = 0;\n        this.init = function (tribeId, authToken) { return __awaiter(_this, void 0, void 0, function () {\n            var callback;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.count++ == 0)) return [3 /*break*/, 2];\n                        callback = function (messages) {\n                            console.log(\"callback msg\", messages);\n                            sendMessage({\n                                messageId: -1,\n                                method: types_1.Method.listenerMessage,\n                                data: messages,\n                                result: messages\n                            });\n                        };\n                        return [4 /*yield*/, this.tribeService.init(tribeId, authToken, callback)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, Promise.resolve(true)];\n                    case 2: return [2 /*return*/, Promise.reject(\"service already init!\")];\n                }\n            });\n        }); };\n        this.getPinnedMessageArray = function (tribeId, pageNo, pageSize) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.tribeService.getMessageWithPinned(tribeId, pageNo, pageSize)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        }); };\n        this.checkStatusAndSetAuthToken = function (tribeId, authToken) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.tribeService.status(tribeId, authToken)];\n            });\n        }); };\n        this.tribeService = new tribe_1.TribeService();\n    }\n    return Service;\n}());\nvar service = new Service();\nself.addEventListener('message', function (e) {\n    if (e && e.data && e.data.method) {\n        var message_1 = e.data;\n        switch (message_1.method) {\n            case types_1.Method.init:\n                service.init(message_1.data.tribeId, message_1.data.authToken).then(function (rest) {\n                    message_1.result = rest;\n                    sendMessage(message_1);\n                }).catch(function (e) {\n                    message_1.error = typeof e == \"string\" ? e : e.message;\n                    sendMessage(message_1);\n                });\n                break;\n            case types_1.Method.getPinnedMessageArray:\n                service.getPinnedMessageArray(message_1.data.tribeId, message_1.data.pageNo, message_1.data.pageSize).then(function (rest) {\n                    message_1.result = rest;\n                    sendMessage(message_1);\n                }).catch(function (e) {\n                    message_1.error = typeof e == \"string\" ? e : e.message;\n                    sendMessage(message_1);\n                });\n                break;\n            case types_1.Method.checkAlive:\n                service.checkStatusAndSetAuthToken(message_1.data.tribeId, message_1.data.authToken).then(function (rest) {\n                    message_1.result = rest;\n                    sendMessage(message_1);\n                }).catch(function (e) {\n                    message_1.error = typeof e == \"string\" ? e : e.message;\n                    sendMessage(message_1);\n                });\n                break;\n            default:\n                console.log(\"default message\", message_1);\n                break;\n        }\n    }\n});\nfunction sendMessage(message) {\n    // console.log(\"send msg: \", message);\n    // @ts-ignore\n    self.postMessage(message);\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./service\"), exports);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TribeService = void 0;\nvar types_1 = require(\"../../types\");\nvar rpc_1 = require(\"../../rpc\");\nvar config_1 = require(\"../../config\");\nvar collection_1 = require(\"../../collection\");\nvar TribeService = /** @class */ (function (_super) {\n    __extends(TribeService, _super);\n    function TribeService() {\n        var _this = _super.call(this, config_1.default.host.rpc) || this;\n        _this.count = 0;\n        _this.init_count = 0;\n        _this.init = function (tribeId, authToken, cb) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.init_count++ == 0)) return [3 /*break*/, 4];\n                        console.log(\"init tribe worker service ...\");\n                        this.tribeId = tribeId;\n                        this.authToken = authToken;\n                        this._cb = cb;\n                        return [4 /*yield*/, this.terminal()];\n                    case 1:\n                        _a.sent();\n                        // await this.userCheckAuth();\n                        return [4 /*yield*/, this.indexGroupMsg()];\n                    case 2:\n                        // await this.userCheckAuth();\n                        _a.sent();\n                        return [4 /*yield*/, this.setConnectWs()];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.terminal = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (this._wsOrigin) {\n                    this._wsOrigin.close();\n                    this._wsOrigin = null;\n                    // this._wsOrigin.terminate();\n                }\n                if (this._wsIntervalId) {\n                    clearInterval(this._wsIntervalId);\n                }\n                return [2 /*return*/];\n            });\n        }); };\n        _this.tribeInfo = function () { return __awaiter(_this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.post('/tribe/tribeInfo', { tribeId: this.tribeId }, this.authToken)];\n                    case 1:\n                        rest = _a.sent();\n                        if (rest && rest.code == 0) {\n                            return [2 /*return*/, Promise.resolve(rest.data)];\n                        }\n                        return [2 /*return*/, Promise.reject(rest.message)];\n                }\n            });\n        }); };\n        _this.tribeRoles = function () { return __awaiter(_this, void 0, void 0, function () {\n            var rest, ret;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.post('/tribe/tribeRoles', { tribeId: this.tribeId }, this.authToken)];\n                    case 1:\n                        rest = _a.sent();\n                        if (rest && rest.code == 0) {\n                            if (rest.data) {\n                                ret = rest.data.reverse();\n                                return [2 /*return*/, Promise.resolve(ret)];\n                            }\n                            return [2 /*return*/, []];\n                        }\n                        return [2 /*return*/, Promise.reject(rest.message)];\n                }\n            });\n        }); };\n        _this.userCheckAuth = function () { return __awaiter(_this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.post('/user/checkAuth', null, this.authToken)];\n                    case 1:\n                        rest = _a.sent();\n                        if (rest && rest.code == 0) {\n                            return [2 /*return*/, Promise.resolve(rest.data.userName)];\n                        }\n                        return [2 /*return*/, Promise.reject(rest.message)];\n                }\n            });\n        }); };\n        _this.addWsListener = function (cb) {\n            var authToken = _this.authToken;\n            var tribeId = _this.tribeId;\n            if (!_this._wsOrigin) {\n                return;\n            }\n            var _ws = _this._wsOrigin;\n            _ws.addEventListener('open', function (e) {\n                console.log(\"opened\");\n                _this.isWsAlive = true;\n                _ws.send(JSON.stringify({ tribeId: tribeId, authToken: authToken }));\n                sendPing();\n            });\n            _ws.addEventListener('close', function (e) {\n                console.log(\"closed\");\n                _this.isWsAlive = false;\n                setTimeout(function () {\n                    _this.connectOrigin(cb);\n                }, 3 * 1000);\n            });\n            // _ws.addEventListener('pong', () => {\n            //     this.isAlive = true;\n            //     console.log(\"pong...\")\n            //     _ws.send('pong')\n            // });\n            _ws.addEventListener('error', function (e) {\n                console.log(\"error, connect after 10s later:\", e);\n                _this.isWsAlive = false;\n                setTimeout(function () {\n                    _this.connectOrigin(cb);\n                }, 3 * 1000);\n            });\n            _ws.addEventListener('message', function (ev) {\n                _this.isWsAlive = true;\n                if (ev.data && ev.data.indexOf(\"pong\") > -1) {\n                    pongReceived();\n                }\n                else {\n                    cb(ev.data);\n                }\n            });\n            var pongTimedOut = function () {\n                console.log(\"pong timeout ,reconnect...\");\n                _this.isWsAlive = false;\n                _this._wsOrigin.close();\n                _this._wsOrigin = null;\n                _this.setConnectWs();\n            };\n            var sendPing = function () {\n                setTimeout(function () {\n                    _ws.send('ping');\n                    _this.pongTimeout = setTimeout(function () {\n                        pongTimedOut();\n                    }, 30 * 10 * 1000); // 30s timeout\n                }, 10 * 1000);\n            };\n            var pongReceived = function () {\n                clearTimeout(_this.pongTimeout);\n                sendPing();\n            };\n            // if (this._wsIntervalId) {\n            //     clearInterval(this._wsIntervalId)\n            // }\n            //\n            // this._wsIntervalId = setInterval(() => {\n            //     if (_ws) {\n            //         console.log(\"check ws state=[%d]...\",_ws.readyState)\n            //         // if(_ws.readyState == WebSocket.CLOSED){\n            //         //     this.addWsListener(cb)\n            //         // }\n            //         _ws.send(\"ping\")\n            //     }\n            // }, 10 * 1000)\n        };\n        _this.connectOrigin = function (cb) {\n            var tribeId = _this.tribeId;\n            console.log(\"connect to [%s] origin....\", tribeId);\n            if (!_this._wsOrigin) {\n                _this._wsOrigin = new WebSocket(config_1.default.host.ws);\n            }\n            _this.addWsListener(cb);\n        };\n        _this.indexGroupMsg = function () { return __awaiter(_this, void 0, void 0, function () {\n            var groupIds, tribeInfo;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.groupIds()];\n                    case 1:\n                        groupIds = _a.sent();\n                        return [4 /*yield*/, this.tribeInfo()];\n                    case 2:\n                        tribeInfo = _a.sent();\n                        return [4 /*yield*/, this.storeTribeInfoIndex(tribeInfo)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.createGroupMsg(groupIds, false)];\n                    case 4:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.groupIds = function () { return __awaiter(_this, void 0, void 0, function () {\n            var rest;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.post('/tribe/groupIds', { tribeId: this.tribeId }, this.authToken)];\n                    case 1:\n                        rest = _a.sent();\n                        if (rest && rest.code == 0) {\n                            return [2 /*return*/, Promise.resolve(rest.data)];\n                        }\n                        return [2 /*return*/, Promise.reject(rest.message)];\n                }\n            });\n        }); };\n        _this.createGroupMsg = function (groupIds, withDraft) {\n            if (groupIds === void 0) { groupIds = []; }\n            if (withDraft === void 0) { withDraft = false; }\n            return __awaiter(_this, void 0, void 0, function () {\n                var unFetchGroupIds, i, groupId, rest, _i, unFetchGroupIds_1, fg, rest, gt, tmpMsg, i, groupMsg, groupId, records;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!groupIds || groupIds.length == 0) {\n                                return [2 /*return*/, Promise.resolve()];\n                            }\n                            unFetchGroupIds = [];\n                            i = 0;\n                            _a.label = 1;\n                        case 1:\n                            if (!(i < groupIds.length)) return [3 /*break*/, 4];\n                            groupId = groupIds[i];\n                            return [4 /*yield*/, collection_1.groupMsgCollection.find({ groupId: groupId })];\n                        case 2:\n                            rest = _a.sent();\n                            if (rest) {\n                                // ret.push(rest)\n                            }\n                            else {\n                                unFetchGroupIds.push({ groupId: groupId, seq: i + 1 });\n                            }\n                            _a.label = 3;\n                        case 3:\n                            i++;\n                            return [3 /*break*/, 1];\n                        case 4:\n                            if (!(unFetchGroupIds.length > 0)) return [3 /*break*/, 15];\n                            _i = 0, unFetchGroupIds_1 = unFetchGroupIds;\n                            _a.label = 5;\n                        case 5:\n                            if (!(_i < unFetchGroupIds_1.length)) return [3 /*break*/, 15];\n                            fg = unFetchGroupIds_1[_i];\n                            return [4 /*yield*/, this.post('/tribe/groupedMsg', {\n                                    groupIds: [fg.groupId],\n                                    withDraft: withDraft\n                                }, this.authToken)];\n                        case 6:\n                            rest = _a.sent();\n                            if (!(rest && rest.code == 0)) return [3 /*break*/, 13];\n                            if (rest.data.length == 0) {\n                                //panic\n                                return [2 /*return*/, Promise.reject(\"groupId =[\" + groupIds + \"] con not match the results\")];\n                            }\n                            gt = rest.data[0];\n                            tmpMsg = JSON.parse(JSON.stringify(gt.records[0]));\n                            tmpMsg.msgType = types_1.MessageType.Divide;\n                            tmpMsg.timestamp = tmpMsg.timestamp - 1;\n                            tmpMsg.id = \"\";\n                            return [4 /*yield*/, this.storeMessageIndex([tmpMsg], tmpMsg.groupId, gt.roles)];\n                        case 7:\n                            _a.sent();\n                            i = 0;\n                            _a.label = 8;\n                        case 8:\n                            if (!(i < rest.data.length)) return [3 /*break*/, 12];\n                            groupMsg = rest.data[i];\n                            groupId = fg.groupId;\n                            groupMsg.groupId = groupId;\n                            groupMsg.seq = fg.seq;\n                            records = __spreadArrays(groupMsg.records);\n                            return [4 /*yield*/, this.storeMessageIndex(records, groupId, groupMsg.roles)];\n                        case 9:\n                            _a.sent();\n                            groupMsg.records = []; // do not need store records;\n                            return [4 /*yield*/, collection_1.groupMsgCollection.insert(groupMsg)];\n                        case 10:\n                            _a.sent();\n                            _a.label = 11;\n                        case 11:\n                            i++;\n                            return [3 /*break*/, 8];\n                        case 12: return [3 /*break*/, 14];\n                        case 13: return [2 /*return*/, Promise.reject(rest.message)];\n                        case 14:\n                            _i++;\n                            return [3 /*break*/, 5];\n                        case 15: return [2 /*return*/, Promise.resolve()];\n                    }\n                });\n            });\n        };\n        _this.storeMessageIndex = function (records, groupId, roles) { return __awaiter(_this, void 0, void 0, function () {\n            var _loop_1, this_1, _i, records_1, record;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _loop_1 = function (record) {\n                            var msg, keys, _i, keys_1, key;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        record.groupId = groupId;\n                                        record.actor = roles.find(function (role) { return role.id = record.role; });\n                                        return [4 /*yield*/, collection_1.messageCollection.find({ id: record.id })];\n                                    case 1:\n                                        msg = _a.sent();\n                                        if (!msg) return [3 /*break*/, 5];\n                                        if (!(record.msgStatus === types_1.MessageStatus.removed)) return [3 /*break*/, 3];\n                                        return [4 /*yield*/, collection_1.messageCollection.delete({ id: record.id })];\n                                    case 2:\n                                        _a.sent();\n                                        _a.label = 3;\n                                    case 3:\n                                        keys = Object.keys(record);\n                                        for (_i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                                            key = keys_1[_i];\n                                            msg[key] = record[key];\n                                        }\n                                        msg[\"tribeIdAndTimestamp\"] = [this_1.tribeId, msg.timestamp];\n                                        return [4 /*yield*/, collection_1.messageCollection.update(msg)];\n                                    case 4:\n                                        _a.sent();\n                                        return [3 /*break*/, 7];\n                                    case 5:\n                                        record[\"tribeIdAndTimestamp\"] = [this_1.tribeId, record.timestamp];\n                                        return [4 /*yield*/, collection_1.messageCollection.insert(record)];\n                                    case 6:\n                                        _a.sent();\n                                        _a.label = 7;\n                                    case 7: return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _i = 0, records_1 = records;\n                        _a.label = 1;\n                    case 1:\n                        if (!(_i < records_1.length)) return [3 /*break*/, 4];\n                        record = records_1[_i];\n                        return [5 /*yield**/, _loop_1(record)];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.clearUnPinnedMessages = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, collection_1.messageCollection.delete({ groupId: \"\" })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.storeTribeInfoIndex = function (tribeInfo) { return __awaiter(_this, void 0, void 0, function () {\n            var trbi, keys, _i, keys_2, key;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, collection_1.tribeInfoCollection.find({ tribeId: tribeInfo.tribeId })];\n                    case 1:\n                        trbi = _a.sent();\n                        if (!trbi) return [3 /*break*/, 3];\n                        keys = Object.keys(tribeInfo);\n                        for (_i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            key = keys_2[_i];\n                            trbi[key] = tribeInfo[key];\n                        }\n                        return [4 /*yield*/, collection_1.tribeInfoCollection.update(trbi)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, collection_1.tribeInfoCollection.insert(tribeInfo)];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.getMessageWithPinned = function (tribeId, pageNo, pageSize) { return __awaiter(_this, void 0, void 0, function () {\n            var rest, messages, pins, tribeInfo, _i, messages_1, msg, groupMsg, pMsg;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, collection_1.messageCollection.findPages(\"tribeIdAndTimestamp\", [tribeId, 0], pageNo, pageSize)];\n                    case 1:\n                        rest = _a.sent();\n                        messages = rest.data;\n                        pins = [];\n                        return [4 /*yield*/, collection_1.tribeInfoCollection.find({ tribeId: tribeId })];\n                    case 2:\n                        tribeInfo = _a.sent();\n                        _i = 0, messages_1 = messages;\n                        _a.label = 3;\n                    case 3:\n                        if (!(_i < messages_1.length)) return [3 /*break*/, 8];\n                        msg = messages_1[_i];\n                        return [4 /*yield*/, collection_1.groupMsgCollection.find({ groupId: msg.groupId })];\n                    case 4:\n                        groupMsg = _a.sent();\n                        if (!msg.replayToMsgId) return [3 /*break*/, 6];\n                        return [4 /*yield*/, collection_1.messageCollection.find({ id: msg.replayToMsgId })];\n                    case 5:\n                        pMsg = _a.sent();\n                        if (pMsg) {\n                            msg.replayMsg = pMsg;\n                        }\n                        _a.label = 6;\n                    case 6:\n                        if (groupMsg) {\n                            pins.push({\n                                theme: groupMsg.theme,\n                                seq: groupMsg.seq,\n                                roles: groupMsg.roles,\n                                records: [msg],\n                                groupId: groupMsg.groupId,\n                                index: 0\n                            });\n                        }\n                        else {\n                            if (tribeInfo) {\n                                pins.push({\n                                    theme: tribeInfo.theme,\n                                    seq: 0,\n                                    roles: tribeInfo.roles,\n                                    records: [msg],\n                                    groupId: \"\",\n                                    index: 0\n                                });\n                            }\n                        }\n                        _a.label = 7;\n                    case 7:\n                        _i++;\n                        return [3 /*break*/, 3];\n                    case 8:\n                        pins.reverse();\n                        return [2 /*return*/, { total: rest.total, data: pins }];\n                }\n            });\n        }); };\n        _this.status = function (tribeId, authToken) {\n            _this.authToken = authToken;\n            return _this.isWsAlive;\n        };\n        //\n        // private convertGroupMsgToPinnedSticky = (groupTribes: Array<GroupMsg>): Array<PinnedSticky> => {\n        //     const stickies: Array<PinnedSticky> = [];\n        //     let i = 0;\n        //     let j = 0;\n        //     for (let gt of groupTribes) {\n        //         if (gt.records && gt.records.length == 0) {\n        //             continue;\n        //         }\n        //         i++;\n        //         let tmpMsg: Message = JSON.parse(JSON.stringify(gt.records[0]));\n        //         tmpMsg.msgType = MessageType.Divide\n        //         tmpMsg.id = \"\"\n        //         stickies.push({\n        //             theme: gt.theme,\n        //             seq: i,\n        //             roles: gt.roles,\n        //             records: [tmpMsg],\n        //             groupId: tmpMsg.groupId,\n        //             index: j++\n        //         })\n        //         for (let r of gt.records) {\n        //             r.actor = gt.roles.find(role => role.id == r.role);\n        //             stickies.push({\n        //                 theme: gt.theme,\n        //                 seq: i,\n        //                 roles: gt.roles,\n        //                 records: [r],\n        //                 groupId: r.groupId,\n        //                 index: j++\n        //             })\n        //         }\n        //\n        //     }\n        //     return stickies\n        // }\n        _this.setConnectWs = function () {\n            _this.connectOrigin(function (newMessage) { return __awaiter(_this, void 0, void 0, function () {\n                var release, coverData, messages, tribeInfo, tribeInfoCache, _a, pins, rest, lastSeq, e_1;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, this._lock()];\n                        case 1:\n                            release = _b.sent();\n                            _b.label = 2;\n                        case 2:\n                            _b.trys.push([2, 11, 12, 13]);\n                            coverData = JSON.parse(newMessage);\n                            if (!coverData[\"msgs\"]) return [3 /*break*/, 10];\n                            messages = coverData[\"msgs\"];\n                            tribeInfo = coverData[\"tribeInfo\"];\n                            tribeInfoCache = tribeInfo;\n                            _a = tribeInfoCache;\n                            return [4 /*yield*/, this.tribeRoles()];\n                        case 3:\n                            _a.roles = _b.sent();\n                            pins = this.convertMessagesToPinnedSticky(messages, tribeInfoCache.roles, tribeInfo);\n                            return [4 /*yield*/, this.storeTribeInfoIndex(tribeInfo)];\n                        case 4:\n                            _b.sent();\n                            return [4 /*yield*/, this.getMessageWithPinned(tribeInfoCache.tribeId, 1, 1)];\n                        case 5:\n                            rest = _b.sent();\n                            lastSeq = \"\";\n                            if (rest.data.length > 0) {\n                                lastSeq = rest.data[0].seq;\n                            }\n                            if (!(this.count++ > 0)) return [3 /*break*/, 7];\n                            return [4 /*yield*/, this.storeMessageIndex(messages, \"\", tribeInfoCache.roles)];\n                        case 6:\n                            _b.sent();\n                            this._cb(pins);\n                            return [3 /*break*/, 10];\n                        case 7: return [4 /*yield*/, this.clearUnPinnedMessages()];\n                        case 8:\n                            _b.sent();\n                            return [4 /*yield*/, this.storeMessageIndex(messages, \"\", tribeInfoCache.roles)];\n                        case 9:\n                            _b.sent();\n                            this._cb(pins.slice(pins.length - 1));\n                            _b.label = 10;\n                        case 10: return [3 /*break*/, 13];\n                        case 11:\n                            e_1 = _b.sent();\n                            console.error(e_1);\n                            return [3 /*break*/, 13];\n                        case 12:\n                            release();\n                            console.log(\"release ...\");\n                            return [7 /*endfinally*/];\n                        case 13: return [2 /*return*/];\n                    }\n                });\n            }); });\n        };\n        _this.convertMessagesToPinnedSticky = function (messages, roles, tribeInfo) {\n            if (messages && tribeInfo && roles) {\n                var copy = [];\n                for (var _i = 0, messages_2 = messages; _i < messages_2.length; _i++) {\n                    var msg = messages_2[_i];\n                    copy.push({\n                        theme: tribeInfo.theme,\n                        seq: 0,\n                        roles: roles,\n                        records: [msg],\n                        groupId: \"\",\n                        index: 0\n                    });\n                }\n                return copy;\n            }\n            return [];\n        };\n        var mutexify = require('mutexify/promise');\n        _this._lock = mutexify();\n        _this.isWsAlive = false;\n        return _this;\n    }\n    return TribeService;\n}(rpc_1.BaseRpc));\nexports.TribeService = TribeService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AirdropType = exports.MessageStatus = exports.MessageType = exports.Method = void 0;\nvar Method;\n(function (Method) {\n    Method[Method[\"_\"] = 0] = \"_\";\n    Method[Method[\"init\"] = 1] = \"init\";\n    Method[Method[\"getPinnedMessageArray\"] = 2] = \"getPinnedMessageArray\";\n    Method[Method[\"checkAlive\"] = 3] = \"checkAlive\";\n    Method[Method[\"listenerMessage\"] = 4] = \"listenerMessage\";\n})(Method = exports.Method || (exports.Method = {}));\n// tribe struct\nvar MessageType;\n(function (MessageType) {\n    MessageType[\"Dice\"] = \"dice\";\n    MessageType[\"Role\"] = \"role\";\n    MessageType[\"Text\"] = \"text\";\n    MessageType[\"Expression\"] = \"expression\";\n    MessageType[\"Theme\"] = \"theme\";\n    MessageType[\"Airdrop\"] = \"airdrop\";\n    MessageType[\"Support\"] = \"support\";\n    MessageType[\"Divide\"] = \"divide\";\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\nvar MessageStatus;\n(function (MessageStatus) {\n    MessageStatus[MessageStatus[\"dashed\"] = 0] = \"dashed\";\n    MessageStatus[MessageStatus[\"pinned\"] = 1] = \"pinned\";\n    MessageStatus[MessageStatus[\"removed\"] = 3] = \"removed\";\n})(MessageStatus = exports.MessageStatus || (exports.MessageStatus = {}));\nvar AirdropType;\n(function (AirdropType) {\n    AirdropType[\"Random\"] = \"random\";\n    AirdropType[\"Average\"] = \"average\";\n})(AirdropType = exports.AirdropType || (exports.AirdropType = {}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [764], () => (__webpack_require__(77461)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"d916bace\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"./\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t461: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkemit_pins\"] = self[\"webpackChunkemit_pins\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(764).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["Object","defineProperty","exports","value","baseConfig","Base","message","name","keyPath","autoIncrement","indexes","index","relativeIndex","unique","groupMsg","tribeInfo","__extends","this","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","pop","length","push","base_1","require","GroupMsgCollection","_super","db","_this","findPages","indexKey","indexValue","pageNo","pageSize","_a","_db","pageData","_name","delete","data","find","options","rest","select","findAll","selectAll","insert","update","default","tribeInfoCollection","groupMsgCollection","messageCollection","IndexedDB_1","messageCollection_1","groupMsgCollection_1","tribeInfoCollection_1","Index","initDatabase","tables","_i","keys_1","keys","key","dbProps","databaseName","version","IndexedDB","MessageCollection","some","TribeInfoCollection","config","development","source","host","ws","rpc","production","Table_1","createTable","createDateBase","openedDB","indexedDB","open","onupgradeneeded","ev","target","forEach","table","from","objectStoreNames","includes","table_info_1","createObjectStore","item","createIndex","deleteTable","tableName","oldVersion","deleteObjectStore","option","optionPramas","multiEntry","connect","conn_request","onsuccess","onerror","close","Table","catch","selecter","res","err","selectId","id","count","error","console","log","clearTable","clear","transaction","mode","request","objectStore","selector","index_1","value_1","name_1","rets","_b","name_2","retTmp","_c","rets_1","datas","_d","datas_1","name_3","_e","selectRequest","getAll","_iSelect","get","name_4","temp","openCursor","continue","page","store","IDBKeyRange","lowerBound","event","total","advance","updateRequest","put","addRequest","add","pdestroy","only","cursor","deleteRequest","BaseRpc","axios_1","url","post","path","authToken","_url","headers","__createBinding","o","m","k","k2","undefined","enumerable","__exportStar","types_1","tribe_1","service","init","tribeId","callback","messages","sendMessage","messageId","method","Method","listenerMessage","tribeService","getPinnedMessageArray","getMessageWithPinned","checkStatusAndSetAuthToken","status","TribeService","self","postMessage","addEventListener","message_1","checkAlive","__spreadArrays","s","i","il","arguments","r","a","j","jl","rpc_1","config_1","collection_1","init_count","cb","_cb","terminal","indexGroupMsg","setConnectWs","_wsOrigin","_wsIntervalId","clearInterval","code","tribeRoles","ret","reverse","userCheckAuth","userName","addWsListener","_ws","isWsAlive","send","JSON","stringify","sendPing","setTimeout","connectOrigin","indexOf","pongReceived","pongTimeout","clearTimeout","WebSocket","groupIds","storeTribeInfoIndex","createGroupMsg","withDraft","unFetchGroupIds","unFetchGroupIds_1","fg","gt","tmpMsg","groupId","records","seq","parse","msgType","MessageType","Divide","timestamp","storeMessageIndex","roles","_loop_1","this_1","records_1","record","msg","actor","role","msgStatus","MessageStatus","removed","clearUnPinnedMessages","trbi","keys_2","pins","messages_1","pMsg","replayToMsgId","replayMsg","theme","newMessage","release","coverData","tribeInfoCache","e_1","_lock","convertMessagesToPinnedSticky","slice","copy","messages_2","mutexify","AirdropType","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","x","__webpack_exports__","O","deferred","chunkIds","fn","priority","notFulfilled","Infinity","every","splice","chunkId","all","reduce","promises","u","miniCssF","obj","prop","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime"],"sourceRoot":""}